/**
 * @license AngularJS v1.7.7
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window){'use strict';var minErrConfig={objectMaxDepth:5,urlErrorParamsEnabled:!0};function errorHandlingConfig(config){if(isObject(config)){if(isDefined(config.objectMaxDepth)){minErrConfig.objectMaxDepth=isValidObjectMaxDepth(config.objectMaxDepth)?config.objectMaxDepth:NaN}
if(isDefined(config.urlErrorParamsEnabled)&&isBoolean(config.urlErrorParamsEnabled)){minErrConfig.urlErrorParamsEnabled=config.urlErrorParamsEnabled}}else{return minErrConfig}}
function isValidObjectMaxDepth(maxDepth){return isNumber(maxDepth)&&maxDepth>0}
function minErr(module,ErrorConstructor){ErrorConstructor=ErrorConstructor||Error;var url='https://errors.angularjs.org/1.7.7/';var regex=url.replace('.','\\.')+'[\\s\\S]*';var errRegExp=new RegExp(regex,'g');return function(){var code=arguments[0],template=arguments[1],message='['+(module?module+':':'')+code+'] ',templateArgs=sliceArgs(arguments,2).map(function(arg){return toDebugString(arg,minErrConfig.objectMaxDepth)}),paramPrefix,i;message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);if(index<templateArgs.length){return templateArgs[index].replace(errRegExp,'')}
return match});message+='\n'+url+(module?module+'/':'')+code;if(minErrConfig.urlErrorParamsEnabled){for(i=0,paramPrefix='?';i<templateArgs.length;i++,paramPrefix='&'){message+=paramPrefix+'p'+i+'='+encodeURIComponent(templateArgs[i])}}
return new ErrorConstructor(message)}}
var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/;var VALIDITY_STATE_PROPERTY='validity';var hasOwnProperty=Object.prototype.hasOwnProperty;var lowercase=function(string){return isString(string)?string.toLowerCase():string};var uppercase=function(string){return isString(string)?string.toUpperCase():string};var msie,jqLite,jQuery,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr('ng'),angular=window.angular||(window.angular={}),angularModule,uid=0;msie=window.document.documentMode;function isArrayLike(obj){if(obj==null||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||(jqLite&&obj instanceof jqLite))return!0;var length='length' in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1)in obj||typeof obj.item==='function')}
function forEach(obj,iterator,context){var key,length;if(obj){if(isFunction(obj)){for(key in obj){if(key!=='prototype'&&key!=='length'&&key!=='name'&&obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj)}}}else if(isArray(obj)||isArrayLike(obj)){var isPrimitive=typeof obj!=='object';for(key=0,length=obj.length;key<length;key++){if(isPrimitive||key in obj){iterator.call(context,obj[key],key,obj)}}}else if(obj.forEach&&obj.forEach!==forEach){obj.forEach(iterator,context,obj)}else if(isBlankObject(obj)){for(key in obj){iterator.call(context,obj[key],key,obj)}}else if(typeof obj.hasOwnProperty==='function'){for(key in obj){if(obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj)}}}else{for(key in obj){if(hasOwnProperty.call(obj,key)){iterator.call(context,obj[key],key,obj)}}}}
return obj}
function forEachSorted(obj,iterator,context){var keys=Object.keys(obj).sort();for(var i=0;i<keys.length;i++){iterator.call(context,obj[keys[i]],keys[i])}
return keys}
function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}
function nextUid(){return++uid}
function setHashKey(obj,h){if(h){obj.$$hashKey=h}else{delete obj.$$hashKey}}
function baseExtend(dst,objs,deep){var h=dst.$$hashKey;for(var i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(!isObject(obj)&&!isFunction(obj))continue;var keys=Object.keys(obj);for(var j=0,jj=keys.length;j<jj;j++){var key=keys[j];var src=obj[key];if(deep&&isObject(src)){if(isDate(src)){dst[key]=new Date(src.valueOf())}else if(isRegExp(src)){dst[key]=new RegExp(src)}else if(src.nodeName){dst[key]=src.cloneNode(!0)}else if(isElement(src)){dst[key]=src.clone()}else{if(!isObject(dst[key]))dst[key]=isArray(src)?[]:{};baseExtend(dst[key],[src],!0)}}else{dst[key]=src}}}
setHashKey(dst,h);return dst}
function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}
function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}
function toInt(str){return parseInt(str,10)}
var isNumberNaN=Number.isNaN||function isNumberNaN(num){return num!==num};function inherit(parent,extra){return extend(Object.create(parent),extra)}
function noop(){}
noop.$inject=[];function identity($){return $}
identity.$inject=[];function valueFn(value){return function valueRef(){return value}}
function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}
function isUndefined(value){return typeof value==='undefined'}
function isDefined(value){return typeof value!=='undefined'}
function isObject(value){return value!==null&&typeof value==='object'}
function isBlankObject(value){return value!==null&&typeof value==='object'&&!getPrototypeOf(value)}
function isString(value){return typeof value==='string'}
function isNumber(value){return typeof value==='number'}
function isDate(value){return toString.call(value)==='[object Date]'}
function isArray(arr){return Array.isArray(arr)||arr instanceof Array}
function isError(value){var tag=toString.call(value);switch(tag){case '[object Error]':return!0;case '[object Exception]':return!0;case '[object DOMException]':return!0;default:return value instanceof Error}}
function isFunction(value){return typeof value==='function'}
function isRegExp(value){return toString.call(value)==='[object RegExp]'}
function isWindow(obj){return obj&&obj.window===obj}
function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}
function isFile(obj){return toString.call(obj)==='[object File]'}
function isFormData(obj){return toString.call(obj)==='[object FormData]'}
function isBlob(obj){return toString.call(obj)==='[object Blob]'}
function isBoolean(value){return typeof value==='boolean'}
function isPromiseLike(obj){return obj&&isFunction(obj.then)}
var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}
function isArrayBuffer(obj){return toString.call(obj)==='[object ArrayBuffer]'}
var trim=function(value){return isString(value)?value.trim():value};var escapeForRegexp=function(s){return s.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,'\\$1').replace(/\x08/g,'\\x08')};function isElement(node){return!!(node&&(node.nodeName||(node.prop&&node.attr&&node.find)))}
function makeMap(str){var obj={},items=str.split(','),i;for(i=0;i<items.length;i++){obj[items[i]]=!0}
return obj}
function nodeName_(element){return lowercase(element.nodeName||(element[0]&&element[0].nodeName))}
function includes(array,obj){return Array.prototype.indexOf.call(array,obj)!==-1}
function arrayRemove(array,value){var index=array.indexOf(value);if(index>=0){array.splice(index,1)}
return index}
function copy(source,destination,maxDepth){var stackSource=[];var stackDest=[];maxDepth=isValidObjectMaxDepth(maxDepth)?maxDepth:NaN;if(destination){if(isTypedArray(destination)||isArrayBuffer(destination)){throw ngMinErr('cpta','Can\'t copy! TypedArray destination cannot be mutated.')}
if(source===destination){throw ngMinErr('cpi','Can\'t copy! Source and destination are identical.')}
if(isArray(destination)){destination.length=0}else{forEach(destination,function(value,key){if(key!=='$$hashKey'){delete destination[key]}})}
stackSource.push(source);stackDest.push(destination);return copyRecurse(source,destination,maxDepth)}
return copyElement(source,maxDepth);function copyRecurse(source,destination,maxDepth){maxDepth--;if(maxDepth<0){return'...'}
var h=destination.$$hashKey;var key;if(isArray(source)){for(var i=0,ii=source.length;i<ii;i++){destination.push(copyElement(source[i],maxDepth))}}else if(isBlankObject(source)){for(key in source){destination[key]=copyElement(source[key],maxDepth)}}else if(source&&typeof source.hasOwnProperty==='function'){for(key in source){if(source.hasOwnProperty(key)){destination[key]=copyElement(source[key],maxDepth)}}}else{for(key in source){if(hasOwnProperty.call(source,key)){destination[key]=copyElement(source[key],maxDepth)}}}
setHashKey(destination,h);return destination}
function copyElement(source,maxDepth){if(!isObject(source)){return source}
var index=stackSource.indexOf(source);if(index!==-1){return stackDest[index]}
if(isWindow(source)||isScope(source)){throw ngMinErr('cpws','Can\'t copy! Making copies of Window or Scope instances is not supported.')}
var needsRecurse=!1;var destination=copyType(source);if(destination===undefined){destination=isArray(source)?[]:Object.create(getPrototypeOf(source));needsRecurse=!0}
stackSource.push(source);stackDest.push(destination);return needsRecurse?copyRecurse(source,destination,maxDepth):destination}
function copyType(source){switch(toString.call(source)){case '[object Int8Array]':case '[object Int16Array]':case '[object Int32Array]':case '[object Float32Array]':case '[object Float64Array]':case '[object Uint8Array]':case '[object Uint8ClampedArray]':case '[object Uint16Array]':case '[object Uint32Array]':return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case '[object ArrayBuffer]':if(!source.slice){var copied=new ArrayBuffer(source.byteLength);new Uint8Array(copied).set(new Uint8Array(source));return copied}
return source.slice(0);case '[object Boolean]':case '[object Number]':case '[object String]':case '[object Date]':return new source.constructor(source.valueOf());case '[object RegExp]':var re=new RegExp(source.source,source.toString().match(/[^/]*$/)[0]);re.lastIndex=source.lastIndex;return re;case '[object Blob]':return new source.constructor([source],{type:source.type})}
if(isFunction(source.cloneNode)){return source.cloneNode(!0)}}}
function simpleCompare(a,b){return a===b||(a!==a&&b!==b)}
function equals(o1,o2){if(o1===o2)return!0;if(o1===null||o2===null)return!1;if(o1!==o1&&o2!==o2)return!0;var t1=typeof o1,t2=typeof o2,length,key,keySet;if(t1===t2&&t1==='object'){if(isArray(o1)){if(!isArray(o2))return!1;if((length=o1.length)===o2.length){for(key=0;key<length;key++){if(!equals(o1[key],o2[key]))return!1}
return!0}}else if(isDate(o1)){if(!isDate(o2))return!1;return simpleCompare(o1.getTime(),o2.getTime())}else if(isRegExp(o1)){if(!isRegExp(o2))return!1;return o1.toString()===o2.toString()}else{if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1){if(key.charAt(0)==='$'||isFunction(o1[key]))continue;if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}
for(key in o2){if(!(key in keySet)&&key.charAt(0)!=='$'&&isDefined(o2[key])&&!isFunction(o2[key]))return!1}
return!0}}
return!1}
var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=(window.document.querySelector('[ng-csp]')||window.document.querySelector('[data-ng-csp]'));if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute('ng-csp')||ngCspElement.getAttribute('data-ng-csp');csp.rules={noUnsafeEval:!ngCspAttribute||(ngCspAttribute.indexOf('no-unsafe-eval')!==-1),noInlineStyle:!ngCspAttribute||(ngCspAttribute.indexOf('no-inline-style')!==-1)}}else{csp.rules={noUnsafeEval:noUnsafeEval(),noInlineStyle:!1}}}
return csp.rules;function noUnsafeEval(){try{new Function('');return!1}catch(e){return!0}}};var jq=function(){if(isDefined(jq.name_))return jq.name_;var el;var i,ii=ngAttrPrefixes.length,prefix,name;for(i=0;i<ii;++i){prefix=ngAttrPrefixes[i];el=window.document.querySelector('['+prefix.replace(':','\\:')+'jq]');if(el){name=el.getAttribute(prefix+'jq');break}}
return(jq.name_=name)};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}
function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}
function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];if(isFunction(fn)&&!(fn instanceof RegExp)){return curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}else{return fn}}
function toJsonReplacer(key,value){var val=value;if(typeof key==='string'&&key.charAt(0)==='$'&&key.charAt(1)==='$'){val=undefined}else if(isWindow(value)){val='$WINDOW'}else if(value&&window.document===value){val='$DOCUMENT'}else if(isScope(value)){val='$SCOPE'}
return val}
function toJson(obj,pretty){if(isUndefined(obj))return undefined;if(!isNumber(pretty)){pretty=pretty?2:null}
return JSON.stringify(obj,toJsonReplacer,pretty)}
function fromJson(json){return isString(json)?JSON.parse(json):json}
var ALL_COLONS=/:/g;function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,'');var requestedTimezoneOffset=Date.parse('Jan 01, 1970 00:00:00 '+timezone)/60000;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}
function addDateMinutes(date,minutes){date=new Date(date.getTime());date.setMinutes(date.getMinutes()+minutes);return date}
function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();var timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}
function startingTag(element){element=jqLite(element).clone().empty();var elemHtml=jqLite('<div></div>').append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(match,nodeName){return'<'+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}
function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}
function parseKeyValue(keyValue){var obj={};forEach((keyValue||'').split('&'),function(keyValue){var splitPoint,key,val;if(keyValue){key=keyValue=keyValue.replace(/\+/g,'%20');splitPoint=keyValue.indexOf('=');if(splitPoint!==-1){key=keyValue.substring(0,splitPoint);val=keyValue.substring(splitPoint+1)}
key=tryDecodeURIComponent(key);if(isDefined(key)){val=isDefined(val)?tryDecodeURIComponent(val):!0;if(!hasOwnProperty.call(obj,key)){obj[key]=val}else if(isArray(obj[key])){obj[key].push(val)}else{obj[key]=[obj[key],val]}}}});return obj}
function toKeyValue(obj){var parts=[];forEach(obj,function(value,key){if(isArray(value)){forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?'':'='+encodeUriQuery(arrayValue,!0)))})}else{parts.push(encodeUriQuery(key,!0)+(value===!0?'':'='+encodeUriQuery(value,!0)))}});return parts.length?parts.join('&'):''}
function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,'&').replace(/%3D/gi,'=').replace(/%2B/gi,'+')}
function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%3B/gi,';').replace(/%20/g,(pctEncodeSpaces?'%20':'+'))}
var ngAttrPrefixes=['ng-','data-ng-','ng:','x-ng-'];function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i){attr=ngAttrPrefixes[i]+ngAttr;if(isString(attr=element.getAttribute(attr))){return attr}}
return null}
function allowAutoBootstrap(document){var script=document.currentScript;if(!script){return!0}
if(!(script instanceof window.HTMLScriptElement||script instanceof window.SVGScriptElement)){return!1}
var attributes=script.attributes;var srcs=[attributes.getNamedItem('src'),attributes.getNamedItem('href'),attributes.getNamedItem('xlink:href')];return srcs.every(function(src){if(!src){return!0}
if(!src.value){return!1}
var link=document.createElement('a');link.href=src.value;if(document.location.origin===link.origin){return!0}
switch(link.protocol){case 'http:':case 'https:':case 'ftp:':case 'blob:':case 'file:':case 'data:':return!0;default:return!1}})}
var isAutoBootstrapAllowed=allowAutoBootstrap(window.document);function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+'app';if(!appElement&&element.hasAttribute&&element.hasAttribute(name)){appElement=element;module=element.getAttribute(name)}});forEach(ngAttrPrefixes,function(prefix){var name=prefix+'app';var candidate;if(!appElement&&(candidate=element.querySelector('['+name.replace(':','\\:')+']'))){appElement=candidate;module=candidate.getAttribute(name)}});if(appElement){if(!isAutoBootstrapAllowed){window.console.error('AngularJS: disabling automatic bootstrap. <script> protocol indicates '+'an extension, document.location.href does not match.');return}
config.strictDi=getNgAttribute(appElement,'strict-di')!==null;bootstrap(appElement,module?[module]:[],config)}}
function bootstrap(element,modules,config){if(!isObject(config))config={};var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){element=jqLite(element);if(element.injector()){var tag=(element[0]===window.document)?'document':startingTag(element);throw ngMinErr('btstrpd','App already bootstrapped with this element \'{0}\'',tag.replace(/</,'&lt;').replace(/>/,'&gt;'))}
modules=modules||[];modules.unshift(['$provide',function($provide){$provide.value('$rootElement',element)}]);if(config.debugInfoEnabled){modules.push(['$compileProvider',function($compileProvider){$compileProvider.debugInfoEnabled(!0)}])}
modules.unshift('ng');var injector=createInjector(modules,config.strictDi);injector.invoke(['$rootScope','$rootElement','$compile','$injector',function bootstrapApply(scope,element,compile,injector){scope.$apply(function(){element.data('$injector',injector);compile(element)(scope)})}]);return injector};var NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/;var NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)){config.debugInfoEnabled=!0;window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,'')}
if(window&&!NG_DEFER_BOOTSTRAP.test(window.name)){return doBootstrap()}
window.name=window.name.replace(NG_DEFER_BOOTSTRAP,'');angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)});return doBootstrap()};if(isFunction(angular.resumeDeferredBootstrap)){angular.resumeDeferredBootstrap()}}
function reloadWithDebugInfo(){window.name='NG_ENABLE_DEBUG_INFO!'+window.name;window.location.reload()}
function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector){throw ngMinErr('test','no injector found for element argument to getTestability')}
return injector.get('$$testability')}
var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){separator=separator||'_';return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:'')+letter.toLowerCase()})}
var bindJQueryFired=!1;function bindJQuery(){var originalCleanData;if(bindJQueryFired){return}
var jqName=jq();jQuery=isUndefined(jqName)?window.jQuery:!jqName?undefined:window[jqName];if(jQuery&&jQuery.fn.on){jqLite=jQuery;extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:(JQLitePrototype).controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData})}else{jqLite=JQLite}
originalCleanData=jqLite.cleanData;jqLite.cleanData=function(elems){var events;for(var i=0,elem;(elem=elems[i])!=null;i++){events=(jqLite._data(elem)||{}).events;if(events&&events.$destroy){jqLite(elem).triggerHandler('$destroy')}}
originalCleanData(elems)};angular.element=jqLite;bindJQueryFired=!0}
function assertArg(arg,name,reason){if(!arg){throw ngMinErr('areq','Argument \'{0}\' is {1}',(name||'?'),(reason||'required'))}
return arg}
function assertArgFn(arg,name,acceptArrayAnnotation){if(acceptArrayAnnotation&&isArray(arg)){arg=arg[arg.length-1]}
assertArg(isFunction(arg),name,'not a function, got '+(arg&&typeof arg==='object'?arg.constructor.name||'Object':typeof arg));return arg}
function assertNotHasOwnProperty(name,context){if(name==='hasOwnProperty'){throw ngMinErr('badname','hasOwnProperty is not a valid {0} name',context)}}
function getter(obj,path,bindFnToScope){if(!path)return obj;var keys=path.split('.');var key;var lastInstance=obj;var len=keys.length;for(var i=0;i<len;i++){key=keys[i];if(obj){obj=(lastInstance=obj)[key]}}
if(!bindFnToScope&&isFunction(obj)){return bind(lastInstance,obj)}
return obj}
function getBlockNodes(nodes){var node=nodes[0];var endNode=nodes[nodes.length-1];var blockNodes;for(var i=1;node!==endNode&&(node=node.nextSibling);i++){if(blockNodes||nodes[i]!==node){if(!blockNodes){blockNodes=jqLite(slice.call(nodes,0,i))}
blockNodes.push(node)}}
return blockNodes||nodes}
function createMap(){return Object.create(null)}
function stringify(value){if(value==null){return''}
switch(typeof value){case 'string':break;case 'number':value=''+value;break;default:if(hasCustomToString(value)&&!isArray(value)&&!isDate(value)){value=value.toString()}else{value=toJson(value)}}
return value}
var NODE_TYPE_ELEMENT=1;var NODE_TYPE_ATTRIBUTE=2;var NODE_TYPE_TEXT=3;var NODE_TYPE_COMMENT=8;var NODE_TYPE_DOCUMENT=9;var NODE_TYPE_DOCUMENT_FRAGMENT=11;function setupModuleLoader(window){var $injectorMinErr=minErr('$injector');var ngMinErr=minErr('ng');function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}
var angular=ensure(window,'angular',Object);angular.$$minErr=angular.$$minErr||minErr;return ensure(angular,'module',function(){var modules={};return function module(name,requires,configFn){var info={};var assertNotHasOwnProperty=function(name,context){if(name==='hasOwnProperty'){throw ngMinErr('badname','hasOwnProperty is not a valid {0} name',context)}};assertNotHasOwnProperty(name,'module');if(requires&&modules.hasOwnProperty(name)){modules[name]=null}
return ensure(modules,name,function(){if(!requires){throw $injectorMinErr('nomod','Module \'{0}\' is not available! You either misspelled '+'the module name or forgot to load it. If registering a module ensure that you '+'specify the dependencies as the second argument.',name)}
var invokeQueue=[];var configBlocks=[];var runBlocks=[];var config=invokeLater('$injector','invoke','push',configBlocks);var moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,info:function(value){if(isDefined(value)){if(!isObject(value))throw ngMinErr('aobj','Argument \'{0}\' must be an object','value');info=value;return this}
return info},requires:requires,name:name,provider:invokeLaterAndSetModuleName('$provide','provider'),factory:invokeLaterAndSetModuleName('$provide','factory'),service:invokeLaterAndSetModuleName('$provide','service'),value:invokeLater('$provide','value'),constant:invokeLater('$provide','constant','unshift'),decorator:invokeLaterAndSetModuleName('$provide','decorator',configBlocks),animation:invokeLaterAndSetModuleName('$animateProvider','register'),filter:invokeLaterAndSetModuleName('$filterProvider','register'),controller:invokeLaterAndSetModuleName('$controllerProvider','register'),directive:invokeLaterAndSetModuleName('$compileProvider','directive'),component:invokeLaterAndSetModuleName('$compileProvider','component'),config:config,run:function(block){runBlocks.push(block);return this}};if(configFn){config(configFn)}
return moduleInstance;function invokeLater(provider,method,insertMethod,queue){if(!queue)queue=invokeQueue;return function(){queue[insertMethod||'push']([provider,method,arguments]);return moduleInstance}}
function invokeLaterAndSetModuleName(provider,method,queue){if(!queue)queue=invokeQueue;return function(recipeName,factoryFunction){if(factoryFunction&&isFunction(factoryFunction))factoryFunction.$$moduleName=name;queue.push([provider,method,arguments]);return moduleInstance}}})}})}
function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++){dst[i]=src[i]}}else if(isObject(src)){dst=dst||{};for(var key in src){if(!(key.charAt(0)==='$'&&key.charAt(1)==='$')){dst[key]=src[key]}}}
return dst||src}
function serializeObject(obj,maxDepth){var seen=[];if(isValidObjectMaxDepth(maxDepth)){obj=angular.copy(obj,null,maxDepth)}
return JSON.stringify(obj,function(key,val){val=toJsonReplacer(key,val);if(isObject(val)){if(seen.indexOf(val)>=0)return'...';seen.push(val)}
return val})}
function toDebugString(obj,maxDepth){if(typeof obj==='function'){return obj.toString().replace(/ \{[\s\S]*$/,'')}else if(isUndefined(obj)){return'undefined'}else if(typeof obj!=='string'){return serializeObject(obj,maxDepth)}
return obj}
var version={full:'1.7.7',major:1,minor:7,dot:7,codeName:'kingly-exiting'};function publishExternalAPI(angular){extend(angular,{'errorHandlingConfig':errorHandlingConfig,'bootstrap':bootstrap,'copy':copy,'extend':extend,'merge':merge,'equals':equals,'element':jqLite,'forEach':forEach,'injector':createInjector,'noop':noop,'bind':bind,'toJson':toJson,'fromJson':fromJson,'identity':identity,'isUndefined':isUndefined,'isDefined':isDefined,'isString':isString,'isFunction':isFunction,'isObject':isObject,'isNumber':isNumber,'isElement':isElement,'isArray':isArray,'version':version,'isDate':isDate,'callbacks':{$$counter:0},'getTestability':getTestability,'reloadWithDebugInfo':reloadWithDebugInfo,'$$minErr':minErr,'$$csp':csp,'$$encodeUriSegment':encodeUriSegment,'$$encodeUriQuery':encodeUriQuery,'$$lowercase':lowercase,'$$stringify':stringify,'$$uppercase':uppercase});angularModule=setupModuleLoader(window);angularModule('ng',['ngLocale'],['$provide',function ngModule($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider});$provide.provider('$compile',$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRef:ngRefDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective,input:hiddenInputBrowserCacheDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives);$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$$intervalFactory:$$IntervalFactoryProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$$taskTrackerFactory:$$TaskTrackerFactoryProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:$$MapProvider,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:'1.7.7'})}
JQLite.expando='ng339';var jqCache=JQLite.cache={},jqId=1;JQLite._data=function(node){return this.cache[node[this.expando]]||{}};function jqNextId(){return++jqId}
var DASH_LOWERCASE_REGEXP=/-([a-z])/g;var MS_HACK_REGEXP=/^-ms-/;var MOUSE_EVENT_MAP={mouseleave:'mouseout',mouseenter:'mouseover'};var jqLiteMinErr=minErr('jqLite');function cssKebabToCamel(name){return kebabToCamel(name.replace(MS_HACK_REGEXP,'ms-'))}
function fnCamelCaseReplace(all,letter){return letter.toUpperCase()}
function kebabToCamel(name){return name.replace(DASH_LOWERCASE_REGEXP,fnCamelCaseReplace)}
var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var HTML_REGEXP=/<|&#?\w+;/;var TAG_NAME_REGEXP=/<([\w:-]+)/;var XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi;var wrapMap={'option':[1,'<select multiple="multiple">','</select>'],'thead':[1,'<table>','</table>'],'col':[2,'<table><colgroup>','</colgroup></table>'],'tr':[2,'<table><tbody>','</tbody></table>'],'td':[3,'<table><tbody><tr>','</tr></tbody></table>'],'_default':[0,'','']};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}
function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}
function jqLiteHasData(node){for(var key in jqCache[node.ng339]){return!0}
return!1}
function jqLiteBuildFragment(html,context){var tmp,tag,wrap,fragment=context.createDocumentFragment(),nodes=[],i;if(jqLiteIsTextNode(html)){nodes.push(context.createTextNode(html))}else{tmp=fragment.appendChild(context.createElement('div'));tag=(TAG_NAME_REGEXP.exec(html)||['',''])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,'<$1></$2>')+wrap[2];i=wrap[0];while(i--){tmp=tmp.lastChild}
nodes=concat(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=''}
fragment.textContent='';fragment.innerHTML='';forEach(nodes,function(node){fragment.appendChild(node)});return fragment}
function jqLiteParseHTML(html,context){context=context||window.document;var parsed;if((parsed=SINGLE_TAG_REGEXP.exec(html))){return[context.createElement(parsed[1])]}
if((parsed=jqLiteBuildFragment(html,context))){return parsed.childNodes}
return[]}
function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;if(parent){parent.replaceChild(wrapper,node)}
wrapper.appendChild(node)}
var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(this.compareDocumentPosition(arg)&16)};function JQLite(element){if(element instanceof JQLite){return element}
var argIsString;if(isString(element)){element=trim(element);argIsString=!0}
if(!(this instanceof JQLite)){if(argIsString&&element.charAt(0)!=='<'){throw jqLiteMinErr('nosel','Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element')}
return new JQLite(element)}
if(argIsString){jqLiteAddNodes(this,jqLiteParseHTML(element))}else if(isFunction(element)){jqLiteReady(element)}else{jqLiteAddNodes(this,element)}}
function jqLiteClone(element){return element.cloneNode(!0)}
function jqLiteDealoc(element,onlyDescendants){if(!onlyDescendants&&jqLiteAcceptsData(element))jqLite.cleanData([element]);if(element.querySelectorAll){jqLite.cleanData(element.querySelectorAll('*'))}}
function isEmptyObject(obj){var name;for(name in obj){return!1}
return!0}
function removeIfEmptyData(element){var expandoId=element.ng339;var expandoStore=expandoId&&jqCache[expandoId];var events=expandoStore&&expandoStore.events;var data=expandoStore&&expandoStore.data;if((!data||isEmptyObject(data))&&(!events||isEmptyObject(events))){delete jqCache[expandoId];element.ng339=undefined}}
function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr('offargs','jqLite#off() does not support the `selector` argument');var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var handle=expandoStore&&expandoStore.handle;if(!handle)return;if(!type){for(type in events){if(type!=='$destroy'){element.removeEventListener(type,handle)}
delete events[type]}}else{var removeHandler=function(type){var listenerFns=events[type];if(isDefined(fn)){arrayRemove(listenerFns||[],fn)}
if(!(isDefined(fn)&&listenerFns&&listenerFns.length>0)){element.removeEventListener(type,handle);delete events[type]}};forEach(type.split(' '),function(type){removeHandler(type);if(MOUSE_EVENT_MAP[type]){removeHandler(MOUSE_EVENT_MAP[type])}})}
removeIfEmptyData(element)}
function jqLiteRemoveData(element,name){var expandoId=element.ng339;var expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name){delete expandoStore.data[name]}else{expandoStore.data={}}
removeIfEmptyData(element)}}
function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(createIfNecessary&&!expandoStore){element.ng339=expandoId=jqNextId();expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}}
return expandoStore}
function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var prop;var isSimpleSetter=isDefined(value);var isSimpleGetter=!isSimpleSetter&&key&&!isObject(key);var massGetter=!key;var expandoStore=jqLiteExpandoStore(element,!isSimpleGetter);var data=expandoStore&&expandoStore.data;if(isSimpleSetter){data[kebabToCamel(key)]=value}else{if(massGetter){return data}else{if(isSimpleGetter){return data&&data[kebabToCamel(key)]}else{for(prop in key){data[kebabToCamel(prop)]=key[prop]}}}}}}
function jqLiteHasClass(element,selector){if(!element.getAttribute)return!1;return((' '+(element.getAttribute('class')||'')+' ').replace(/[\n\t]/g,' ').indexOf(' '+selector+' ')>-1)}
function jqLiteRemoveClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(' '+(element.getAttribute('class')||'')+' ').replace(/[\n\t]/g,' ');var newClasses=existingClasses;forEach(cssClasses.split(' '),function(cssClass){cssClass=trim(cssClass);newClasses=newClasses.replace(' '+cssClass+' ',' ')});if(newClasses!==existingClasses){element.setAttribute('class',trim(newClasses))}}}
function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(' '+(element.getAttribute('class')||'')+' ').replace(/[\n\t]/g,' ');var newClasses=existingClasses;forEach(cssClasses.split(' '),function(cssClass){cssClass=trim(cssClass);if(newClasses.indexOf(' '+cssClass+' ')===-1){newClasses+=cssClass+' '}});if(newClasses!==existingClasses){element.setAttribute('class',trim(newClasses))}}}
function jqLiteAddNodes(root,elements){if(elements){if(elements.nodeType){root[root.length++]=elements}else{var length=elements.length;if(typeof length==='number'&&elements.window!==elements){if(length){for(var i=0;i<length;i++){root[root.length++]=elements[i]}}}else{root[root.length++]=elements}}}}
function jqLiteController(element,name){return jqLiteInheritedData(element,'$'+(name||'ngController')+'Controller')}
function jqLiteInheritedData(element,name,value){if(element.nodeType===NODE_TYPE_DOCUMENT){element=element.documentElement}
var names=isArray(name)?name:[name];while(element){for(var i=0,ii=names.length;i<ii;i++){if(isDefined(value=jqLite.data(element,names[i])))return value}
element=element.parentNode||(element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host)}}
function jqLiteEmpty(element){jqLiteDealoc(element,!0);while(element.firstChild){element.removeChild(element.firstChild)}}
function jqLiteRemove(element,keepData){if(!keepData)jqLiteDealoc(element);var parent=element.parentNode;if(parent)parent.removeChild(element);}
function jqLiteDocumentLoaded(action,win){win=win||window;if(win.document.readyState==='complete'){win.setTimeout(action)}else{jqLite(win).on('load',action)}}
function jqLiteReady(fn){function trigger(){window.document.removeEventListener('DOMContentLoaded',trigger);window.removeEventListener('load',trigger);fn()}
if(window.document.readyState==='complete'){window.setTimeout(fn)}else{window.document.addEventListener('DOMContentLoaded',trigger);window.addEventListener('load',trigger)}}
var JQLitePrototype=JQLite.prototype={ready:jqLiteReady,toString:function(){var value=[];forEach(this,function(e){value.push(''+e)});return'['+value.join(', ')+']'},eq:function(index){return(index>=0)?jqLite(this[index]):jqLite(this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice};var BOOLEAN_ATTR={};forEach('multiple,selected,checked,disabled,readOnly,required,open'.split(','),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach('input,select,option,textarea,button,form,details'.split(','),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={'ngMinlength':'minlength','ngMaxlength':'maxlength','ngMin':'min','ngMax':'max','ngPattern':'pattern','ngStep':'step'};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}
function getAliasedAttrName(name){return ALIASED_ATTR[name]}
forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:function jqLiteCleanData(nodes){for(var i=0,ii=nodes.length;i<ii;i++){jqLiteRemoveData(nodes[i]);jqLiteOff(nodes[i])}}},function(fn,name){JQLite[name]=fn});forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,'$scope')||jqLiteInheritedData(element.parentNode||element,['$isolateScope','$scope'])},isolateScope:function(element){return jqLite.data(element,'$isolateScope')||jqLite.data(element,'$isolateScopeNoTemplate')},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,'$injector')},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){name=cssKebabToCamel(name);if(isDefined(value)){element.style[name]=value}else{return element.style[name]}},attr:function(element,name,value){var ret;var nodeType=element.nodeType;if(nodeType===NODE_TYPE_TEXT||nodeType===NODE_TYPE_ATTRIBUTE||nodeType===NODE_TYPE_COMMENT||!element.getAttribute){return}
var lowercasedName=lowercase(name);var isBooleanAttr=BOOLEAN_ATTR[lowercasedName];if(isDefined(value)){if(value===null||(value===!1&&isBooleanAttr)){element.removeAttribute(name)}else{element.setAttribute(name,isBooleanAttr?lowercasedName:value)}}else{ret=element.getAttribute(name);if(isBooleanAttr&&ret!==null){ret=lowercasedName}
return ret===null?undefined:ret}},prop:function(element,name,value){if(isDefined(value)){element[name]=value}else{return element[name]}},text:(function(){getText.$dv='';return getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT)?element.textContent:''}
element.textContent=value}})(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&nodeName_(element)==='select'){var result=[];forEach(element.options,function(option){if(option.selected){result.push(option.value||option.text)}});return result}
return element.value}
element.value=value},html:function(element,value){if(isUndefined(value)){return element.innerHTML}
jqLiteDealoc(element,!0);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;var nodeCount=this.length;if(fn!==jqLiteEmpty&&(isUndefined((fn.length===2&&(fn!==jqLiteHasClass&&fn!==jqLiteController))?arg1:arg2))){if(isObject(arg1)){for(i=0;i<nodeCount;i++){if(fn===jqLiteData){fn(this[i],arg1)}else{for(key in arg1){fn(this[i],key,arg1[key])}}}
return this}else{var value=fn.$dv;var jj=(isUndefined(value))?Math.min(nodeCount,1):nodeCount;for(var j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}
return value}}else{for(i=0;i<nodeCount;i++){fn(this[i],arg1,arg2)}
return this}}});function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type];var eventFnsLength=eventFns?eventFns.length:0;if(!eventFnsLength)return;if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0;if(event.stopPropagation){event.stopPropagation()}
if(originalStopImmediatePropagation){originalStopImmediatePropagation.call(event)}}}
event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;if((eventFnsLength>1)){eventFns=shallowCopy(eventFns)}
for(var i=0;i<eventFnsLength;i++){if(!event.isImmediatePropagationStopped()){handlerWrapper(element,event,eventFns[i])}}};eventHandler.elem=element;return eventHandler}
function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}
function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;if(!related||(related!==target&&!jqLiteContains.call(target,related))){handler.call(target,event)}}
forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr('onargs','jqLite#on() does not support the `selector` or `eventData` parameters');if(!jqLiteAcceptsData(element)){return}
var expandoStore=jqLiteExpandoStore(element,!0);var events=expandoStore.events;var handle=expandoStore.handle;if(!handle){handle=expandoStore.handle=createEventHandler(element,events)}
var types=type.indexOf(' ')>=0?type.split(' '):[type];var i=types.length;var addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];if(!eventFns){eventFns=events[type]=[];eventFns.specialHandlerWrapper=specialHandlerWrapper;if(type!=='$destroy'&&!noEventListener){element.addEventListener(type,handle)}}
eventFns.push(fn)};while(i--){type=types[i];if(MOUSE_EVENT_MAP[type]){addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper);addHandler(type,undefined,!0)}else{addHandler(type)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element);element.on(type,function onFn(){element.off(type,fn);element.off(type,onFn)});element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element);forEach(new JQLite(replaceNode),function(node){if(index){parent.insertBefore(node,index.nextSibling)}else{parent.replaceChild(node,element)}
index=node})},children:function(element){var children=[];forEach(element.childNodes,function(element){if(element.nodeType===NODE_TYPE_ELEMENT){children.push(element)}});return children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_ELEMENT&&nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT)return;node=new JQLite(node);for(var i=0,ii=node.length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;if(parent){newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling);index=node}}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){if(selector){forEach(selector.split(' '),function(className){var classCondition=condition;if(isUndefined(classCondition)){classCondition=!jqLiteHasClass(element,className)}(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})}},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){if(element.getElementsByTagName){return element.getElementsByTagName(selector)}else{return[]}},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs;var eventName=event.type||event;var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var eventFns=events&&events[eventName];if(eventFns){dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element};if(event.type){dummyEvent=extend(dummyEvent,event)}
eventFnsCopy=shallowCopy(eventFns);handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent];forEach(eventFnsCopy,function(fn){if(!dummyEvent.isImmediatePropagationStopped()){fn.apply(element,handlerArgs)}})}}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){var value;for(var i=0,ii=this.length;i<ii;i++){if(isUndefined(value)){value=fn(this[i],arg1,arg2,arg3);if(isDefined(value)){value=jqLite(value)}}else{jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3))}}
return isDefined(value)?value:this}});JQLite.prototype.bind=JQLite.prototype.on;JQLite.prototype.unbind=JQLite.prototype.off;function $$jqLiteProvider(){this.$get=function $$jqLite(){return extend(JQLite,{hasClass:function(node,classes){if(node.attr)node=node[0];return jqLiteHasClass(node,classes)},addClass:function(node,classes){if(node.attr)node=node[0];return jqLiteAddClass(node,classes)},removeClass:function(node,classes){if(node.attr)node=node[0];return jqLiteRemoveClass(node,classes)}})}}
function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key){if(typeof key==='function'){key=obj.$$hashKey()}
return key}
var objType=typeof obj;if(objType==='function'||(objType==='object'&&obj!==null)){key=obj.$$hashKey=objType+':'+(nextUidFn||nextUid)()}else{key=objType+':'+obj}
return key}
var nanKey=Object.create(null);function NgMapShim(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}
NgMapShim.prototype={_idx:function(key){if(key!==this._lastKey){this._lastKey=key;this._lastIndex=this._keys.indexOf(key)}
return this._lastIndex},_transformKey:function(key){return isNumberNaN(key)?nanKey:key},get:function(key){key=this._transformKey(key);var idx=this._idx(key);if(idx!==-1){return this._values[idx]}},has:function(key){key=this._transformKey(key);var idx=this._idx(key);return idx!==-1},set:function(key,value){key=this._transformKey(key);var idx=this._idx(key);if(idx===-1){idx=this._lastIndex=this._keys.length}
this._keys[idx]=key;this._values[idx]=value},delete:function(key){key=this._transformKey(key);var idx=this._idx(key);if(idx===-1){return!1}
this._keys.splice(idx,1);this._values.splice(idx,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var NgMap=NgMapShim;var $$MapProvider=[function(){this.$get=[function(){return NgMap}]}];var ARROW_ARG=/^([^(]+?)=>/;var FN_ARGS=/^[^(]*\(\s*([^)]*)\)/m;var FN_ARG_SPLIT=/,/;var FN_ARG=/^\s*(_?)(\S+?)\1\s*$/;var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;var $injectorMinErr=minErr('$injector');function stringifyFn(fn){return Function.prototype.toString.call(fn)}
function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,''),args=fnText.match(ARROW_ARG)||fnText.match(FN_ARGS);return args}
function anonFn(fn){var args=extractArgs(fn);if(args){return'function('+(args[1]||'').replace(/[\s\r\n]+/,' ')+')'}
return'fn'}
function annotate(fn,strictDi,name){var $inject,argDecl,last;if(typeof fn==='function'){if(!($inject=fn.$inject)){$inject=[];if(fn.length){if(strictDi){if(!isString(name)||!name){name=fn.name||anonFn(fn)}
throw $injectorMinErr('strictdi','{0} is not using explicit annotation and cannot be invoked in strict mode',name)}
argDecl=extractArgs(fn);forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}
fn.$inject=$inject}}else if(isArray(fn)){last=fn.length-1;assertArgFn(fn[last],'fn');$inject=fn.slice(0,last)}else{assertArgFn(fn,'fn',!0)}
return $inject}
function createInjector(modulesToLoad,strictDi){strictDi=(strictDi===!0);var INSTANTIATING={},providerSuffix='Provider',path=[],loadedModules=new NgMap(),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=(providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){if(angular.isString(caller)){path.push(caller)}
throw $injectorMinErr('unpr','Unknown provider: {0}',path.join(' <- '))})),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)}),instanceInjector=protoInstanceInjector;providerCache['$injector'+providerSuffix]={$get:valueFn(protoInstanceInjector)};instanceInjector.modules=providerInjector.modules=createMap();var runBlocks=loadModules(modulesToLoad);instanceInjector=protoInstanceInjector.get('$injector');instanceInjector.strictDi=strictDi;forEach(runBlocks,function(fn){if(fn)instanceInjector.invoke(fn);});instanceInjector.loadNewModules=function(mods){forEach(loadModules(mods),function(fn){if(fn)instanceInjector.invoke(fn);})};return instanceInjector;function supportObject(delegate){return function(key,value){if(isObject(key)){forEach(key,reverseParams(delegate))}else{return delegate(key,value)}}}
function provider(name,provider_){assertNotHasOwnProperty(name,'service');if(isFunction(provider_)||isArray(provider_)){provider_=providerInjector.instantiate(provider_)}
if(!provider_.$get){throw $injectorMinErr('pget','Provider \'{0}\' must define $get factory method.',name)}
return(providerCache[name+providerSuffix]=provider_)}
function enforceReturnValue(name,factory){return function enforcedReturnValue(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result)){throw $injectorMinErr('undef','Provider \'{0}\' must return a value from $get factory method.',name)}
return result}}
function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}
function service(name,constructor){return factory(name,['$injector',function($injector){return $injector.instantiate(constructor)}])}
function value(name,val){return factory(name,valueFn(val),!1)}
function constant(name,value){assertNotHasOwnProperty(name,'constant');providerCache[name]=value;instanceCache[name]=value}
function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}
function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),'modulesToLoad','not an array');var runBlocks=[],moduleFn;forEach(modulesToLoad,function(module){if(loadedModules.get(module))return;loadedModules.set(module,!0);function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}
try{if(isString(module)){moduleFn=angularModule(module);instanceInjector.modules[module]=moduleFn;runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks);runInvokeQueue(moduleFn._invokeQueue);runInvokeQueue(moduleFn._configBlocks)}else if(isFunction(module)){runBlocks.push(providerInjector.invoke(module))}else if(isArray(module)){runBlocks.push(providerInjector.invoke(module))}else{assertArgFn(module,'module')}}catch(e){if(isArray(module)){module=module[module.length-1]}
if(e.message&&e.stack&&e.stack.indexOf(e.message)===-1){e=e.message+'\n'+e.stack}
throw $injectorMinErr('modulerr','Failed to instantiate module {0} due to:\n{1}',module,e.stack||e.message||e)}});return runBlocks}
function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING){throw $injectorMinErr('cdep','Circular dependency found: {0}',serviceName+' <- '+path.join(' <- '))}
return cache[serviceName]}else{try{path.unshift(serviceName);cache[serviceName]=INSTANTIATING;cache[serviceName]=factory(serviceName,caller);return cache[serviceName]}catch(err){if(cache[serviceName]===INSTANTIATING){delete cache[serviceName]}
throw err}finally{path.shift()}}}
function injectionArgs(fn,locals,serviceName){var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(var i=0,length=$inject.length;i<length;i++){var key=$inject[i];if(typeof key!=='string'){throw $injectorMinErr('itkn','Incorrect injection token! Expected service name as string, got {0}',key)}
args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}
return args}
function isClass(func){if(msie||typeof func!=='function'){return!1}
var result=func.$$ngIsClass;if(!isBoolean(result)){result=func.$$ngIsClass=/^class\b/.test(stringifyFn(func))}
return result}
function invoke(fn,self,locals,serviceName){if(typeof locals==='string'){serviceName=locals;locals=null}
var args=injectionArgs(fn,locals,serviceName);if(isArray(fn)){fn=fn[fn.length-1]}
if(!isClass(fn)){return fn.apply(self,args)}else{args.unshift(null);return new(Function.prototype.bind.apply(fn,args))()}}
function instantiate(Type,locals,serviceName){var ctor=(isArray(Type)?Type[Type.length-1]:Type);var args=injectionArgs(Type,locals,serviceName);args.unshift(null);return new(Function.prototype.bind.apply(ctor,args))()}
return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}}
createInjector.$$annotate=annotate;function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1};this.$get=['$window','$location','$rootScope',function($window,$location,$rootScope){var document=$window.document;function getFirstAnchor(list){var result=null;Array.prototype.some.call(list,function(element){if(nodeName_(element)==='a'){result=element;return!0}});return result}
function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset)){offset=offset()}else if(isElement(offset)){var elem=offset[0];var style=$window.getComputedStyle(elem);if(style.position!=='fixed'){offset=0}else{offset=elem.getBoundingClientRect().bottom}}else if(!isNumber(offset)){offset=0}
return offset}
function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else{$window.scrollTo(0,0)}}
function scroll(hash){hash=isString(hash)?hash:isNumber(hash)?hash.toString():$location.hash();var elm;if(!hash)scrollTo(null);else if((elm=document.getElementById(hash)))scrollTo(elm);else if((elm=getFirstAnchor(document.getElementsByName(hash))))scrollTo(elm);else if(hash==='top')scrollTo(null);}
if(autoScrollingEnabled){$rootScope.$watch(function autoScrollWatch(){return $location.hash()},function autoScrollWatchAction(newVal,oldVal){if(newVal===oldVal&&newVal==='')return;jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})})}
return scroll}]}
var $animateMinErr=minErr('$animate');var ELEMENT_NODE=1;var NG_ANIMATE_CLASSNAME='ng-animate';function mergeClasses(a,b){if(!a&&!b)return'';if(!a)return b;if(!b)return a;if(isArray(a))a=a.join(' ');if(isArray(b))b=b.join(' ');return a+' '+b}
function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE){return elm}}}
function splitClasses(classes){if(isString(classes)){classes=classes.split(' ')}
var obj=createMap();forEach(classes,function(klass){if(klass.length){obj[klass]=!0}});return obj}
function prepareAnimateOptions(options){return isObject(options)?options:{}}
var $$CoreAnimateJsProvider=function(){this.$get=noop};var $$CoreAnimateQueueProvider=function(){var postDigestQueue=new NgMap();var postDigestElements=[];this.$get=['$$AnimateRunner','$rootScope',function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){if(domOperation){domOperation()}
options=options||{};if(options.from){element.css(options.from)}
if(options.to){element.css(options.to)}
if(options.addClass||options.removeClass){addRemoveClassesPostDigest(element,options.addClass,options.removeClass)}
var runner=new $$AnimateRunner();runner.complete();return runner}};function updateData(data,classes,value){var changed=!1;if(classes){classes=isString(classes)?classes.split(' '):isArray(classes)?classes:[];forEach(classes,function(className){if(className){changed=!0;data[className]=value}})}
return changed}
function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr('class'));var toAdd='';var toRemove='';forEach(data,function(status,className){var hasClass=!!existing[className];if(status!==hasClass){if(status){toAdd+=(toAdd.length?' ':'')+className}else{toRemove+=(toRemove.length?' ':'')+className}}});forEach(element,function(elm){if(toAdd){jqLiteAddClass(elm,toAdd)}
if(toRemove){jqLiteRemoveClass(elm,toRemove)}});postDigestQueue.delete(element)}});postDigestElements.length=0}
function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{};var classesAdded=updateData(data,add,!0);var classesRemoved=updateData(data,remove,!1);if(classesAdded||classesRemoved){postDigestQueue.set(element,data);postDigestElements.push(element);if(postDigestElements.length===1){$rootScope.$$postDigest(handleCSSClassChanges)}}}}]};var $AnimateProvider=['$provide',function($provide){var provider=this;var classNameFilter=null;var customFilter=null;this.$$registeredAnimations=Object.create(null);this.register=function(name,factory){if(name&&name.charAt(0)!=='.'){throw $animateMinErr('notcsel','Expecting class selector starting with \'.\' got \'{0}\'.',name)}
var key=name+'-animation';provider.$$registeredAnimations[name.substr(1)]=key;$provide.factory(key,factory)};this.customFilter=function(filterFn){if(arguments.length===1){customFilter=isFunction(filterFn)?filterFn:null}
return customFilter};this.classNameFilter=function(expression){if(arguments.length===1){classNameFilter=(expression instanceof RegExp)?expression:null;if(classNameFilter){var reservedRegex=new RegExp('[(\\s|\\/)]'+NG_ANIMATE_CLASSNAME+'[(\\s|\\/)]');if(reservedRegex.test(classNameFilter.toString())){classNameFilter=null;throw $animateMinErr('nongcls','$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',NG_ANIMATE_CLASSNAME)}}}
return classNameFilter};this.$get=['$$animateQueue',function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);if(afterNode&&!afterNode.parentNode&&!afterNode.previousElementSibling){afterElement=null}}
if(afterElement){afterElement.after(element)}else{parentElement.prepend(element)}}
return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){if(runner.cancel){runner.cancel()}},enter:function(element,parent,after,options){parent=parent&&jqLite(parent);after=after&&jqLite(after);parent=parent||after.parent();domInsert(element,parent,after);return $$animateQueue.push(element,'enter',prepareAnimateOptions(options))},move:function(element,parent,after,options){parent=parent&&jqLite(parent);after=after&&jqLite(after);parent=parent||after.parent();domInsert(element,parent,after);return $$animateQueue.push(element,'move',prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,'leave',prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){options=prepareAnimateOptions(options);options.addClass=mergeClasses(options.addclass,className);return $$animateQueue.push(element,'addClass',options)},removeClass:function(element,className,options){options=prepareAnimateOptions(options);options.removeClass=mergeClasses(options.removeClass,className);return $$animateQueue.push(element,'removeClass',options)},setClass:function(element,add,remove,options){options=prepareAnimateOptions(options);options.addClass=mergeClasses(options.addClass,add);options.removeClass=mergeClasses(options.removeClass,remove);return $$animateQueue.push(element,'setClass',options)},animate:function(element,from,to,className,options){options=prepareAnimateOptions(options);options.from=options.from?extend(options.from,from):from;options.to=options.to?extend(options.to,to):to;className=className||'ng-inline-animate';options.tempClasses=mergeClasses(options.tempClasses,className);return $$animateQueue.push(element,'animate',options)}}}]}];var $$AnimateAsyncRunFactoryProvider=function(){this.$get=['$$rAF',function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn);if(waitQueue.length>1)return;$$rAF(function(){for(var i=0;i<waitQueue.length;i++){waitQueue[i]()}
waitQueue=[]})}
return function(){var passed=!1;waitForTick(function(){passed=!0});return function(callback){if(passed){callback()}else{waitForTick(callback)}}}}]};var $$AnimateRunnerFactoryProvider=function(){this.$get=['$q','$sniffer','$$animateAsyncRun','$$isDocumentHidden','$timeout',function($q,$sniffer,$$animateAsyncRun,$$isDocumentHidden,$timeout){var INITIAL_STATE=0;var DONE_PENDING_STATE=1;var DONE_COMPLETE_STATE=2;AnimateRunner.chain=function(chain,callback){var index=0;next();function next(){if(index===chain.length){callback(!0);return}
chain[index](function(response){if(response===!1){callback(!1);return}
index++;next()})}};AnimateRunner.all=function(runners,callback){var count=0;var status=!0;forEach(runners,function(runner){runner.done(onProgress)});function onProgress(response){status=status&&response;if(++count===runners.length){callback(status)}}};function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun();var timeoutTick=function(fn){$timeout(fn,0,!1)};this._doneCallbacks=[];this._tick=function(fn){if($$isDocumentHidden()){timeoutTick(fn)}else{rafTick(fn)}};this._state=0}
AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){if(this._state===DONE_COMPLETE_STATE){fn()}else{this._doneCallbacks.push(fn)}},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){if(status===!1){reject()}else{resolve()}})})}
return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},'catch':function(handler){return this.getPromise()['catch'](handler)},'finally':function(handler){return this.getPromise()['finally'](handler)},pause:function(){if(this.host.pause){this.host.pause()}},resume:function(){if(this.host.resume){this.host.resume()}},end:function(){if(this.host.end){this.host.end()}
this._resolve(!0)},cancel:function(){if(this.host.cancel){this.host.cancel()}
this._resolve(!1)},complete:function(response){var self=this;if(self._state===INITIAL_STATE){self._state=DONE_PENDING_STATE;self._tick(function(){self._resolve(response)})}},_resolve:function(response){if(this._state!==DONE_COMPLETE_STATE){forEach(this._doneCallbacks,function(fn){fn(response)});this._doneCallbacks.length=0;this._state=DONE_COMPLETE_STATE}}};return AnimateRunner}]};var $CoreAnimateCssProvider=function(){this.$get=['$$rAF','$q','$$AnimateRunner',function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};if(!options.$$prepared){options=copy(options)}
if(options.cleanupStyles){options.from=options.to=null}
if(options.from){element.css(options.from);options.from=null}
var closed,runner=new $$AnimateRunner();return{start:run,end:run};function run(){$$rAF(function(){applyAnimationContents();if(!closed){runner.complete()}
closed=!0});return runner}
function applyAnimationContents(){if(options.addClass){element.addClass(options.addClass);options.addClass=null}
if(options.removeClass){element.removeClass(options.removeClass);options.removeClass=null}
if(options.to){element.css(options.to);options.to=null}}}}]};function getHash(url){var index=url.indexOf('#');return index===-1?'':url.substr(index)}
function trimEmptyHash(url){return url.replace(/#$/,'')}
function Browser(window,document,$log,$sniffer,$$taskTrackerFactory){var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={},taskTracker=$$taskTrackerFactory($log);self.isMock=!1;self.$$completeOutstandingRequest=taskTracker.completeTask;self.$$incOutstandingRequestCount=taskTracker.incTaskCount;self.notifyWhenNoOutstandingRequests=taskTracker.notifyWhenNoPendingTasks;var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find('base'),pendingLocation=null,getCurrentState=!$sniffer.history?noop:function getCurrentState(){try{return history.state}catch(e){}};cacheState();self.url=function(url,replace,state){if(isUndefined(state)){state=null}
if(location!==window.location)location=window.location;if(history!==window.history)history=window.history;if(url){var sameState=lastHistoryState===state;url=urlResolve(url).href;if(lastBrowserUrl===url&&(!$sniffer.history||sameState)){return self}
var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);lastBrowserUrl=url;lastHistoryState=state;if($sniffer.history&&(!sameBase||!sameState)){history[replace?'replaceState':'pushState'](state,'',url);cacheState()}else{if(!sameBase){pendingLocation=url}
if(replace){location.replace(url)}else if(!sameBase){location.href=url}else{location.hash=getHash(url)}
if(location.href!==url){pendingLocation=url}}
if(pendingLocation){pendingLocation=url}
return self}else{return trimEmptyHash(pendingLocation||location.href)}};self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1;function cacheStateAndFireUrlChange(){pendingLocation=null;fireStateOrUrlChange()}
var lastCachedState=null;function cacheState(){cachedState=getCurrentState();cachedState=isUndefined(cachedState)?null:cachedState;if(equals(cachedState,lastCachedState)){cachedState=lastCachedState}
lastCachedState=cachedState;lastHistoryState=cachedState}
function fireStateOrUrlChange(){var prevLastHistoryState=lastHistoryState;cacheState();if(lastBrowserUrl===self.url()&&prevLastHistoryState===cachedState){return}
lastBrowserUrl=self.url();lastHistoryState=cachedState;forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)})}
self.onUrlChange=function(callback){if(!urlChangeInit){if($sniffer.history)jqLite(window).on('popstate',cacheStateAndFireUrlChange);jqLite(window).on('hashchange',cacheStateAndFireUrlChange);urlChangeInit=!0}
urlChangeListeners.push(callback);return callback};self.$$applicationDestroyed=function(){jqLite(window).off('hashchange popstate',cacheStateAndFireUrlChange)};self.$$checkUrlChange=fireStateOrUrlChange;self.baseHref=function(){var href=baseElement.attr('href');return href?href.replace(/^(https?:)?\/\/[^/]*/,''):''};self.defer=function(fn,delay,taskType){var timeoutId;delay=delay||0;taskType=taskType||taskTracker.DEFAULT_TASK_TYPE;taskTracker.incTaskCount(taskType);timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId];taskTracker.completeTask(fn,taskType)},delay);pendingDeferIds[timeoutId]=taskType;return timeoutId};self.defer.cancel=function(deferId){if(pendingDeferIds.hasOwnProperty(deferId)){var taskType=pendingDeferIds[deferId];delete pendingDeferIds[deferId];clearTimeout(deferId);taskTracker.completeTask(noop,taskType);return!0}
return!1}}
function $BrowserProvider(){this.$get=['$window','$log','$sniffer','$document','$$taskTrackerFactory',function($window,$log,$sniffer,$document,$$taskTrackerFactory){return new Browser($window,$document,$log,$sniffer,$$taskTrackerFactory)}]}
function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches){throw minErr('$cacheFactory')('iid','CacheId \'{0}\' is already taken!',cacheId)}
var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=(options&&options.capacity)||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return(caches[cacheId]={put:function(key,value){if(isUndefined(value))return;if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}
if(!(key in data))size++;data[key]=value;if(size>capacity){this.remove(staleEnd.key)}
return value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}
return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;if(lruEntry===freshEnd)freshEnd=lruEntry.p;if(lruEntry===staleEnd)staleEnd=lruEntry.n;link(lruEntry.n,lruEntry.p);delete lruHash[key]}
if(!(key in data))return;delete data[key];size--},removeAll:function(){data=createMap();size=0;lruHash=createMap();freshEnd=staleEnd=null},destroy:function(){data=null;stats=null;lruHash=null;delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}});function refresh(entry){if(entry!==freshEnd){if(!staleEnd){staleEnd=entry}else if(staleEnd===entry){staleEnd=entry.n}
link(entry.n,entry.p);link(entry,freshEnd);freshEnd=entry;freshEnd.n=null}}
function link(nextEntry,prevEntry){if(nextEntry!==prevEntry){if(nextEntry)nextEntry.p=prevEntry;if(prevEntry)prevEntry.n=nextEntry}}}
cacheFactory.info=function(){var info={};forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()});return info};cacheFactory.get=function(cacheId){return caches[cacheId]};return cacheFactory}}
function $TemplateCacheProvider(){this.$get=['$cacheFactory',function($cacheFactory){return $cacheFactory('templates')}]}
var $compileMinErr=minErr('$compile');function UNINITIALIZED_VALUE(){}
var _UNINITIALIZED_VALUE=new UNINITIALIZED_VALUE();$CompileProvider.$inject=['$provide','$$sanitizeUriProvider'];function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix='Directive',COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap('ngSrc,ngSrcset,src,srcset'),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;var bindingCache=createMap();function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/;var bindings=createMap();forEach(scope,function(definition,scopeName){definition=definition.trim();if(definition in bindingCache){bindings[scopeName]=bindingCache[definition];return}
var match=definition.match(LOCAL_REGEXP);if(!match){throw $compileMinErr('iscp','Invalid {3} for directive \'{0}\'.'+' Definition: {... {1}: \'{2}\' ...}',directiveName,scopeName,definition,(isController?'controller bindings definition':'isolate scope definition'))}
bindings[scopeName]={mode:match[1][0],collection:match[2]==='*',optional:match[3]==='?',attrName:match[4]||scopeName};if(match[4]){bindingCache[definition]=bindings[scopeName]}});return bindings}
function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)){if(directive.bindToController===!0){bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0);bindings.isolateScope={}}else{bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)}}
if(isObject(directive.bindToController)){bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)}
if(bindings.bindToController&&!directive.controller){throw $compileMinErr('noctrl','Cannot bind to controller without directive \'{0}\'s controller.',directiveName)}
return bindings}
function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter)){throw $compileMinErr('baddir','Directive/Component name \'{0}\' is invalid. The first character must be a lowercase letter',name)}
if(name!==name.trim()){throw $compileMinErr('baddir','Directive/Component name \'{0}\' is invalid. The name should not contain leading or trailing whitespaces',name)}}
function getDirectiveRequire(directive){var require=directive.require||(directive.controller&&directive.name);if(!isArray(require)&&isObject(require)){forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP);var name=value.substring(match[0].length);if(!name)require[key]=match[0]+key})}
return require}
function getDirectiveRestrict(restrict,name){if(restrict&&!(isString(restrict)&&/[EACM]/.test(restrict))){throw $compileMinErr('badrestrict','Restrict property \'{0}\' of directive \'{1}\' is invalid',restrict,name)}
return restrict||'EA'}
this.directive=function registerDirective(name,directiveFactory){assertArg(name,'name');assertNotHasOwnProperty(name,'directive');if(isString(name)){assertValidDirectiveName(name);assertArg(directiveFactory,'directiveFactory');if(!hasDirectives.hasOwnProperty(name)){hasDirectives[name]=[];$provide.factory(name+Suffix,['$injector','$exceptionHandler',function($injector,$exceptionHandler){var directives=[];forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);if(isFunction(directive)){directive={compile:valueFn(directive)}}else if(!directive.compile&&directive.link){directive.compile=valueFn(directive.link)}
directive.priority=directive.priority||0;directive.index=index;directive.name=directive.name||name;directive.require=getDirectiveRequire(directive);directive.restrict=getDirectiveRestrict(directive.restrict,name);directive.$$moduleName=directiveFactory.$$moduleName;directives.push(directive)}catch(e){$exceptionHandler(e)}});return directives}])}
hasDirectives[name].push(directiveFactory)}else{forEach(name,reverseParams(registerDirective))}
return this};this.component=function registerComponent(name,options){if(!isString(name)){forEach(name,reverseParams(bind(this,registerComponent)));return this}
var controller=options.controller||function(){};function factory($injector){function makeInjectable(fn){if(isFunction(fn)||isArray(fn)){return function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}}else{return fn}}
var template=(!options.template&&!options.templateUrl?'':options.template);var ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||'$ctrl',template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:'E',require:options.require};forEach(options,function(val,key){if(key.charAt(0)==='$')ddo[key]=val});return ddo}
forEach(options,function(val,key){if(key.charAt(0)==='$'){factory[key]=val;if(isFunction(controller))controller[key]=val}});factory.$inject=['$injector'];return this.directive(name,factory)};this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp);return this}else{return $$sanitizeUriProvider.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp);return this}else{return $$sanitizeUriProvider.imgSrcSanitizationWhitelist()}};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){if(isDefined(enabled)){debugInfoEnabled=enabled;return this}
return debugInfoEnabled};var strictComponentBindingsEnabled=!1;this.strictComponentBindingsEnabled=function(enabled){if(isDefined(enabled)){strictComponentBindingsEnabled=enabled;return this}
return strictComponentBindingsEnabled};var TTL=10;this.onChangesTtl=function(value){if(arguments.length){TTL=value;return this}
return TTL};var commentDirectivesEnabledConfig=!0;this.commentDirectivesEnabled=function(value){if(arguments.length){commentDirectivesEnabledConfig=value;return this}
return commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=!0;this.cssClassDirectivesEnabled=function(value){if(arguments.length){cssClassDirectivesEnabledConfig=value;return this}
return cssClassDirectivesEnabledConfig};var PROP_CONTEXTS=createMap();this.addPropertySecurityContext=function(elementName,propertyName,ctx){var key=(elementName.toLowerCase()+'|'+propertyName.toLowerCase());if(key in PROP_CONTEXTS&&PROP_CONTEXTS[key]!==ctx){throw $compileMinErr('ctxoverride','Property context \'{0}.{1}\' already set to \'{2}\', cannot override to \'{3}\'.',elementName,propertyName,PROP_CONTEXTS[key],ctx)}
PROP_CONTEXTS[key]=ctx;return this};(function registerNativePropertyContexts(){function registerContext(ctx,values){forEach(values,function(v){PROP_CONTEXTS[v.toLowerCase()]=ctx})}
registerContext(SCE_CONTEXTS.HTML,['iframe|srcdoc','*|innerHTML','*|outerHTML']);registerContext(SCE_CONTEXTS.CSS,['*|style']);registerContext(SCE_CONTEXTS.URL,['area|href','area|ping','a|href','a|ping','blockquote|cite','body|background','del|cite','input|src','ins|cite','q|cite']);registerContext(SCE_CONTEXTS.MEDIA_URL,['audio|src','img|src','img|srcset','source|src','source|srcset','track|src','video|src','video|poster']);registerContext(SCE_CONTEXTS.RESOURCE_URL,['*|formAction','applet|code','applet|codebase','base|href','embed|src','frame|src','form|action','head|profile','html|manifest','iframe|src','link|href','media|src','object|codebase','object|data','script|src'])})();this.$get=['$injector','$interpolate','$exceptionHandler','$templateRequest','$parse','$controller','$rootScope','$sce','$animate',function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate){var SIMPLE_ATTR_NAME=/^\w/;var specialAttrHolder=window.document.createElement('div');var commentDirectivesEnabled=commentDirectivesEnabledConfig;var cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig;var onChangesTtl=TTL;var onChangesQueue;function flushOnChangesQueue(){try{if(!(--onChangesTtl)){onChangesQueue=undefined;throw $compileMinErr('infchng','{0} $onChanges() iterations reached. Aborting!\n',TTL)}
$rootScope.$apply(function(){for(var i=0,ii=onChangesQueue.length;i<ii;++i){try{onChangesQueue[i]()}catch(e){$exceptionHandler(e)}}
onChangesQueue=undefined})}finally{onChangesTtl++}}
function sanitizeSrcset(value,invokeType){if(!value){return value}
if(!isString(value)){throw $compileMinErr('srcset','Can\'t pass trusted values to `{0}`: "{1}"',invokeType,value.toString())}
var result='';var trimmedSrcset=trim(value);var srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/;var rawUris=trimmedSrcset.split(pattern);var nbrUrisWith2parts=Math.floor(rawUris.length/2);for(var i=0;i<nbrUrisWith2parts;i++){var innerIdx=i*2;result+=$sce.getTrustedMediaUrl(trim(rawUris[innerIdx]));result+=' '+trim(rawUris[innerIdx+1])}
var lastTuple=trim(rawUris[i*2]).split(/\s/);result+=$sce.getTrustedMediaUrl(trim(lastTuple[0]));if(lastTuple.length===2){result+=(' '+trim(lastTuple[1]))}
return result}
function Attributes(element,attributesToCopy){if(attributesToCopy){var keys=Object.keys(attributesToCopy);var i,l,key;for(i=0,l=keys.length;i<l;i++){key=keys[i];this[key]=attributesToCopy[key]}}else{this.$attr={}}
this.$$element=element}
Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){if(classVal&&classVal.length>0){$animate.addClass(this.$$element,classVal)}},$removeClass:function(classVal){if(classVal&&classVal.length>0){$animate.removeClass(this.$$element,classVal)}},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);if(toAdd&&toAdd.length){$animate.addClass(this.$$element,toAdd)}
var toRemove=tokenDifference(oldClasses,newClasses);if(toRemove&&toRemove.length){$animate.removeClass(this.$$element,toRemove)}},$set:function(key,value,writeAttr,attrName){var node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(key),observer=key,nodeName;if(booleanKey){this.$$element.prop(key,value);attrName=booleanKey}else if(aliasedKey){this[aliasedKey]=value;observer=aliasedKey}
this[key]=value;if(attrName){this.$attr[key]=attrName}else{attrName=this.$attr[key];if(!attrName){this.$attr[key]=attrName=snake_case(key,'-')}}
nodeName=nodeName_(this.$$element);if(nodeName==='img'&&key==='srcset'){this[key]=value=sanitizeSrcset(value,'$set(\'srcset\', value)')}
if(writeAttr!==!1){if(value===null||isUndefined(value)){this.$$element.removeAttr(attrName)}else{if(SIMPLE_ATTR_NAME.test(attrName)){if(booleanKey&&value===!1){this.$$element.removeAttr(attrName)}else{this.$$element.attr(attrName,value)}}else{setSpecialAttr(this.$$element[0],attrName,value)}}}
var $$observers=this.$$observers;if($$observers){forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})}},$observe:function(key,fn){var attrs=this,$$observers=(attrs.$$observers||(attrs.$$observers=createMap())),listeners=($$observers[key]||($$observers[key]=[]));listeners.push(fn);$rootScope.$evalAsync(function(){if(!listeners.$$inter&&attrs.hasOwnProperty(key)&&!isUndefined(attrs[key])){fn(attrs[key])}});return function(){arrayRemove(listeners,fn)}}};function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML='<span '+attrName+'>';var attributes=specialAttrHolder.firstChild.attributes;var attribute=attributes[0];attributes.removeNamedItem(attribute.name);attribute.value=value;element.attributes.setNamedItem(attribute)}
function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}
var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate=(startSymbol==='{{'&&endSymbol==='}}')?identity:function denormalizeTemplate(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_PREFIX_BINDING=/^ng(Attr|Prop|On)([A-Z].*)$/;var MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;compile.$$addBindingInfo=debugInfoEnabled?function $$addBindingInfo($element,binding){var bindings=$element.data('$binding')||[];if(isArray(binding)){bindings=bindings.concat(binding)}else{bindings.push(binding)}
$element.data('$binding',bindings)}:noop;compile.$$addBindingClass=debugInfoEnabled?function $$addBindingClass($element){safeAddClass($element,'ng-binding')}:noop;compile.$$addScopeInfo=debugInfoEnabled?function $$addScopeInfo($element,scope,isolated,noTemplate){var dataName=isolated?(noTemplate?'$isolateScopeNoTemplate':'$isolateScope'):'$scope';$element.data(dataName,scope)}:noop;compile.$$addScopeClass=debugInfoEnabled?function $$addScopeClass($element,isolated){safeAddClass($element,isolated?'ng-isolate-scope':'ng-scope')}:noop;compile.$$createComment=function(directiveName,comment){var content='';if(debugInfoEnabled){content=' '+(directiveName||'')+': ';if(comment)content+=comment+' '}
return window.document.createComment(content)};return compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){if(!($compileNodes instanceof jqLite)){$compileNodes=jqLite($compileNodes)}
var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function publicLinkFn(scope,cloneConnectFn,options){if(!$compileNodes){throw $compileMinErr('multilink','This element has already been linked.')}
assertArg(scope,'scope');if(previousCompileContext&&previousCompileContext.needsNewScope){scope=scope.$parent.$new()}
options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude){parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude}
if(!namespace){namespace=detectNamespaceForChildElements(futureParentElement)}
var $linkNode;if(namespace!=='html'){$linkNode=jqLite(wrapTemplate(namespace,jqLite('<div></div>').append($compileNodes).html()))}else if(cloneConnectFn){$linkNode=JQLitePrototype.clone.call($compileNodes)}else{$linkNode=$compileNodes}
if(transcludeControllers){for(var controllerName in transcludeControllers){$linkNode.data('$'+controllerName+'Controller',transcludeControllers[controllerName].instance)}}
compile.$$addScopeInfo($linkNode,scope);if(cloneConnectFn)cloneConnectFn($linkNode,scope);if(compositeLinkFn)compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn);if(!cloneConnectFn){$compileNodes=compositeLinkFn=null}
return $linkNode}}
function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];if(!node){return'html'}else{return nodeName_(node)!=='foreignobject'&&toString.call(node).match(/SVG/)?'svg':'html'}}
function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){var linkFns=[],notLiveList=isArray(nodeList)||(nodeList instanceof jqLite),attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound;for(var i=0;i<nodeList.length;i++){attrs=new Attributes();if(msie===11){mergeConsecutiveTextNodes(nodeList,i,notLiveList)}
directives=collectDirectives(nodeList[i],[],attrs,i===0?maxPriority:undefined,ignoreDirective);nodeLinkFn=(directives.length)?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null;if(nodeLinkFn&&nodeLinkFn.scope){compile.$$addScopeClass(attrs.$$element)}
childLinkFn=(nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length)?null:compileNodes(childNodes,nodeLinkFn?((nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude):transcludeFn);if(nodeLinkFn||childLinkFn){linkFns.push(i,nodeLinkFn,childLinkFn);linkFnFound=!0;nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn}
previousCompileContext=null}
return linkFnFound?compositeLinkFn:null;function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn;var stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;stableNodeList=new Array(nodeListLength);for(i=0;i<linkFns.length;i+=3){idx=linkFns[i];stableNodeList[idx]=nodeList[idx]}}else{stableNodeList=nodeList}
for(i=0,ii=linkFns.length;i<ii;){node=stableNodeList[linkFns[i++]];nodeLinkFn=linkFns[i++];childLinkFn=linkFns[i++];if(nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new();compile.$$addScopeInfo(jqLite(node),childScope)}else{childScope=scope}
if(nodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn)}else if(!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn){childBoundTranscludeFn=parentBoundTranscludeFn}else if(!parentBoundTranscludeFn&&transcludeFn){childBoundTranscludeFn=createBoundTranscludeFn(scope,transcludeFn)}else{childBoundTranscludeFn=null}
nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)}else if(childLinkFn){childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}}}}
function mergeConsecutiveTextNodes(nodeList,idx,notLiveList){var node=nodeList[idx];var parent=node.parentNode;var sibling;if(node.nodeType!==NODE_TYPE_TEXT){return}
while(!0){sibling=parent?node.nextSibling:nodeList[idx+1];if(!sibling||sibling.nodeType!==NODE_TYPE_TEXT){break}
node.nodeValue=node.nodeValue+sibling.nodeValue;if(sibling.parentNode){sibling.parentNode.removeChild(sibling)}
if(notLiveList&&sibling===nodeList[idx+1]){nodeList.splice(idx+1,1)}}}
function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){if(!transcludedScope){transcludedScope=scope.$new(!1,containingScope);transcludedScope.$$transcluded=!0}
return transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}
var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots){if(transcludeFn.$$slots[slotName]){boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn)}else{boundSlots[slotName]=null}}
return boundTranscludeFn}
function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var nodeType=node.nodeType,attrsMap=attrs.$attr,match,nodeName,className;switch(nodeType){case NODE_TYPE_ELEMENT:nodeName=nodeName_(node);addDirective(directives,directiveNormalize(nodeName),'E',maxPriority,ignoreDirective);for(var attr,name,nName,value,ngPrefixMatch,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1;var attrEndName=!1;var isNgAttr=!1,isNgProp=!1,isNgEvent=!1;var multiElementMatch;attr=nAttrs[j];name=attr.name;value=attr.value;nName=directiveNormalize(name.toLowerCase());if((ngPrefixMatch=nName.match(NG_PREFIX_BINDING))){isNgAttr=ngPrefixMatch[1]==='Attr';isNgProp=ngPrefixMatch[1]==='Prop';isNgEvent=ngPrefixMatch[1]==='On';name=name.replace(PREFIX_REGEXP,'').toLowerCase().substr(4+ngPrefixMatch[1].length).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()})}else if((multiElementMatch=nName.match(MULTI_ELEMENT_DIR_RE))&&directiveIsMultiElement(multiElementMatch[1])){attrStartName=name;attrEndName=name.substr(0,name.length-5)+'end';name=name.substr(0,name.length-6)}
if(isNgProp||isNgEvent){attrs[nName]=value;attrsMap[nName]=attr.name;if(isNgProp){addPropertyDirective(node,directives,nName,name)}else{addEventDirective(directives,nName,name)}}else{nName=directiveNormalize(name.toLowerCase());attrsMap[nName]=name;if(isNgAttr||!attrs.hasOwnProperty(nName)){attrs[nName]=value;if(getBooleanAttrName(node,nName)){attrs[nName]=!0}}
addAttrInterpolateDirective(node,directives,value,nName,isNgAttr);addDirective(directives,nName,'A',maxPriority,ignoreDirective,attrStartName,attrEndName)}}
if(nodeName==='input'&&node.getAttribute('type')==='hidden'){node.setAttribute('autocomplete','off')}
if(!cssClassDirectivesEnabled)break;className=node.className;if(isObject(className)){className=className.animVal}
if(isString(className)&&className!==''){while((match=CLASS_DIRECTIVE_REGEXP.exec(className))){nName=directiveNormalize(match[2]);if(addDirective(directives,nName,'C',maxPriority,ignoreDirective)){attrs[nName]=trim(match[3])}
className=className.substr(match.index+match[0].length)}}
break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:if(!commentDirectivesEnabled)break;collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective);break}
directives.sort(byPriority);return directives}
function collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);if(addDirective(directives,nName,'M',maxPriority,ignoreDirective)){attrs[nName]=trim(match[2])}}}catch(e){}}
function groupScan(node,attrStart,attrEnd){var nodes=[];var depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node){throw $compileMinErr('uterdir','Unterminated attribute, found \'{0}\' but no matching \'{1}\' found.',attrStart,attrEnd)}
if(node.nodeType===NODE_TYPE_ELEMENT){if(node.hasAttribute(attrStart))depth++;if(node.hasAttribute(attrEnd))depth--}
nodes.push(node);node=node.nextSibling}while(depth>0);}else{nodes.push(node)}
return jqLite(nodes)}
function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function groupedElementsLink(scope,element,attrs,controllers,transcludeFn){element=groupScan(element[0],attrStart,attrEnd);return linkFn(scope,element,attrs,controllers,transcludeFn)}}
function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;if(eager){return compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext)}
return function lazyCompilation(){if(!compiled){compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext);$compileNodes=transcludeFn=previousCompileContext=null}
return compiled.apply(this,arguments)}}
function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};var terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),directive,directiveName,$template,replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,linkFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,directiveValue;for(var i=0,ii=directives.length;i<ii;i++){directive=directives[i];var attrStart=directive.$$start;var attrEnd=directive.$$end;if(attrStart){$compileNode=groupScan(compileNode,attrStart,attrEnd)}
$template=undefined;if(terminalPriority>directive.priority){break}
directiveValue=directive.scope;if(directiveValue){if(!directive.templateUrl){if(isObject(directiveValue)){assertNoDuplicate('new/isolated scope',newIsolateScopeDirective||newScopeDirective,directive,$compileNode);newIsolateScopeDirective=directive}else{assertNoDuplicate('new/isolated scope',newIsolateScopeDirective,directive,$compileNode)}}
newScopeDirective=newScopeDirective||directive}
directiveName=directive.name;if(!didScanForMultipleTransclusion&&((directive.replace&&(directive.templateUrl||directive.template))||(directive.transclude&&!directive.$$tlb))){var candidateDirective;for(var scanningIndex=i+1;(candidateDirective=directives[scanningIndex++]);){if((candidateDirective.transclude&&!candidateDirective.$$tlb)||(candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template))){mightHaveMultipleTransclusionError=!0;break}}
didScanForMultipleTransclusion=!0}
if(!directive.templateUrl&&directive.controller){controllerDirectives=controllerDirectives||createMap();assertNoDuplicate('\''+directiveName+'\' controller',controllerDirectives[directiveName],directive,$compileNode);controllerDirectives[directiveName]=directive}
directiveValue=directive.transclude;if(directiveValue){hasTranscludeDirective=!0;if(!directive.$$tlb){assertNoDuplicate('transclusion',nonTlbTranscludeDirective,directive,$compileNode);nonTlbTranscludeDirective=directive}
if(directiveValue==='element'){hasElementTranscludeDirective=!0;terminalPriority=directive.priority;$template=$compileNode;$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName]));compileNode=$compileNode[0];replaceWith(jqCollection,sliceArgs($template),compileNode);childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})}else{var slots=createMap();if(!isObject(directiveValue)){$template=jqLite(jqLiteClone(compileNode)).contents()}else{$template=window.document.createDocumentFragment();var slotMap=createMap();var filledSlots=createMap();forEach(directiveValue,function(elementSelector,slotName){var optional=(elementSelector.charAt(0)==='?');elementSelector=optional?elementSelector.substring(1):elementSelector;slotMap[elementSelector]=slotName;slots[slotName]=null;filledSlots[slotName]=optional});forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];if(slotName){filledSlots[slotName]=!0;slots[slotName]=slots[slotName]||window.document.createDocumentFragment();slots[slotName].appendChild(node)}else{$template.appendChild(node)}});forEach(filledSlots,function(filled,slotName){if(!filled){throw $compileMinErr('reqslot','Required transclusion slot `{0}` was not filled.',slotName)}});for(var slotName in slots){if(slots[slotName]){var slotCompileNodes=jqLite(slots[slotName].childNodes);slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slotCompileNodes,transcludeFn)}}
$template=jqLite($template.childNodes)}
$compileNode.empty();childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,undefined,undefined,{needsNewScope:directive.$$isolateScope||directive.$$newScope});childTranscludeFn.$$slots=slots}}
if(directive.template){hasTemplate=!0;assertNoDuplicate('template',templateDirective,directive,$compileNode);templateDirective=directive;directiveValue=(isFunction(directive.template))?directive.template($compileNode,templateAttrs):directive.template;directiveValue=denormalizeTemplate(directiveValue);if(directive.replace){replaceDirective=directive;if(jqLiteIsTextNode(directiveValue)){$template=[]}else{$template=removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue)))}
compileNode=$template[0];if($template.length!==1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr('tplrt','Template for directive \'{0}\' must have exactly one root element. {1}',directiveName,'')}
replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}};var templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs);var unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));if(newIsolateScopeDirective||newScopeDirective){markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective)}
directives=directives.concat(templateDirectives).concat(unprocessedDirectives);mergeTemplateAttributes(templateAttrs,newTemplateAttrs);ii=directives.length}else{$compileNode.html(directiveValue)}}
if(directive.templateUrl){hasTemplate=!0;assertNoDuplicate('template',templateDirective,directive,$compileNode);templateDirective=directive;if(directive.replace){replaceDirective=directive}
nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:(newScopeDirective!==directive)&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective});ii=directives.length}else if(directive.compile){try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;if(isFunction(linkFn)){addLinkFns(null,bind(context,linkFn),attrStart,attrEnd)}else if(linkFn){addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}}catch(e){$exceptionHandler(e,startingTag($compileNode))}}
if(directive.terminal){nodeLinkFn.terminal=!0;terminalPriority=Math.max(terminalPriority,directive.priority)}}
nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0;nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective;nodeLinkFn.templateOnThisElement=hasTemplate;nodeLinkFn.transclude=childTranscludeFn;previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective;return nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){if(pre){if(attrStart)pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd);pre.require=directive.require;pre.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){pre=cloneAndAnnotateFn(pre,{isolateScope:!0})}
preLinkFns.push(pre)}
if(post){if(attrStart)post=groupElementsLinkFnWrapper(post,attrStart,attrEnd);post.require=directive.require;post.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){post=cloneAndAnnotateFn(post,{isolateScope:!0})}
postLinkFns.push(post)}}
function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;if(compileNode===linkNode){attrs=templateAttrs;$element=templateAttrs.$$element}else{$element=jqLite(linkNode);attrs=new Attributes($element,templateAttrs)}
controllerScope=scope;if(newIsolateScopeDirective){isolateScope=scope.$new(!0)}else if(newScopeDirective){controllerScope=scope.$parent}
if(boundTranscludeFn){transcludeFn=controllersBoundTransclude;transcludeFn.$$boundTransclude=boundTranscludeFn;transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}}
if(controllerDirectives){elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)}
if(newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective)));compile.$$addScopeClass($element,!0);isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings;scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective);if(scopeBindingInfo.removeWatches){isolateScope.$on('$destroy',scopeBindingInfo.removeWatches)}}
for(var name in elementControllers){var controllerDirective=controllerDirectives[name];var controller=elementControllers[name];var bindings=controllerDirective.$$bindings.bindToController;controller.instance=controller();$element.data('$'+controllerDirective.name+'Controller',controller.instance);controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}
forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;if(controllerDirective.bindToController&&!isArray(require)&&isObject(require)){extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}});forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges)){try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}}
if(isFunction(controllerInstance.$onInit)){try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}}
if(isFunction(controllerInstance.$doCheck)){controllerScope.$watch(function(){controllerInstance.$doCheck()});controllerInstance.$doCheck()}
if(isFunction(controllerInstance.$onDestroy)){controllerScope.$on('$destroy',function callOnDestroyHook(){controllerInstance.$onDestroy()})}});for(i=0,ii=preLinkFns.length;i<ii;i++){linkFn=preLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}
var scopeToChild=scope;if(newIsolateScopeDirective&&(newIsolateScopeDirective.template||newIsolateScopeDirective.templateUrl===null)){scopeToChild=isolateScope}
if(childLinkFn){childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn)}
for(i=postLinkFns.length-1;i>=0;i--){linkFn=postLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}
forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$postLink)){controllerInstance.$postLink()}});function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(!isScope(scope)){slotName=futureParentElement;futureParentElement=cloneAttachFn;cloneAttachFn=scope;scope=undefined}
if(hasElementTranscludeDirective){transcludeControllers=elementControllers}
if(!futureParentElement){futureParentElement=hasElementTranscludeDirective?$element.parent():$element}
if(slotName){var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn){return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}else if(isUndefined(slotTranscludeFn)){throw $compileMinErr('noslot','No parent directive that requires a transclusion with slot name "{0}". '+'Element: {1}',slotName,startingTag($element))}}else{return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}}}}
function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP);var name=require.substring(match[0].length);var inheritType=match[1]||match[3];var optional=match[2]==='?';if(inheritType==='^^'){$element=$element.parent()}else{value=elementControllers&&elementControllers[name];value=value&&value.instance}
if(!value){var dataName='$'+name+'Controller';if(inheritType==='^^'&&$element[0]&&$element[0].nodeType===NODE_TYPE_DOCUMENT){value=null}else{value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}}
if(!value&&!optional){throw $compileMinErr('ctreq','Controller \'{0}\', required by directive \'{1}\', can\'t be found!',name,directiveName)}}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++){value[i]=getControllers(directiveName,require[i],$element,elementControllers)}}else if(isObject(require)){value={};forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)})}
return value||null}
function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey];var locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};var controller=directive.controller;if(controller==='@'){controller=attrs[directive.name]}
var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance;$element.data('$'+directive.name+'Controller',controllerInstance.instance)}
return elementControllers}
function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++){directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}}
function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){directive=directives[i];if((isUndefined(maxPriority)||maxPriority>directive.priority)&&directive.restrict.indexOf(location)!==-1){if(startAttrName){directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})}
if(!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);if(isObject(bindings.isolateScope)){directive.$$isolateBindings=bindings.isolateScope}}
tDirectives.push(directive);match=directive}}}
return match}
function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){directive=directives[i];if(directive.multiElement){return!0}}}
return!1}
function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,function(value,key){if(key.charAt(0)!=='$'){if(src[key]&&src[key]!==value){if(value.length){value+=(key==='style'?';':' ')+src[key]}else{value=src[key]}}
dst.$set(key,value,!0,srcAttr[key])}});forEach(src,function(value,key){if(!dst.hasOwnProperty(key)&&key.charAt(0)!=='$'){dst[key]=value;if(key!=='class'&&key!=='style'){dstAttr[key]=srcAttr[key]}}})}
function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var linkQueue=[],afterTemplateNodeLinkFn,afterTemplateChildLinkFn,beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=(isFunction(origAsyncDirective.templateUrl))?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;$compileNode.empty();$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;content=denormalizeTemplate(content);if(origAsyncDirective.replace){if(jqLiteIsTextNode(content)){$template=[]}else{$template=removeComments(wrapTemplate(templateNamespace,trim(content)))}
compileNode=$template[0];if($template.length!==1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr('tplrt','Template for directive \'{0}\' must have exactly one root element. {1}',origAsyncDirective.name,templateUrl)}
tempTemplateAttrs={$attr:{}};replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);if(isObject(origAsyncDirective.scope)){markDirectiveScope(templateDirectives,!0)}
directives=templateDirectives.concat(directives);mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else{compileNode=beforeTemplateCompileNode;$compileNode.html(content)}
directives.unshift(derivedSyncDirective);afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext);forEach($rootElement,function(node,i){if(node===compileNode){$rootElement[i]=$compileNode[0]}});afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);while(linkQueue.length){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(scope.$$destroyed)continue;if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;if(!(previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace)){linkNode=jqLiteClone(compileNode)}
replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode);safeAddClass(jqLite(linkNode),oldClasses)}
if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)}else{childBoundTranscludeFn=boundTranscludeFn}
afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}
linkQueue=null}).catch(function(error){if(isError(error)){$exceptionHandler(error)}});return function delayedNodeLinkFn(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;if(scope.$$destroyed)return;if(linkQueue){linkQueue.push(scope,node,rootElement,childBoundTranscludeFn)}else{if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)}
afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)}}}
function byPriority(a,b){var diff=b.priority-a.priority;if(diff!==0)return diff;if(a.name!==b.name)return(a.name<b.name)?-1:1;return a.index-b.index}
function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?(' (module: '+moduleName+')'):''}
if(previousDirective){throw $compileMinErr('multidir','Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}',previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}}
function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);if(interpolateFn){directives.push({priority:0,compile:function textInterpolateCompileFn(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;if(hasCompileParent)compile.$$addBindingClass(templateNodeParent);return function textInterpolateLinkFn(scope,node){var parent=node.parent();if(!hasCompileParent)compile.$$addBindingClass(parent);compile.$$addBindingInfo(parent,interpolateFn.expressions);scope.$watch(interpolateFn,function interpolateFnWatchAction(value){node[0].nodeValue=value})}}})}}
function wrapTemplate(type,template){type=lowercase(type||'html');switch(type){case 'svg':case 'math':var wrapper=window.document.createElement('div');wrapper.innerHTML='<'+type+'>'+template+'</'+type+'>';return wrapper.childNodes[0].childNodes;default:return template}}
function getTrustedAttrContext(nodeName,attrNormalizedName){if(attrNormalizedName==='srcdoc'){return $sce.HTML}
if(attrNormalizedName==='src'||attrNormalizedName==='ngSrc'){if(['img','video','audio','source','track'].indexOf(nodeName)===-1){return $sce.RESOURCE_URL}
return $sce.MEDIA_URL}else if(attrNormalizedName==='xlinkHref'){if(nodeName==='image')return $sce.MEDIA_URL;if(nodeName==='a')return $sce.URL;return $sce.RESOURCE_URL}else if((nodeName==='form'&&attrNormalizedName==='action')||(nodeName==='base'&&attrNormalizedName==='href')||(nodeName==='link'&&attrNormalizedName==='href')){return $sce.RESOURCE_URL}else if(nodeName==='a'&&(attrNormalizedName==='href'||attrNormalizedName==='ngHref')){return $sce.URL}}
function getTrustedPropContext(nodeName,propNormalizedName){var prop=propNormalizedName.toLowerCase();return PROP_CONTEXTS[nodeName+'|'+prop]||PROP_CONTEXTS['*|'+prop]}
function sanitizeSrcsetPropertyValue(value){return sanitizeSrcset($sce.valueOf(value),'ng-prop-srcset')}
function addPropertyDirective(node,directives,attrName,propName){if(EVENT_HANDLER_ATTR_REGEXP.test(propName)){throw $compileMinErr('nodomevents','Property bindings for HTML DOM event properties are disallowed')}
var nodeName=nodeName_(node);var trustedContext=getTrustedPropContext(nodeName,propName);var sanitizer=identity;if(propName==='srcset'&&(nodeName==='img'||nodeName==='source')){sanitizer=sanitizeSrcsetPropertyValue}else if(trustedContext){sanitizer=$sce.getTrusted.bind($sce,trustedContext)}
directives.push({priority:100,compile:function ngPropCompileFn(_,attr){var ngPropGetter=$parse(attr[attrName]);var ngPropWatch=$parse(attr[attrName],function sceValueOf(val){return $sce.valueOf(val)});return{pre:function ngPropPreLinkFn(scope,$element){function applyPropValue(){var propValue=ngPropGetter(scope);$element[0][propName]=sanitizer(propValue)}
applyPropValue();scope.$watch(ngPropWatch,applyPropValue)}}}})}
function addEventDirective(directives,attrName,eventName){directives.push(createEventDirective($parse,$rootScope,$exceptionHandler,attrName,eventName,!1))}
function addAttrInterpolateDirective(node,directives,value,name,isNgAttr){var nodeName=nodeName_(node);var trustedContext=getTrustedAttrContext(nodeName,name);var mustHaveExpression=!isNgAttr;var allOrNothing=ALL_OR_NOTHING_ATTRS[name]||isNgAttr;var interpolateFn=$interpolate(value,mustHaveExpression,trustedContext,allOrNothing);if(!interpolateFn)return;if(name==='multiple'&&nodeName==='select'){throw $compileMinErr('selmulti','Binding to the \'multiple\' attribute is not supported. Element: {0}',startingTag(node))}
if(EVENT_HANDLER_ATTR_REGEXP.test(name)){throw $compileMinErr('nodomevents','Interpolations for HTML DOM event attributes are disallowed')}
directives.push({priority:100,compile:function(){return{pre:function attrInterpolatePreLinkFn(scope,element,attr){var $$observers=(attr.$$observers||(attr.$$observers=createMap()));var newValue=attr[name];if(newValue!==value){interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing);value=newValue}
if(!interpolateFn)return;attr[name]=interpolateFn(scope);($$observers[name]||($$observers[name]=[])).$$inter=!0;(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function interpolateFnWatchAction(newValue,oldValue){if(name==='class'&&newValue!==oldValue){attr.$updateClass(newValue,oldValue)}else{attr.$set(name,newValue)}})}}}})}
function replaceWith($rootElement,elementsToRemove,newNode){var firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode,i,ii;if($rootElement){for(i=0,ii=$rootElement.length;i<ii;i++){if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++){if(j2<jj){$rootElement[j]=$rootElement[j2]}else{delete $rootElement[j]}}
$rootElement.length-=removeCount-1;if($rootElement.context===firstElementToRemove){$rootElement.context=newNode}
break}}}
if(parent){parent.replaceChild(newNode,firstElementToRemove)}
var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++){fragment.appendChild(elementsToRemove[i])}
if(jqLite.hasData(firstElementToRemove)){jqLite.data(newNode,jqLite.data(firstElementToRemove));jqLite(firstElementToRemove).off('$destroy')}
jqLite.cleanData(fragment.querySelectorAll('*'));for(i=1;i<removeCount;i++){delete elementsToRemove[i]}
elementsToRemove[0]=newNode;elementsToRemove.length=1}
function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}
function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}
function strictBindingsCheck(attrName,directiveName){if(strictComponentBindingsEnabled){throw $compileMinErr('missingattr','Attribute \'{0}\' of \'{1}\' is non-optional and must be set!',attrName,directiveName)}}
function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var removeWatchCollection=[];var initialChanges={};var changes;forEach(bindings,function initializeBinding(definition,scopeName){var attrName=definition.attrName,optional=definition.optional,mode=definition.mode,lastValue,parentGet,parentSet,compare,removeWatch;switch(mode){case '@':if(!optional&&!hasOwnProperty.call(attrs,attrName)){strictBindingsCheck(attrName,directive.name);destination[scopeName]=attrs[attrName]=undefined}
removeWatch=attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue);destination[scopeName]=value}});attrs.$$observers[attrName].$$scope=scope;lastValue=attrs[attrName];if(isString(lastValue)){destination[scopeName]=$interpolate(lastValue)(scope)}else if(isBoolean(lastValue)){destination[scopeName]=lastValue}
initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);removeWatchCollection.push(removeWatch);break;case '=':if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name);attrs[attrName]=undefined}
if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);if(parentGet.literal){compare=equals}else{compare=simpleCompare}
parentSet=parentGet.assign||function(){lastValue=destination[scopeName]=parentGet(scope);throw $compileMinErr('nonassign','Expression \'{0}\' in attribute \'{1}\' used with directive \'{2}\' is non-assignable!',attrs[attrName],attrName,directive.name)};lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function parentValueWatch(parentValue){if(!compare(parentValue,destination[scopeName])){if(!compare(parentValue,lastValue)){destination[scopeName]=parentValue}else{parentSet(scope,parentValue=destination[scopeName])}}
lastValue=parentValue;return lastValue};parentValueWatch.$stateful=!0;if(definition.collection){removeWatch=scope.$watchCollection(attrs[attrName],parentValueWatch)}else{removeWatch=scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal)}
removeWatchCollection.push(removeWatch);break;case '<':if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name);attrs[attrName]=undefined}
if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);var isLiteral=parentGet.literal;var initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);removeWatch=scope[definition.collection?'$watchCollection':'$watch'](parentGet,function parentValueWatchAction(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue||(isLiteral&&equals(oldValue,initialValue))){return}
oldValue=initialValue}
recordChanges(scopeName,newValue,oldValue);destination[scopeName]=newValue});removeWatchCollection.push(removeWatch);break;case '&':if(!optional&&!hasOwnProperty.call(attrs,attrName)){strictBindingsCheck(attrName,directive.name)}
parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop;if(parentGet===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)};break}});function recordChanges(key,currentValue,previousValue){if(isFunction(destination.$onChanges)&&!simpleCompare(currentValue,previousValue)){if(!onChangesQueue){scope.$$postDigest(flushOnChangesQueue);onChangesQueue=[]}
if(!changes){changes={};onChangesQueue.push(triggerOnChangesHook)}
if(changes[key]){previousValue=changes[key].previousValue}
changes[key]=new SimpleChange(previousValue,currentValue)}}
function triggerOnChangesHook(){destination.$onChanges(changes);changes=undefined}
return{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function removeWatches(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i){removeWatchCollection[i]()}}}}}]}
function SimpleChange(previous,current){this.previousValue=previous;this.currentValue=current}
SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i;var SPECIAL_CHARS_REGEXP=/[:\-_]+(.)/g;function directiveNormalize(name){return name.replace(PREFIX_REGEXP,'').replace(SPECIAL_CHARS_REGEXP,function(_,letter,offset){return offset?letter.toUpperCase():letter})}
function nodesetLinkingFn(scope,nodeList,rootElement,boundTranscludeFn){}
function directiveLinkingFn(nodesetLinkingFn,scope,node,rootElement,boundTranscludeFn){}
function tokenDifference(str1,str2){var values='',tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token===tokens2[j])continue outer}
values+=(values.length>0?' ':'')+token}
return values}
function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(i<=1){return jqNodes}
while(i--){var node=jqNodes[i];if(node.nodeType===NODE_TYPE_COMMENT||(node.nodeType===NODE_TYPE_TEXT&&node.nodeValue.trim()==='')){splice.call(jqNodes,i,1)}}
return jqNodes}
var $controllerMinErr=minErr('$controller');var CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}
function $ControllerProvider(){var controllers={};this.has=function(name){return controllers.hasOwnProperty(name)};this.register=function(name,constructor){assertNotHasOwnProperty(name,'controller');if(isObject(name)){extend(controllers,name)}else{controllers[name]=constructor}};this.$get=['$injector',function($injector){return function $controller(expression,locals,later,ident){var instance,match,constructor,identifier;later=later===!0;if(ident&&isString(ident)){identifier=ident}
if(isString(expression)){match=expression.match(CNTRL_REG);if(!match){throw $controllerMinErr('ctrlfmt','Badly formed controller string \'{0}\'. '+'Must match `__name__ as __id__` or `__name__`.',expression)}
constructor=match[1];identifier=identifier||match[3];expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0);if(!expression){throw $controllerMinErr('ctrlreg','The controller with the name \'{0}\' is not registered.',constructor)}
assertArgFn(expression,constructor,!0)}
if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}
return extend(function $controllerInit(){var result=$injector.invoke(expression,instance,locals,constructor);if(result!==instance&&(isObject(result)||isFunction(result))){instance=result;if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}}
return instance},{instance:instance,identifier:identifier})}
instance=$injector.instantiate(expression,locals,constructor);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}
return instance};function addIdentifier(locals,identifier,instance,name){if(!(locals&&isObject(locals.$scope))){throw minErr('$controller')('noscp','Cannot export controller \'{0}\' as \'{1}\'! No $scope object provided via `locals`.',name,identifier)}
locals.$scope[identifier]=instance}}]}
function $DocumentProvider(){this.$get=['$window',function(window){return jqLite(window.document)}]}
function $$IsDocumentHiddenProvider(){this.$get=['$document','$rootScope',function($document,$rootScope){var doc=$document[0];var hidden=doc&&doc.hidden;$document.on('visibilitychange',changeListener);$rootScope.$on('$destroy',function(){$document.off('visibilitychange',changeListener)});function changeListener(){hidden=doc.hidden}
return function(){return hidden}}]}
function $ExceptionHandlerProvider(){this.$get=['$log',function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}
var $$ForceReflowProvider=function(){this.$get=['$document',function($document){return function(domNode){if(domNode){if(!domNode.nodeType&&domNode instanceof jqLite){domNode=domNode[0]}}else{domNode=$document[0].body}
return domNode.offsetWidth+1}}]};var APPLICATION_JSON='application/json';var CONTENT_TYPE_APPLICATION_JSON={'Content-Type':APPLICATION_JSON+';charset=utf-8'};var JSON_START=/^\[|^\{(?!\{)/;var JSON_ENDS={'[':/]$/,'{':/}$/};var JSON_PROTECTION_PREFIX=/^\)]\}',?\n/;var $httpMinErr=minErr('$http');function serializeValue(v){if(isObject(v)){return isDate(v)?v.toISOString():toJson(v)}
return v}
function $HttpParamSerializerProvider(){this.$get=function(){return function ngParamSerializer(params){if(!params)return'';var parts=[];forEachSorted(params,function(value,key){if(value===null||isUndefined(value)||isFunction(value))return;if(isArray(value)){forEach(value,function(v){parts.push(encodeUriQuery(key)+'='+encodeUriQuery(serializeValue(v)))})}else{parts.push(encodeUriQuery(key)+'='+encodeUriQuery(serializeValue(value)))}});return parts.join('&')}}}
function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function jQueryLikeParamSerializer(params){if(!params)return'';var parts=[];serialize(params,'',!0);return parts.join('&');function serialize(toSerialize,prefix,topLevel){if(isArray(toSerialize)){forEach(toSerialize,function(value,index){serialize(value,prefix+'['+(isObject(value)?index:'')+']')})}else if(isObject(toSerialize)&&!isDate(toSerialize)){forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?'':'[')+key+(topLevel?'':']'))})}else{if(isFunction(toSerialize)){toSerialize=toSerialize()}
parts.push(encodeUriQuery(prefix)+'='+(toSerialize==null?'':encodeUriQuery(serializeValue(toSerialize))))}}}}}
function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,'').trim();if(tempData){var contentType=headers('Content-Type');var hasJsonContentType=contentType&&(contentType.indexOf(APPLICATION_JSON)===0);if(hasJsonContentType||isJsonLike(tempData)){try{data=fromJson(tempData)}catch(e){if(!hasJsonContentType){return data}
throw $httpMinErr('baddata','Data must be a valid JSON object. Received: "{0}". '+'Parse error: "{1}"',data,e)}}}}
return data}
function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}
function parseHeaders(headers){var parsed=createMap(),i;function fillInParsed(key,val){if(key){parsed[key]=parsed[key]?parsed[key]+', '+val:val}}
if(isString(headers)){forEach(headers.split('\n'),function(line){i=line.indexOf(':');fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))})}else if(isObject(headers)){forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))})}
return parsed}
function headersGetter(headers){var headersObj;return function(name){if(!headersObj)headersObj=parseHeaders(headers);if(name){var value=headersObj[lowercase(name)];if(value===undefined){value=null}
return value}
return headersObj}}
function transformData(data,headers,status,fns){if(isFunction(fns)){return fns(data,headers,status)}
forEach(fns,function(fn){data=fn(data,headers,status)});return data}
function isSuccess(status){return 200<=status&&status<300}
function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return isObject(d)&&!isFile(d)&&!isBlob(d)&&!isFormData(d)?toJson(d):d}],headers:{common:{'Accept':'application/json, text/plain, */*'},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',paramSerializer:'$httpParamSerializer',jsonpCallbackParam:'callback'};var useApplyAsync=!1;this.useApplyAsync=function(value){if(isDefined(value)){useApplyAsync=!!value;return this}
return useApplyAsync};var interceptorFactories=this.interceptors=[];var xsrfWhitelistedOrigins=this.xsrfWhitelistedOrigins=[];this.$get=['$browser','$httpBackend','$$cookieReader','$cacheFactory','$rootScope','$q','$injector','$sce',function($browser,$httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector,$sce){var defaultCache=$cacheFactory('$http');defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))});var urlIsAllowedOrigin=urlIsAllowedOriginFactory(xsrfWhitelistedOrigins);function $http(requestConfig){if(!isObject(requestConfig)){throw minErr('$http')('badreq','Http request configuration must be an object.  Received: {0}',requestConfig)}
if(!isString($sce.valueOf(requestConfig.url))){throw minErr('$http')('badreq','Http request configuration url must be a string or a $sce trusted object.  Received: {0}',requestConfig.url)}
var config=extend({method:'get',transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer,jsonpCallbackParam:defaults.jsonpCallbackParam},requestConfig);config.headers=mergeHeaders(requestConfig);config.method=uppercase(config.method);config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;$browser.$$incOutstandingRequestCount('$http');var requestInterceptors=[];var responseInterceptors=[];var promise=$q.resolve(config);forEach(reversedInterceptors,function(interceptor){if(interceptor.request||interceptor.requestError){requestInterceptors.unshift(interceptor.request,interceptor.requestError)}
if(interceptor.response||interceptor.responseError){responseInterceptors.push(interceptor.response,interceptor.responseError)}});promise=chainInterceptors(promise,requestInterceptors);promise=promise.then(serverRequest);promise=chainInterceptors(promise,responseInterceptors);promise=promise.finally(completeOutstandingRequest);return promise;function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++];var rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}
interceptors.length=0;return promise}
function completeOutstandingRequest(){$browser.$$completeOutstandingRequest(noop,'$http')}
function executeHeaderFns(headers,config){var headerContent,processedHeaders={};forEach(headers,function(headerFn,header){if(isFunction(headerFn)){headerContent=headerFn(config);if(headerContent!=null){processedHeaders[header]=headerContent}}else{processedHeaders[header]=headerFn}});return processedHeaders}
function mergeHeaders(config){var defHeaders=defaults.headers,reqHeaders=extend({},config.headers),defHeaderName,lowercaseDefHeaderName,reqHeaderName;defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders){if(lowercase(reqHeaderName)===lowercaseDefHeaderName){continue defaultHeadersIteration}}
reqHeaders[defHeaderName]=defHeaders[defHeaderName]}
return executeHeaderFns(reqHeaders,shallowCopy(config))}
function serverRequest(config){var headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);if(isUndefined(reqData)){forEach(headers,function(value,header){if(lowercase(header)==='content-type'){delete headers[header]}})}
if(isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)){config.withCredentials=defaults.withCredentials}
return sendReq(config,reqData).then(transformResponse,transformResponse)}
function transformResponse(response){var resp=extend({},response);resp.data=transformData(response.data,response.headers,response.status,config.transformResponse);return(isSuccess(response.status))?resp:$q.reject(resp)}}
$http.pendingRequests=[];createShortMethods('get','delete','head','jsonp');createShortMethodsWithData('post','put','patch');$http.defaults=defaults;return $http;function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}
function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}
function sendReq(config,reqData){var deferred=$q.defer(),promise=deferred.promise,cache,cachedResp,reqHeaders=config.headers,isJsonp=lowercase(config.method)==='jsonp',url=config.url;if(isJsonp){url=$sce.getTrustedResourceUrl(url)}else if(!isString(url)){url=$sce.valueOf(url)}
url=buildUrl(url,config.paramSerializer(config.params));if(isJsonp){url=sanitizeJsonpCallbackParam(url,config.jsonpCallbackParam)}
$http.pendingRequests.push(config);promise.then(removePendingReq,removePendingReq);if((config.cache||defaults.cache)&&config.cache!==!1&&(config.method==='GET'||config.method==='JSONP')){cache=isObject(config.cache)?config.cache:isObject((defaults).cache)?(defaults).cache:defaultCache}
if(cache){cachedResp=cache.get(url);if(isDefined(cachedResp)){if(isPromiseLike(cachedResp)){cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult)}else{if(isArray(cachedResp)){resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3],cachedResp[4])}else{resolvePromise(cachedResp,200,{},'OK','complete')}}}else{cache.put(url,promise)}}
if(isUndefined(cachedResp)){var xsrfValue=urlIsAllowedOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;if(xsrfValue){reqHeaders[(config.xsrfHeaderName||defaults.xsrfHeaderName)]=xsrfValue}
$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}
return promise;function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){if(useApplyAsync){$rootScope.$applyAsync(callEventHandler)}else if($rootScope.$$phase){callEventHandler()}else{$rootScope.$apply(callEventHandler)}
function callEventHandler(){eventHandler(event)}}});return applyHandlers}}
function done(status,response,headersString,statusText,xhrStatus){if(cache){if(isSuccess(status)){cache.put(url,[status,response,parseHeaders(headersString),statusText,xhrStatus])}else{cache.remove(url)}}
function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText,xhrStatus)}
if(useApplyAsync){$rootScope.$applyAsync(resolveHttpPromise)}else{resolveHttpPromise();if(!$rootScope.$$phase)$rootScope.$apply();}}
function resolvePromise(response,status,headers,statusText,xhrStatus){status=status>=-1?status:0;(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText,xhrStatus:xhrStatus})}
function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText,result.xhrStatus)}
function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);if(idx!==-1)$http.pendingRequests.splice(idx,1);}}
function buildUrl(url,serializedParams){if(serializedParams.length>0){url+=((url.indexOf('?')===-1)?'?':'&')+serializedParams}
return url}
function sanitizeJsonpCallbackParam(url,cbKey){var parts=url.split('?');if(parts.length>2){throw $httpMinErr('badjsonp','Illegal use more than one "?", in url, "{1}"',url)}
var params=parseKeyValue(parts[1]);forEach(params,function(value,key){if(value==='JSON_CALLBACK'){throw $httpMinErr('badjsonp','Illegal use of JSON_CALLBACK in url, "{0}"',url)}
if(key===cbKey){throw $httpMinErr('badjsonp','Illegal use of callback param, "{0}", in url, "{1}"',cbKey,url)}});url+=((url.indexOf('?')===-1)?'?':'&')+cbKey+'=JSON_CALLBACK';return url}}]}
function $xhrFactoryProvider(){this.$get=function(){return function createXhr(){return new window.XMLHttpRequest()}}}
function $HttpBackendProvider(){this.$get=['$browser','$jsonpCallbacks','$document','$xhrFactory',function($browser,$jsonpCallbacks,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}
function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){url=url||$browser.url();if(lowercase(method)==='jsonp'){var callbackPath=callbacks.createCallback(url);var jsonpDone=jsonpReq(url,callbackPath,function(status,text){var response=(status===200)&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,'',text,'complete');callbacks.removeCallback(callbackPath)})}else{var xhr=createXhr(method,url);var abortedByTimeout=!1;xhr.open(method,url,!0);forEach(headers,function(value,key){if(isDefined(value)){xhr.setRequestHeader(key,value)}});xhr.onload=function requestLoaded(){var statusText=xhr.statusText||'';var response=('response' in xhr)?xhr.response:xhr.responseText;var status=xhr.status===1223?204:xhr.status;if(status===0){status=response?200:urlResolve(url).protocol==='file'?404:0}
completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText,'complete')};var requestError=function(){completeRequest(callback,-1,null,null,'','error')};var requestAborted=function(){completeRequest(callback,-1,null,null,'',abortedByTimeout?'timeout':'abort')};var requestTimeout=function(){completeRequest(callback,-1,null,null,'','timeout')};xhr.onerror=requestError;xhr.ontimeout=requestTimeout;xhr.onabort=requestAborted;forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)});forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)});if(withCredentials){xhr.withCredentials=!0}
if(responseType){try{xhr.responseType=responseType}catch(e){if(responseType!=='json'){throw e}}}
xhr.send(isUndefined(post)?null:post)}
if(timeout>0){var timeoutId=$browserDefer(function(){timeoutRequest('timeout')},timeout)}else if(isPromiseLike(timeout)){timeout.then(function(){timeoutRequest(isDefined(timeout.$$timeoutId)?'timeout':'abort')})}
function timeoutRequest(reason){abortedByTimeout=reason==='timeout';if(jsonpDone){jsonpDone()}
if(xhr){xhr.abort()}}
function completeRequest(callback,status,response,headersString,statusText,xhrStatus){if(isDefined(timeoutId)){$browserDefer.cancel(timeoutId)}
jsonpDone=xhr=null;callback(status,response,headersString,statusText,xhrStatus)}};function jsonpReq(url,callbackPath,done){url=url.replace('JSON_CALLBACK',callbackPath);var script=rawDocument.createElement('script'),callback=null;script.type='text/javascript';script.src=url;script.async=!0;callback=function(event){script.removeEventListener('load',callback);script.removeEventListener('error',callback);rawDocument.body.removeChild(script);script=null;var status=-1;var text='unknown';if(event){if(event.type==='load'&&!callbacks.wasCalled(callbackPath)){event={type:'error'}}
text=event.type;status=event.type==='error'?404:200}
if(done){done(status,text)}};script.addEventListener('load',callback);script.addEventListener('error',callback);rawDocument.body.appendChild(script);return callback}}
var $interpolateMinErr=angular.$interpolateMinErr=minErr('$interpolate');$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr('noconcat','Error while interpolating: {0}\nStrict Contextual Escaping disallows '+'interpolations that concatenate multiple expressions when a trusted value is '+'required.  See http://docs.angularjs.org/api/ng.$sce',text)};$interpolateMinErr.interr=function(text,err){return $interpolateMinErr('interr','Can\'t interpolate: {0}\n{1}',text,err.toString())};function $InterpolateProvider(){var startSymbol='{{';var endSymbol='}}';this.startSymbol=function(value){if(value){startSymbol=value;return this}
return startSymbol};this.endSymbol=function(value){if(value){endSymbol=value;return this}
return endSymbol};this.$get=['$parse','$exceptionHandler','$sce',function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),'g'),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),'g');function escape(ch){return'\\\\\\'+ch}
function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}
function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch(function constantInterpolateWatch(scope){unwatch();return constantInterp(scope)},listener,objectEquality);return unwatch}
function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){var contextAllowsConcatenation=trustedContext===$sce.URL||trustedContext===$sce.MEDIA_URL;if(!text.length||text.indexOf(startSymbol)===-1){if(mustHaveExpression)return;var unescapedText=unescapeText(text);if(contextAllowsConcatenation){unescapedText=$sce.getTrusted(trustedContext,unescapedText)}
var constantInterp=valueFn(unescapedText);constantInterp.exp=text;constantInterp.expressions=[];constantInterp.$$watchDelegate=constantWatchDelegate;return constantInterp}
allOrNothing=!!allOrNothing;var startIndex,endIndex,index=0,expressions=[],parseFns,textLength=text.length,exp,concat=[],expressionPositions=[],singleExpression;while(index<textLength){if(((startIndex=text.indexOf(startSymbol,index))!==-1)&&((endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))!==-1)){if(index!==startIndex){concat.push(unescapeText(text.substring(index,startIndex)))}
exp=text.substring(startIndex+startSymbolLength,endIndex);expressions.push(exp);index=endIndex+endSymbolLength;expressionPositions.push(concat.length);concat.push('')}else{if(index!==textLength){concat.push(unescapeText(text.substring(index)))}
break}}
singleExpression=concat.length===1&&expressionPositions.length===1;var interceptor=contextAllowsConcatenation&&singleExpression?undefined:parseStringifyInterceptor;parseFns=expressions.map(function(exp){return $parse(exp,interceptor)});if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}
if(contextAllowsConcatenation){return $sce.getTrusted(trustedContext,singleExpression?concat[0]:concat.join(''))}else if(trustedContext&&concat.length>1){$interpolateMinErr.throwNoconcat(text)}
return concat.join('')};return extend(function interpolationFn(context){var i=0;var ii=expressions.length;var values=new Array(ii);try{for(;i<ii;i++){values[i]=parseFns[i](context)}
return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function interpolateFnWatcher(values,oldValues){var currValue=compute(values);listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope);lastValue=currValue})}})}
function parseStringifyInterceptor(value){try{value=(trustedContext&&!contextAllowsConcatenation)?$sce.getTrusted(trustedContext,value):$sce.valueOf(value);return allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}}
$interpolate.startSymbol=function(){return startSymbol};$interpolate.endSymbol=function(){return endSymbol};return $interpolate}]}
var $intervalMinErr=minErr('$interval');function $IntervalProvider(){this.$get=['$$intervalFactory','$window',function($$intervalFactory,$window){var intervals={};var setIntervalFn=function(tick,delay,deferred){var id=$window.setInterval(tick,delay);intervals[id]=deferred;return id};var clearIntervalFn=function(id){$window.clearInterval(id);delete intervals[id]};var interval=$$intervalFactory(setIntervalFn,clearIntervalFn);interval.cancel=function(promise){if(!promise)return!1;if(!promise.hasOwnProperty('$$intervalId')){throw $intervalMinErr('badprom','`$interval.cancel()` called with a promise that was not generated by `$interval()`.')}
if(!intervals.hasOwnProperty(promise.$$intervalId))return!1;var id=promise.$$intervalId;var deferred=intervals[id];markQExceptionHandled(deferred.promise);deferred.reject('canceled');clearIntervalFn(id);return!0};return interval}]}
function $$IntervalFactoryProvider(){this.$get=['$browser','$q','$$q','$rootScope',function($browser,$q,$$q,$rootScope){return function intervalFactory(setIntervalFn,clearIntervalFn){return function intervalFn(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;count=isDefined(count)?count:0;function callback(){if(!hasParams){fn(iteration)}else{fn.apply(null,args)}}
function tick(){if(skipApply){$browser.defer(callback)}else{$rootScope.$evalAsync(callback)}
deferred.notify(iteration++);if(count>0&&iteration>=count){deferred.resolve(iteration);clearIntervalFn(promise.$$intervalId)}
if(!skipApply)$rootScope.$apply();}
promise.$$intervalId=setIntervalFn(tick,delay,deferred,skipApply);return promise}}}]}
var $jsonpCallbacksProvider=function(){this.$get=function(){var callbacks=angular.callbacks;var callbackMap={};function createCallback(callbackId){var callback=function(data){callback.data=data;callback.called=!0};callback.id=callbackId;return callback}
return{createCallback:function(url){var callbackId='_'+(callbacks.$$counter++).toString(36);var callbackPath='angular.callbacks.'+callbackId;var callback=createCallback(callbackId);callbackMap[callbackPath]=callbacks[callbackId]=callback;return callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id];delete callbackMap[callbackPath]}}}};var PATH_MATCH=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={'http':80,'https':443,'ftp':21};var $locationMinErr=minErr('$location');function encodePath(path){var segments=path.split('/'),i=segments.length;while(i--){segments[i]=encodeUriSegment(segments[i].replace(/%2F/g,'/'))}
return segments.join('/')}
function decodePath(path,html5Mode){var segments=path.split('/'),i=segments.length;while(i--){segments[i]=decodeURIComponent(segments[i]);if(html5Mode){segments[i]=segments[i].replace(/\//g,'%2F')}}
return segments.join('/')}
function normalizePath(pathValue,searchValue,hashValue){var search=toKeyValue(searchValue),hash=hashValue?'#'+encodeUriSegment(hashValue):'',path=encodePath(pathValue);return path+(search?'?'+search:'')+hash}
function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol;locationObj.$$host=parsedUrl.hostname;locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}
var DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/;function parseAppUrl(url,locationObj,html5Mode){if(DOUBLE_SLASH_REGEX.test(url)){throw $locationMinErr('badpath','Invalid url "{0}".',url)}
var prefixed=(url.charAt(0)!=='/');if(prefixed){url='/'+url}
var match=urlResolve(url);var path=prefixed&&match.pathname.charAt(0)==='/'?match.pathname.substring(1):match.pathname;locationObj.$$path=decodePath(path,html5Mode);locationObj.$$search=parseKeyValue(match.search);locationObj.$$hash=decodeURIComponent(match.hash);if(locationObj.$$path&&locationObj.$$path.charAt(0)!=='/'){locationObj.$$path='/'+locationObj.$$path}}
function startsWith(str,search){return str.slice(0,search.length)===search}
function stripBaseUrl(base,url){if(startsWith(url,base)){return url.substr(base.length)}}
function stripHash(url){var index=url.indexOf('#');return index===-1?url:url.substr(0,index)}
function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf('/')+1)}
function serverBase(url){return url.substring(0,url.indexOf('/',url.indexOf('//')+2))}
function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0;basePrefix=basePrefix||'';parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl)){throw $locationMinErr('ipthprfx','Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile)}
parseAppUrl(pathUrl,this,!0);if(!this.$$path){this.$$path='/'}
this.$$compose()};this.$$normalizeUrl=function(url){return appBaseNoFile+url.substr(1)};this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==='#'){this.hash(relHref.slice(1));return!0}
var appUrl,prevAppUrl;var rewrittenUrl;if(isDefined(appUrl=stripBaseUrl(appBase,url))){prevAppUrl=appUrl;if(basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))){rewrittenUrl=appBaseNoFile+(stripBaseUrl('/',appUrl)||appUrl)}else{rewrittenUrl=appBase+prevAppUrl}}else if(isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))){rewrittenUrl=appBaseNoFile+appUrl}else if(appBaseNoFile===url+'/'){rewrittenUrl=appBaseNoFile}
if(rewrittenUrl){this.$$parse(rewrittenUrl)}
return!!rewrittenUrl}}
function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);var withoutHashUrl;if(!isUndefined(withoutBaseUrl)&&withoutBaseUrl.charAt(0)==='#'){withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl);if(isUndefined(withoutHashUrl)){withoutHashUrl=withoutBaseUrl}}else{if(this.$$html5){withoutHashUrl=withoutBaseUrl}else{withoutHashUrl='';if(isUndefined(withoutBaseUrl)){appBase=url;(this).replace()}}}
parseAppUrl(withoutHashUrl,this,!1);this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase);this.$$compose();function removeWindowsDriveName(path,url,base){var windowsFilePathExp=/^\/[A-Z]:(\/.*)/;var firstPathSegmentMatch;if(startsWith(url,base)){url=url.replace(base,'')}
if(windowsFilePathExp.exec(url)){return path}
firstPathSegmentMatch=windowsFilePathExp.exec(path);return firstPathSegmentMatch?firstPathSegmentMatch[1]:path}};this.$$normalizeUrl=function(url){return appBase+(url?hashPrefix+url:'')};this.$$parseLinkUrl=function(url,relHref){if(stripHash(appBase)===stripHash(url)){this.$$parse(url);return!0}
return!1}}
function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0;LocationHashbangUrl.apply(this,arguments);this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==='#'){this.hash(relHref.slice(1));return!0}
var rewrittenUrl;var appUrl;if(appBase===stripHash(url)){rewrittenUrl=url}else if((appUrl=stripBaseUrl(appBaseNoFile,url))){rewrittenUrl=appBase+hashPrefix+appUrl}else if(appBaseNoFile===url+'/'){rewrittenUrl=appBaseNoFile}
if(rewrittenUrl){this.$$parse(rewrittenUrl)}
return!!rewrittenUrl};this.$$normalizeUrl=function(url){return appBase+hashPrefix+url}}
var locationPrototype={$$absUrl:'',$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=normalizePath(this.$$path,this.$$search,this.$$hash);this.$$absUrl=this.$$normalizeUrl(this.$$url);this.$$urlUpdatedByLocation=!0},absUrl:locationGetter('$$absUrl'),url:function(url){if(isUndefined(url)){return this.$$url}
var match=PATH_MATCH.exec(url);if(match[1]||url==='')this.path(decodeURIComponent(match[1]));if(match[2]||match[1]||url==='')this.search(match[3]||'');this.hash(match[5]||'');return this},protocol:locationGetter('$$protocol'),host:locationGetter('$$host'),port:locationGetter('$$port'),path:locationGetterSetter('$$path',function(path){path=path!==null?path.toString():'';return path.charAt(0)==='/'?path:'/'+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search)){search=search.toString();this.$$search=parseKeyValue(search)}else if(isObject(search)){search=copy(search,{});forEach(search,function(value,key){if(value==null)delete search[key]});this.$$search=search}else{throw $locationMinErr('isrcharg','The first argument of the `$location#search()` call must be a string or an object.')}
break;default:if(isUndefined(paramValue)||paramValue===null){delete this.$$search[search]}else{this.$$search[search]=paramValue}}
this.$$compose();return this},hash:locationGetterSetter('$$hash',function(hash){return hash!==null?hash.toString():''}),replace:function(){this.$$replace=!0;return this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype);Location.prototype.state=function(state){if(!arguments.length){return this.$$state}
if(Location!==LocationHtml5Url||!this.$$html5){throw $locationMinErr('nostate','History API state support is available only '+'in HTML5 mode and only in browsers supporting HTML5 History API')}
this.$$state=isUndefined(state)?null:state;this.$$urlUpdatedByLocation=!0;return this}});function locationGetter(property){return function(){return this[property]}}
function locationGetterSetter(property,preprocess){return function(value){if(isUndefined(value)){return this[property]}
this[property]=preprocess(value);this.$$compose();return this}}
function $LocationProvider(){var hashPrefix='!',html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){if(isDefined(prefix)){hashPrefix=prefix;return this}else{return hashPrefix}};this.html5Mode=function(mode){if(isBoolean(mode)){html5Mode.enabled=mode;return this}else if(isObject(mode)){if(isBoolean(mode.enabled)){html5Mode.enabled=mode.enabled}
if(isBoolean(mode.requireBase)){html5Mode.requireBase=mode.requireBase}
if(isBoolean(mode.rewriteLinks)||isString(mode.rewriteLinks)){html5Mode.rewriteLinks=mode.rewriteLinks}
return this}else{return html5Mode}};this.$get=['$rootScope','$browser','$sniffer','$rootElement','$window',function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,baseHref=$browser.baseHref(),initialUrl=$browser.url(),appBase;if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase){throw $locationMinErr('nobase','$location in HTML5 mode requires a <base> tag to be present!')}
appBase=serverBase(initialUrl)+(baseHref||'/');LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else{appBase=stripHash(initialUrl);LocationMode=LocationHashbangUrl}
var appBaseNoFile=stripFile(appBase);$location=new LocationMode(appBase,appBaseNoFile,'#'+hashPrefix);$location.$$parseLinkUrl(initialUrl,initialUrl);$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function urlsEqual(a,b){return a===b||urlResolve(a).href===urlResolve(b).href}
function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url();var oldState=$location.$$state;try{$browser.url(url,replace,state);$location.$$state=$browser.state()}catch(e){$location.url(oldUrl);$location.$$state=oldState;throw e}}
$rootElement.on('click',function(event){var rewriteLinks=html5Mode.rewriteLinks;if(!rewriteLinks||event.ctrlKey||event.metaKey||event.shiftKey||event.which===2||event.button===2)return;var elm=jqLite(event.target);while(nodeName_(elm[0])!=='a'){if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return}
if(isString(rewriteLinks)&&isUndefined(elm.attr(rewriteLinks)))return;var absHref=elm.prop('href');var relHref=elm.attr('href')||elm.attr('xlink:href');if(isObject(absHref)&&absHref.toString()==='[object SVGAnimatedString]'){absHref=urlResolve(absHref.animVal).href}
if(IGNORE_URI_REGEXP.test(absHref))return;if(absHref&&!elm.attr('target')&&!event.isDefaultPrevented()){if($location.$$parseLinkUrl(absHref,relHref)){event.preventDefault();if($location.absUrl()!==$browser.url()){$rootScope.$apply()}}}});if($location.absUrl()!==initialUrl){$browser.url($location.absUrl(),!0)}
var initializing=!0;$browser.onUrlChange(function(newUrl,newState){if(!startsWith(newUrl,appBaseNoFile)){$window.location.href=newUrl;return}
$rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();var oldState=$location.$$state;var defaultPrevented;$location.$$parse(newUrl);$location.$$state=newState;defaultPrevented=$rootScope.$broadcast('$locationChangeStart',newUrl,oldUrl,newState,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState;setBrowserUrlWithFallback(oldUrl,!1,oldState)}else{initializing=!1;afterLocationChange(oldUrl,oldState)}});if(!$rootScope.$$phase)$rootScope.$digest();});$rootScope.$watch(function $locationWatch(){if(initializing||$location.$$urlUpdatedByLocation){$location.$$urlUpdatedByLocation=!1;var oldUrl=$browser.url();var newUrl=$location.absUrl();var oldState=$browser.state();var currentReplace=$location.$$replace;var urlOrStateChanged=!urlsEqual(oldUrl,newUrl)||($location.$$html5&&$sniffer.history&&oldState!==$location.$$state);if(initializing||urlOrStateChanged){initializing=!1;$rootScope.$evalAsync(function(){var newUrl=$location.absUrl();var defaultPrevented=$rootScope.$broadcast('$locationChangeStart',newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState}else{if(urlOrStateChanged){setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state)}
afterLocationChange(oldUrl,oldState)}})}}
$location.$$replace=!1});return $location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast('$locationChangeSuccess',$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}
function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){if(isDefined(flag)){debug=flag;return this}else{return debug}};this.$get=['$window',function($window){var formatStackTrace=msie||/\bEdge\//.test($window.navigator&&$window.navigator.userAgent);return{log:consoleLog('log'),info:consoleLog('info'),warn:consoleLog('warn'),error:consoleLog('error'),debug:(function(){var fn=consoleLog('debug');return function(){if(debug){fn.apply(self,arguments)}}})()};function formatError(arg){if(isError(arg)){if(arg.stack&&formatStackTrace){arg=(arg.message&&arg.stack.indexOf(arg.message)===-1)?'Error: '+arg.message+'\n'+arg.stack:arg.stack}else if(arg.sourceURL){arg=arg.message+'\n'+arg.sourceURL+':'+arg.line}}
return arg}
function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop;return function(){var args=[];forEach(arguments,function(arg){args.push(formatError(arg))});return Function.prototype.apply.call(logFn,console,args)}}}]}
var $parseMinErr=minErr('$parse');var objectValueOf={}.constructor.prototype.valueOf;function getStringValue(name){return name+''}
var OPERATORS=createMap();forEach('+ - * / % === !== == != < > <= >= && || ! = |'.split(' '),function(operator){OPERATORS[operator]=!0});var ESCAPE={'n':'\n','f':'\f','r':'\r','t':'\t','v':'\v','\'':'\'','"':'"'};var Lexer=function Lexer(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text;this.index=0;this.tokens=[];while(this.index<this.text.length){var ch=this.text.charAt(this.index);if(ch==='"'||ch==='\''){this.readString(ch)}else if(this.isNumber(ch)||ch==='.'&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdentifierStart(this.peekMultichar())){this.readIdent()}else if(this.is(ch,'(){}[].,;:?')){this.tokens.push({index:this.index,text:ch});this.index++}else if(this.isWhitespace(ch)){this.index++}else{var ch2=ch+this.peek();var ch3=ch2+this.peek(2);var op1=OPERATORS[ch];var op2=OPERATORS[ch2];var op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:(op2?ch2:ch);this.tokens.push({index:this.index,text:token,operator:!0});this.index+=token.length}else{this.throwError('Unexpected next character ',this.index,this.index+1)}}}
return this.tokens},is:function(ch,chars){return chars.indexOf(ch)!==-1},peek:function(i){var num=i||1;return(this.index+num<this.text.length)?this.text.charAt(this.index+num):!1},isNumber:function(ch){return('0'<=ch&&ch<='9')&&typeof ch==='string'},isWhitespace:function(ch){return(ch===' '||ch==='\r'||ch==='\t'||ch==='\n'||ch==='\v'||ch==='\u00A0')},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return('a'<=ch&&ch<='z'||'A'<=ch&&ch<='Z'||'_'===ch||ch==='$')},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){if(ch.length===1)return ch.charCodeAt(0);return(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-0x35FDC00},peekMultichar:function(){var ch=this.text.charAt(this.index);var peek=this.peek();if(!peek){return ch}
var cp1=ch.charCodeAt(0);var cp2=peek.charCodeAt(0);if(cp1>=0xD800&&cp1<=0xDBFF&&cp2>=0xDC00&&cp2<=0xDFFF){return ch+peek}
return ch},isExpOperator:function(ch){return(ch==='-'||ch==='+'||this.isNumber(ch))},throwError:function(error,start,end){end=end||this.index;var colStr=(isDefined(start)?'s '+start+'-'+this.index+' ['+this.text.substring(start,end)+']':' '+end);throw $parseMinErr('lexerr','Lexer Error: {0} at column{1} in expression [{2}].',error,colStr,this.text)},readNumber:function(){var number='';var start=this.index;while(this.index<this.text.length){var ch=lowercase(this.text.charAt(this.index));if(ch==='.'||this.isNumber(ch)){number+=ch}else{var peekCh=this.peek();if(ch==='e'&&this.isExpOperator(peekCh)){number+=ch}else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&number.charAt(number.length-1)==='e'){number+=ch}else if(this.isExpOperator(ch)&&(!peekCh||!this.isNumber(peekCh))&&number.charAt(number.length-1)==='e'){this.throwError('Invalid exponent')}else{break}}
this.index++}
this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;this.index+=this.peekMultichar().length;while(this.index<this.text.length){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch)){break}
this.index+=ch.length}
this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;var string='';var rawString=quote;var escape=!1;while(this.index<this.text.length){var ch=this.text.charAt(this.index);rawString+=ch;if(escape){if(ch==='u'){var hex=this.text.substring(this.index+1,this.index+5);if(!hex.match(/[\da-f]{4}/i)){this.throwError('Invalid unicode escape [\\u'+hex+']')}
this.index+=4;string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string=string+(rep||ch)}
escape=!1}else if(ch==='\\'){escape=!0}else if(ch===quote){this.index++;this.tokens.push({index:start,text:rawString,constant:!0,value:string});return}else{string+=ch}
this.index++}
this.throwError('Unterminated quote',start)}};var AST=function AST(lexer,options){this.lexer=lexer;this.options=options};AST.Program='Program';AST.ExpressionStatement='ExpressionStatement';AST.AssignmentExpression='AssignmentExpression';AST.ConditionalExpression='ConditionalExpression';AST.LogicalExpression='LogicalExpression';AST.BinaryExpression='BinaryExpression';AST.UnaryExpression='UnaryExpression';AST.CallExpression='CallExpression';AST.MemberExpression='MemberExpression';AST.Identifier='Identifier';AST.Literal='Literal';AST.ArrayExpression='ArrayExpression';AST.Property='Property';AST.ObjectExpression='ObjectExpression';AST.ThisExpression='ThisExpression';AST.LocalsExpression='LocalsExpression';AST.NGValueParameter='NGValueParameter';AST.prototype={ast:function(text){this.text=text;this.tokens=this.lexer.lex(text);var value=this.program();if(this.tokens.length!==0){this.throwError('is an unexpected token',this.tokens[0])}
return value},program:function(){var body=[];while(!0){if(this.tokens.length>0&&!this.peek('}',')',';',']'))
body.push(this.expressionStatement());if(!this.expect(';')){return{type:AST.Program,body:body}}}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var left=this.expression();while(this.expect('|')){left=this.filter(left)}
return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();if(this.expect('=')){if(!isAssignable(result)){throw $parseMinErr('lval','Trying to assign a value to a non l-value')}
result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:'='}}
return result},ternary:function(){var test=this.logicalOR();var alternate;var consequent;if(this.expect('?')){alternate=this.expression();if(this.consume(':')){consequent=this.expression();return{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}}}
return test},logicalOR:function(){var left=this.logicalAND();while(this.expect('||')){left={type:AST.LogicalExpression,operator:'||',left:left,right:this.logicalAND()}}
return left},logicalAND:function(){var left=this.equality();while(this.expect('&&')){left={type:AST.LogicalExpression,operator:'&&',left:left,right:this.equality()}}
return left},equality:function(){var left=this.relational();var token;while((token=this.expect('==','!=','===','!=='))){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()}}
return left},relational:function(){var left=this.additive();var token;while((token=this.expect('<','>','<=','>='))){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()}}
return left},additive:function(){var left=this.multiplicative();var token;while((token=this.expect('+','-'))){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()}}
return left},multiplicative:function(){var left=this.unary();var token;while((token=this.expect('*','/','%'))){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()}}
return left},unary:function(){var token;if((token=this.expect('+','-','!'))){return{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}}else{return this.primary()}},primary:function(){var primary;if(this.expect('(')){primary=this.filterChain();this.consume(')')}else if(this.expect('[')){primary=this.arrayDeclaration()}else if(this.expect('{')){primary=this.object()}else if(this.selfReferential.hasOwnProperty(this.peek().text)){primary=copy(this.selfReferential[this.consume().text])}else if(this.options.literals.hasOwnProperty(this.peek().text)){primary={type:AST.Literal,value:this.options.literals[this.consume().text]}}else if(this.peek().identifier){primary=this.identifier()}else if(this.peek().constant){primary=this.constant()}else{this.throwError('not a primary expression',this.peek())}
var next;while((next=this.expect('(','[','.'))){if(next.text==='('){primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()};this.consume(')')}else if(next.text==='['){primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0};this.consume(']')}else if(next.text==='.'){primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}}else{this.throwError('IMPOSSIBLE')}}
return primary},filter:function(baseExpression){var args=[baseExpression];var result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};while(this.expect(':')){args.push(this.expression())}
return result},parseArguments:function(){var args=[];if(this.peekToken().text!==')'){do{args.push(this.filterChain())}while(this.expect(','));}
return args},identifier:function(){var token=this.consume();if(!token.identifier){this.throwError('is not a valid identifier',token)}
return{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if(this.peekToken().text!==']'){do{if(this.peek(']')){break}
elements.push(this.expression())}while(this.expect(','));}
this.consume(']');return{type:AST.ArrayExpression,elements:elements}},object:function(){var properties=[],property;if(this.peekToken().text!=='}'){do{if(this.peek('}')){break}
property={type:AST.Property,kind:'init'};if(this.peek().constant){property.key=this.constant();property.computed=!1;this.consume(':');property.value=this.expression()}else if(this.peek().identifier){property.key=this.identifier();property.computed=!1;if(this.peek(':')){this.consume(':');property.value=this.expression()}else{property.value=property.key}}else if(this.peek('[')){this.consume('[');property.key=this.expression();this.consume(']');property.computed=!0;this.consume(':');property.value=this.expression()}else{this.throwError('invalid key',this.peek())}
properties.push(property)}while(this.expect(','));}
this.consume('}');return{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr('syntax','Syntax Error: Token \'{0}\' {1} at column {2} of the expression [{3}] starting at [{4}].',token.text,msg,(token.index+1),this.text,this.text.substring(token.index))},consume:function(e1){if(this.tokens.length===0){throw $parseMinErr('ueoe','Unexpected end of expression: {0}',this.text)}
var token=this.expect(e1);if(!token){this.throwError('is unexpected, expecting ['+e1+']',this.peek())}
return token},peekToken:function(){if(this.tokens.length===0){throw $parseMinErr('ueoe','Unexpected end of expression: {0}',this.text)}
return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i];var t=token.text;if(t===e1||t===e2||t===e3||t===e4||(!e1&&!e2&&!e3&&!e4)){return token}}
return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);if(token){this.tokens.shift();return token}
return!1},selfReferential:{'this':{type:AST.ThisExpression},'$locals':{type:AST.LocalsExpression}}};function ifDefined(v,d){return typeof v!=='undefined'?v:d}
function plusFn(l,r){if(typeof l==='undefined')return r;if(typeof r==='undefined')return l;return l+r}
function isStateless($filter,filterName){var fn=$filter(filterName);return!fn.$stateful}
var PURITY_ABSOLUTE=1;var PURITY_RELATIVE=2;function isPure(node,parentIsPure){switch(node.type){case AST.MemberExpression:if(node.computed){return!1}
break;case AST.UnaryExpression:return PURITY_ABSOLUTE;case AST.BinaryExpression:return node.operator!=='+'?PURITY_ABSOLUTE:!1;case AST.CallExpression:return!1}
return(undefined===parentIsPure)?PURITY_RELATIVE:parentIsPure}
function findConstantAndWatchExpressions(ast,$filter,parentIsPure){var allConstants;var argsToWatch;var isStatelessFilter;var astIsPure=ast.isPure=isPure(ast,parentIsPure);switch(ast.type){case AST.Program:allConstants=!0;forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter,astIsPure);allConstants=allConstants&&expr.expression.constant});ast.constant=allConstants;break;case AST.Literal:ast.constant=!0;ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter,astIsPure);ast.constant=ast.argument.constant;ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure);findConstantAndWatchExpressions(ast.right,$filter,astIsPure);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure);findConstantAndWatchExpressions(ast.right,$filter,astIsPure);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter,astIsPure);findConstantAndWatchExpressions(ast.alternate,$filter,astIsPure);findConstantAndWatchExpressions(ast.consequent,$filter,astIsPure);ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant;ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1;ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter,astIsPure);if(ast.computed){findConstantAndWatchExpressions(ast.property,$filter,astIsPure)}
ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant);ast.toWatch=ast.constant?[]:[ast];break;case AST.CallExpression:isStatelessFilter=ast.filter?isStateless($filter,ast.callee.name):!1;allConstants=isStatelessFilter;argsToWatch=[];forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure);allConstants=allConstants&&expr.constant;argsToWatch.push.apply(argsToWatch,expr.toWatch)});ast.constant=allConstants;ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure);findConstantAndWatchExpressions(ast.right,$filter,astIsPure);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0;argsToWatch=[];forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure);allConstants=allConstants&&expr.constant;argsToWatch.push.apply(argsToWatch,expr.toWatch)});ast.constant=allConstants;ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0;argsToWatch=[];forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter,astIsPure);allConstants=allConstants&&property.value.constant;argsToWatch.push.apply(argsToWatch,property.value.toWatch);if(property.computed){findConstantAndWatchExpressions(property.key,$filter,!1);allConstants=allConstants&&property.key.constant;argsToWatch.push.apply(argsToWatch,property.key.toWatch)}});ast.constant=allConstants;ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=!1;ast.toWatch=[];break;case AST.LocalsExpression:ast.constant=!1;ast.toWatch=[];break}}
function getInputs(body){if(body.length!==1)return;var lastExpression=body[0].expression;var candidate=lastExpression.toWatch;if(candidate.length!==1)return candidate;return candidate[0]!==lastExpression?candidate:undefined}
function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}
function assignableAST(ast){if(ast.body.length===1&&isAssignable(ast.body[0].expression)){return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:'='}}}
function isLiteral(ast){return ast.body.length===0||ast.body.length===1&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}
function isConstant(ast){return ast.constant}
function ASTCompiler($filter){this.$filter=$filter}
ASTCompiler.prototype={compile:function(ast){var self=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};findConstantAndWatchExpressions(ast,self.$filter);var extra='';var assignable;this.stage='assign';if((assignable=assignableAST(ast))){this.state.computing='assign';var result=this.nextId();this.recurse(assignable,result);this.return_(result);extra='fn.assign='+this.generateFunction('assign','s,v,l')}
var toWatch=getInputs(ast.body);self.stage='inputs';forEach(toWatch,function(watch,key){var fnKey='fn'+key;self.state[fnKey]={vars:[],body:[],own:{}};self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId);self.return_(intoId);self.state.inputs.push({name:fnKey,isPure:watch.isPure});watch.watchId=key});this.state.computing='fn';this.stage='main';this.recurse(ast);var fnString='"'+this.USE+' '+this.STRICT+'";\n'+this.filterPrefix()+'var fn='+this.generateFunction('fn','s,l,a,i')+extra+this.watchFns()+'return fn;';var fn=(new Function('$filter','getStringValue','ifDefined','plus',fnString))(this.$filter,getStringValue,ifDefined,plusFn);this.state=this.stage=undefined;return fn},USE:'use',STRICT:'strict',watchFns:function(){var result=[];var inputs=this.state.inputs;var self=this;forEach(inputs,function(input){result.push('var '+input.name+'='+self.generateFunction(input.name,'s'));if(input.isPure){result.push(input.name,'.isPure='+JSON.stringify(input.isPure)+';')}});if(inputs.length){result.push('fn.inputs=['+inputs.map(function(i){return i.name}).join(',')+'];')}
return result.join('')},generateFunction:function(name,params){return'function('+params+'){'+this.varsPrefix(name)+this.body(name)+'};'},filterPrefix:function(){var parts=[];var self=this;forEach(this.state.filters,function(id,filter){parts.push(id+'=$filter('+self.escape(filter)+')')});if(parts.length)return'var '+parts.join(',')+';';return''},varsPrefix:function(section){return this.state[section].vars.length?'var '+this.state[section].vars.join(',')+';':''},body:function(section){return this.state[section].body.join('')},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,self=this,args,expression,computed;recursionFn=recursionFn||noop;if(!skipWatchIdCheck&&isDefined(ast.watchId)){intoId=intoId||this.nextId();this.if_('i',this.lazyAssign(intoId,this.computedMember('i',ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));return}
switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr});if(pos!==ast.body.length-1){self.current().body.push(right,';')}else{self.return_(right)}});break;case AST.Literal:expression=this.escape(ast.value);this.assign(intoId,expression);recursionFn(intoId||expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr});expression=ast.operator+'('+this.ifDefined(right,0)+')';this.assign(intoId,expression);recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr});this.recurse(ast.right,undefined,undefined,function(expr){right=expr});if(ast.operator==='+'){expression=this.plus(left,right)}else if(ast.operator==='-'){expression=this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0)}else{expression='('+left+')'+ast.operator+'('+right+')'}
this.assign(intoId,expression);recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId();self.recurse(ast.left,intoId);self.if_(ast.operator==='&&'?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId));recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId();self.recurse(ast.test,intoId);self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId));recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId();if(nameId){nameId.context=self.stage==='inputs'?'s':this.assign(this.nextId(),this.getHasOwnProperty('l',ast.name)+'?l:s');nameId.computed=!1;nameId.name=ast.name}
self.if_(self.stage==='inputs'||self.not(self.getHasOwnProperty('l',ast.name)),function(){self.if_(self.stage==='inputs'||'s',function(){if(create&&create!==1){self.if_(self.isNull(self.nonComputedMember('s',ast.name)),self.lazyAssign(self.nonComputedMember('s',ast.name),'{}'))}
self.assign(intoId,self.nonComputedMember('s',ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember('l',ast.name)));recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId();intoId=intoId||this.nextId();self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){if(ast.computed){right=self.nextId();self.recurse(ast.property,right);self.getStringValue(right);if(create&&create!==1){self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),'{}'))}
expression=self.computedMember(left,right);self.assign(intoId,expression);if(nameId){nameId.computed=!0;nameId.name=right}}else{if(create&&create!==1){self.if_(self.isNull(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),'{}'))}
expression=self.nonComputedMember(left,ast.property.name);self.assign(intoId,expression);if(nameId){nameId.computed=!1;nameId.name=ast.property.name}}},function(){self.assign(intoId,'undefined')});recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId();if(ast.filter){right=self.filter(ast.callee.name);args=[];forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument);args.push(argument)});expression=right+'('+args.join(',')+')';self.assign(intoId,expression);recursionFn(intoId)}else{right=self.nextId();left={};args=[];self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){forEach(ast.arguments,function(expr){self.recurse(expr,ast.constant?undefined:self.nextId(),undefined,function(argument){args.push(argument)})});if(left.name){expression=self.member(left.context,left.name,left.computed)+'('+args.join(',')+')'}else{expression=right+'('+args.join(',')+')'}
self.assign(intoId,expression)},function(){self.assign(intoId,'undefined')});recursionFn(intoId)})}
break;case AST.AssignmentExpression:right=this.nextId();left={};this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right);expression=self.member(left.context,left.name,left.computed)+ast.operator+right;self.assign(intoId,expression);recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[];forEach(ast.elements,function(expr){self.recurse(expr,ast.constant?undefined:self.nextId(),undefined,function(argument){args.push(argument)})});expression='['+args.join(',')+']';this.assign(intoId,expression);recursionFn(intoId||expression);break;case AST.ObjectExpression:args=[];computed=!1;forEach(ast.properties,function(property){if(property.computed){computed=!0}});if(computed){intoId=intoId||this.nextId();this.assign(intoId,'{}');forEach(ast.properties,function(property){if(property.computed){left=self.nextId();self.recurse(property.key,left)}else{left=property.key.type===AST.Identifier?property.key.name:(''+property.key.value)}
right=self.nextId();self.recurse(property.value,right);self.assign(self.member(intoId,left,property.computed),right)})}else{forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?undefined:self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:(''+property.key.value))+':'+expr)})});expression='{'+args.join(',')+'}';this.assign(intoId,expression)}
recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,'s');recursionFn(intoId||'s');break;case AST.LocalsExpression:this.assign(intoId,'l');recursionFn(intoId||'l');break;case AST.NGValueParameter:this.assign(intoId,'v');recursionFn(intoId||'v');break}},getHasOwnProperty:function(element,property){var key=element+'.'+property;var own=this.current().own;if(!own.hasOwnProperty(key)){own[key]=this.nextId(!1,element+'&&('+this.escape(property)+' in '+element+')')}
return own[key]},assign:function(id,value){if(!id)return;this.current().body.push(id,'=',value,';');return id},filter:function(filterName){if(!this.state.filters.hasOwnProperty(filterName)){this.state.filters[filterName]=this.nextId(!0)}
return this.state.filters[filterName]},ifDefined:function(id,defaultValue){return'ifDefined('+id+','+this.escape(defaultValue)+')'},plus:function(left,right){return'plus('+left+','+right+')'},return_:function(id){this.current().body.push('return ',id,';')},if_:function(test,alternate,consequent){if(test===!0){alternate()}else{var body=this.current().body;body.push('if(',test,'){');alternate();body.push('}');if(consequent){body.push('else{');consequent();body.push('}')}}},not:function(expression){return'!('+expression+')'},isNull:function(expression){return expression+'==null'},notNull:function(expression){return expression+'!=null'},nonComputedMember:function(left,right){var SAFE_IDENTIFIER=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;var UNSAFE_CHARACTERS=/[^$_a-zA-Z0-9]/g;if(SAFE_IDENTIFIER.test(right)){return left+'.'+right}else{return left+'["'+right.replace(UNSAFE_CHARACTERS,this.stringEscapeFn)+'"]'}},computedMember:function(left,right){return left+'['+right+']'},member:function(left,right,computed){if(computed)return this.computedMember(left,right);return this.nonComputedMember(left,right)},getStringValue:function(item){this.assign(item,'getStringValue('+item+')')},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return'\\u'+('0000'+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return'\''+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+'\'';if(isNumber(value))return value.toString();if(value===!0)return'true';if(value===!1)return'false';if(value===null)return'null';if(typeof value==='undefined')return'undefined';throw $parseMinErr('esc','IMPOSSIBLE')},nextId:function(skip,init){var id='v'+(this.state.nextId++);if(!skip){this.current().vars.push(id+(init?'='+init:''))}
return id},current:function(){return this.state[this.state.computing]}};function ASTInterpreter($filter){this.$filter=$filter}
ASTInterpreter.prototype={compile:function(ast){var self=this;findConstantAndWatchExpressions(ast,self.$filter);var assignable;var assign;if((assignable=assignableAST(ast))){assign=this.recurse(assignable)}
var toWatch=getInputs(ast.body);var inputs;if(toWatch){inputs=[];forEach(toWatch,function(watch,key){var input=self.recurse(watch);input.isPure=watch.isPure;watch.input=input;inputs.push(input);watch.watchId=key})}
var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=ast.body.length===0?noop:ast.body.length===1?expressions[0]:function(scope,locals){var lastValue;forEach(expressions,function(exp){lastValue=exp(scope,locals)});return lastValue};if(assign){fn.assign=function(scope,value,locals){return assign(scope,locals,value)}}
if(inputs){fn.inputs=inputs}
return fn},recurse:function(ast,context,create){var left,right,self=this,args;if(ast.input){return this.inputs(ast.input,ast.watchId)}
switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:right=this.recurse(ast.argument);return this['unary'+ast.operator](right,context);case AST.BinaryExpression:left=this.recurse(ast.left);right=this.recurse(ast.right);return this['binary'+ast.operator](left,right,context);case AST.LogicalExpression:left=this.recurse(ast.left);right=this.recurse(ast.right);return this['binary'+ast.operator](left,right,context);case AST.ConditionalExpression:return this['ternary?:'](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return self.identifier(ast.name,context,create);case AST.MemberExpression:left=this.recurse(ast.object,!1,!!create);if(!ast.computed){right=ast.property.name}
if(ast.computed)right=this.recurse(ast.property);return ast.computed?this.computedMember(left,right,context,create):this.nonComputedMember(left,right,context,create);case AST.CallExpression:args=[];forEach(ast.arguments,function(expr){args.push(self.recurse(expr))});if(ast.filter)right=this.$filter(ast.callee.name);if(!ast.filter)right=this.recurse(ast.callee,!0);return ast.filter?function(scope,locals,assign,inputs){var values=[];for(var i=0;i<args.length;++i){values.push(args[i](scope,locals,assign,inputs))}
var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var rhs=right(scope,locals,assign,inputs);var value;if(rhs.value!=null){var values=[];for(var i=0;i<args.length;++i){values.push(args[i](scope,locals,assign,inputs))}
value=rhs.value.apply(rhs.context,values)}
return context?{value:value}:value};case AST.AssignmentExpression:left=this.recurse(ast.left,!0,1);right=this.recurse(ast.right);return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);lhs.context[lhs.name]=rhs;return context?{value:rhs}:rhs};case AST.ArrayExpression:args=[];forEach(ast.elements,function(expr){args.push(self.recurse(expr))});return function(scope,locals,assign,inputs){var value=[];for(var i=0;i<args.length;++i){value.push(args[i](scope,locals,assign,inputs))}
return context?{value:value}:value};case AST.ObjectExpression:args=[];forEach(ast.properties,function(property){if(property.computed){args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)})}else{args.push({key:property.key.type===AST.Identifier?property.key.name:(''+property.key.value),computed:!1,value:self.recurse(property.value)})}});return function(scope,locals,assign,inputs){var value={};for(var i=0;i<args.length;++i){if(args[i].computed){value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs)}else{value[args[i].key]=args[i].value(scope,locals,assign,inputs)}}
return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},'unary+':function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);if(isDefined(arg)){arg=+arg}else{arg=0}
return context?{value:arg}:arg}},'unary-':function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);if(isDefined(arg)){arg=-arg}else{arg=-0}
return context?{value:arg}:arg}},'unary!':function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary+':function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);var arg=plusFn(lhs,rhs);return context?{value:arg}:arg}},'binary-':function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);var arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},'binary*':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary/':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary%':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary===':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary!==':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary==':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary!=':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary<':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary>':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary<=':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary>=':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary&&':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'binary||':function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},'ternary?:':function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,context,create){return function(scope,locals,assign,inputs){var base=locals&&(name in locals)?locals:scope;if(create&&create!==1&&base&&base[name]==null){base[name]={}}
var value=base?base[name]:undefined;if(context){return{context:base,name:name,value:value}}else{return value}}},computedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs;var value;if(lhs!=null){rhs=right(scope,locals,assign,inputs);rhs=getStringValue(rhs);if(create&&create!==1){if(lhs&&!(lhs[rhs])){lhs[rhs]={}}}
value=lhs[rhs]}
if(context){return{context:lhs,name:rhs,value:value}}else{return value}}},nonComputedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);if(create&&create!==1){if(lhs&&lhs[right]==null){lhs[right]={}}}
var value=lhs!=null?lhs[right]:undefined;if(context){return{context:lhs,name:right,value:value}}else{return value}}},inputs:function(input,watchId){return function(scope,value,locals,inputs){if(inputs)return inputs[watchId];return input(scope,value,locals)}}};function Parser(lexer,$filter,options){this.ast=new AST(lexer,options);this.astCompiler=options.csp?new ASTInterpreter($filter):new ASTCompiler($filter)}
Parser.prototype={constructor:Parser,parse:function(text){var ast=this.getAst(text);var fn=this.astCompiler.compile(ast.ast);fn.literal=isLiteral(ast.ast);fn.constant=isConstant(ast.ast);fn.oneTime=ast.oneTime;return fn},getAst:function(exp){var oneTime=!1;exp=exp.trim();if(exp.charAt(0)===':'&&exp.charAt(1)===':'){oneTime=!0;exp=exp.substring(2)}
return{ast:this.ast.ast(exp),oneTime:oneTime}}};function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}
function $ParseProvider(){var cache=createMap();var literals={'true':!0,'false':!1,'null':null,'undefined':undefined};var identStart,identContinue;this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue};this.setIdentifierFns=function(identifierStart,identifierContinue){identStart=identifierStart;identContinue=identifierContinue;return this};this.$get=['$filter',function($filter){var noUnsafeEval=csp().noUnsafeEval;var $parseOptions={csp:noUnsafeEval,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue};$parse.$$getAst=$$getAst;return $parse;function $parse(exp,interceptorFn){var parsedExpression,cacheKey;switch(typeof exp){case 'string':exp=exp.trim();cacheKey=exp;parsedExpression=cache[cacheKey];if(!parsedExpression){var lexer=new Lexer($parseOptions);var parser=new Parser(lexer,$filter,$parseOptions);parsedExpression=parser.parse(exp);cache[cacheKey]=addWatchDelegate(parsedExpression)}
return addInterceptor(parsedExpression,interceptorFn);case 'function':return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}
function $$getAst(exp){var lexer=new Lexer($parseOptions);var parser=new Parser(lexer,$filter,$parseOptions);return parser.getAst(exp).ast}
function expressionInputDirtyCheck(newValue,oldValueOfValue,compareObjectIdentity){if(newValue==null||oldValueOfValue==null){return newValue===oldValueOfValue}
if(typeof newValue==='object'){newValue=getValueOf(newValue);if(typeof newValue==='object'&&!compareObjectIdentity){return!1}}
return newValue===oldValueOfValue||(newValue!==newValue&&oldValueOfValue!==oldValueOfValue)}
function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var inputExpressions=parsedExpression.inputs;var lastResult;if(inputExpressions.length===1){var oldInputValueOf=expressionInputDirtyCheck;inputExpressions=inputExpressions[0];return scope.$watch(function expressionInputWatch(scope){var newInputValue=inputExpressions(scope);if(!expressionInputDirtyCheck(newInputValue,oldInputValueOf,inputExpressions.isPure)){lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]);oldInputValueOf=newInputValue&&getValueOf(newInputValue)}
return lastResult},listener,objectEquality,prettyPrintExpression)}
var oldInputValueOfValues=[];var oldInputValues=[];for(var i=0,ii=inputExpressions.length;i<ii;i++){oldInputValueOfValues[i]=expressionInputDirtyCheck;oldInputValues[i]=null}
return scope.$watch(function expressionInputsWatch(scope){var changed=!1;for(var i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);if(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i],inputExpressions[i].isPure))){oldInputValues[i]=newInputValue;oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue)}}
if(changed){lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)}
return lastResult},listener,objectEquality,prettyPrintExpression)}
function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var isDone=parsedExpression.literal?isAllDefined:isDefined;var unwatch,lastValue;var exp=parsedExpression.$$intercepted||parsedExpression;var post=parsedExpression.$$interceptor||identity;var useInputs=parsedExpression.inputs&&!exp.inputs;oneTimeWatch.literal=parsedExpression.literal;oneTimeWatch.constant=parsedExpression.constant;oneTimeWatch.inputs=parsedExpression.inputs;addWatchDelegate(oneTimeWatch);unwatch=scope.$watch(oneTimeWatch,listener,objectEquality,prettyPrintExpression);return unwatch;function unwatchIfDone(){if(isDone(lastValue)){unwatch()}}
function oneTimeWatch(scope,locals,assign,inputs){lastValue=useInputs&&inputs?inputs[0]:exp(scope,locals,assign,inputs);if(isDone(lastValue)){scope.$$postDigest(unwatchIfDone)}
return post(lastValue)}}
function isAllDefined(value){var allDefined=!0;forEach(value,function(val){if(!isDefined(val))allDefined=!1});return allDefined}
function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch(function constantWatch(scope){unwatch();return parsedExpression(scope)},listener,objectEquality);return unwatch}
function addWatchDelegate(parsedExpression){if(parsedExpression.constant){parsedExpression.$$watchDelegate=constantWatchDelegate}else if(parsedExpression.oneTime){parsedExpression.$$watchDelegate=oneTimeWatchDelegate}else if(parsedExpression.inputs){parsedExpression.$$watchDelegate=inputsWatchDelegate}
return parsedExpression}
function chainInterceptors(first,second){function chainedInterceptor(value){return second(first(value))}
chainedInterceptor.$stateful=first.$stateful||second.$stateful;chainedInterceptor.$$pure=first.$$pure&&second.$$pure;return chainedInterceptor}
function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;if(parsedExpression.$$interceptor){interceptorFn=chainInterceptors(parsedExpression.$$interceptor,interceptorFn);parsedExpression=parsedExpression.$$intercepted}
var useInputs=!1;var fn=function interceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value)};fn.$$intercepted=parsedExpression;fn.$$interceptor=interceptorFn;fn.literal=parsedExpression.literal;fn.oneTime=parsedExpression.oneTime;fn.constant=parsedExpression.constant;if(!interceptorFn.$stateful){useInputs=!parsedExpression.inputs;fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression];if(!interceptorFn.$$pure){fn.inputs=fn.inputs.map(function(e){if(e.isPure===PURITY_RELATIVE){return function depurifier(s){return e(s)}}
return e})}}
return addWatchDelegate(fn)}}]}
function $QProvider(){var errorOnUnhandledRejections=!0;this.$get=['$rootScope','$exceptionHandler',function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler,errorOnUnhandledRejections)}];this.errorOnUnhandledRejections=function(value){if(isDefined(value)){errorOnUnhandledRejections=value;return this}else{return errorOnUnhandledRejections}}}
function $$QProvider(){var errorOnUnhandledRejections=!0;this.$get=['$browser','$exceptionHandler',function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler,errorOnUnhandledRejections)}];this.errorOnUnhandledRejections=function(value){if(isDefined(value)){errorOnUnhandledRejections=value;return this}else{return errorOnUnhandledRejections}}}
function qFactory(nextTick,exceptionHandler,errorOnUnhandledRejections){var $qMinErr=minErr('$q',TypeError);var queueSize=0;var checkQueue=[];function defer(){return new Deferred()}
function Deferred(){var promise=this.promise=new Promise();this.resolve=function(val){resolvePromise(promise,val)};this.reject=function(reason){rejectPromise(promise,reason)};this.notify=function(progress){notifyPromise(promise,progress)}}
function Promise(){this.$$state={status:0}}
extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack)){return this}
var result=new Promise();this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]);if(this.$$state.status>0)scheduleProcessQueue(this.$$state);return result},'catch':function(callback){return this.then(null,callback)},'finally':function(callback,progressBack){return this.then(function(value){return handleCallback(value,resolve,callback)},function(error){return handleCallback(error,reject,callback)},progressBack)}});function processQueue(state){var fn,promise,pending;pending=state.pending;state.processScheduled=!1;state.pending=undefined;try{for(var i=0,ii=pending.length;i<ii;++i){markQStateExceptionHandled(state);promise=pending[i][0];fn=pending[i][state.status];try{if(isFunction(fn)){resolvePromise(promise,fn(state.value))}else if(state.status===1){resolvePromise(promise,state.value)}else{rejectPromise(promise,state.value)}}catch(e){rejectPromise(promise,e);if(e&&e.$$passToExceptionHandler===!0){exceptionHandler(e)}}}}finally{--queueSize;if(errorOnUnhandledRejections&&queueSize===0){nextTick(processChecks)}}}
function processChecks(){while(!queueSize&&checkQueue.length){var toCheck=checkQueue.shift();if(!isStateExceptionHandled(toCheck)){markQStateExceptionHandled(toCheck);var errorMessage='Possibly unhandled rejection: '+toDebugString(toCheck.value);if(isError(toCheck.value)){exceptionHandler(toCheck.value,errorMessage)}else{exceptionHandler(errorMessage)}}}}
function scheduleProcessQueue(state){if(errorOnUnhandledRejections&&!state.pending&&state.status===2&&!isStateExceptionHandled(state)){if(queueSize===0&&checkQueue.length===0){nextTick(processChecks)}
checkQueue.push(state)}
if(state.processScheduled||!state.pending)return;state.processScheduled=!0;++queueSize;nextTick(function(){processQueue(state)})}
function resolvePromise(promise,val){if(promise.$$state.status)return;if(val===promise){$$reject(promise,$qMinErr('qcycle','Expected promise to be resolved with value other than itself \'{0}\'',val))}else{$$resolve(promise,val)}}
function $$resolve(promise,val){var then;var done=!1;try{if(isObject(val)||isFunction(val))then=val.then;if(isFunction(then)){promise.$$state.status=-1;then.call(val,doResolve,doReject,doNotify)}else{promise.$$state.value=val;promise.$$state.status=1;scheduleProcessQueue(promise.$$state)}}catch(e){doReject(e)}
function doResolve(val){if(done)return;done=!0;$$resolve(promise,val)}
function doReject(val){if(done)return;done=!0;$$reject(promise,val)}
function doNotify(progress){notifyPromise(promise,progress)}}
function rejectPromise(promise,reason){if(promise.$$state.status)return;$$reject(promise,reason)}
function $$reject(promise,reason){promise.$$state.value=reason;promise.$$state.status=2;scheduleProcessQueue(promise.$$state)}
function notifyPromise(promise,progress){var callbacks=promise.$$state.pending;if((promise.$$state.status<=0)&&callbacks&&callbacks.length){nextTick(function(){var callback,result;for(var i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0];callback=callbacks[i][3];try{notifyPromise(result,isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}}
function reject(reason){var result=new Promise();rejectPromise(result,reason);return result}
function handleCallback(value,resolver,callback){var callbackOutput=null;try{if(isFunction(callback))callbackOutput=callback();}catch(e){return reject(e)}
if(isPromiseLike(callbackOutput)){return callbackOutput.then(function(){return resolver(value)},reject)}else{return resolver(value)}}
function when(value,callback,errback,progressBack){var result=new Promise();resolvePromise(result,value);return result.then(callback,errback,progressBack)}
var resolve=when;function all(promises){var result=new Promise(),counter=0,results=isArray(promises)?[]:{};forEach(promises,function(promise,key){counter++;when(promise).then(function(value){results[key]=value;if(!(--counter))resolvePromise(result,results);},function(reason){rejectPromise(result,reason)})});if(counter===0){resolvePromise(result,results)}
return result}
function race(promises){var deferred=defer();forEach(promises,function(promise){when(promise).then(deferred.resolve,deferred.reject)});return deferred.promise}
function $Q(resolver){if(!isFunction(resolver)){throw $qMinErr('norslvr','Expected resolverFn, got \'{0}\'',resolver)}
var promise=new Promise();function resolveFn(value){resolvePromise(promise,value)}
function rejectFn(reason){rejectPromise(promise,reason)}
resolver(resolveFn,rejectFn);return promise}
$Q.prototype=Promise.prototype;$Q.defer=defer;$Q.reject=reject;$Q.when=when;$Q.resolve=resolve;$Q.all=all;$Q.race=race;return $Q}
function isStateExceptionHandled(state){return!!state.pur}
function markQStateExceptionHandled(state){state.pur=!0}
function markQExceptionHandled(q){if(q.$$state){markQStateExceptionHandled(q.$$state)}}
function $$RAFProvider(){this.$get=['$window','$timeout',function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame;var cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame;var rafSupported=!!requestAnimationFrame;var raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};raf.supported=rafSupported;return raf}]}
function $RootScopeProvider(){var TTL=10;var $rootScopeMinErr=minErr('$rootScope');var lastDirtyWatch=null;var applyAsyncId=null;this.digestTtl=function(value){if(arguments.length){TTL=value}
return TTL};function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=nextUid();this.$$ChildScope=null;this.$$suspended=!1}
ChildScope.prototype=parent;return ChildScope}
this.$get=['$exceptionHandler','$parse','$browser',function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}
function cleanUpScope($scope){if(msie===9){if($scope.$$childHead){cleanUpScope($scope.$$childHead)}
if($scope.$$nextSibling){cleanUpScope($scope.$$nextSibling)}}
$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}
function Scope(){this.$id=nextUid();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$suspended=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}
Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;parent=parent||this;if(isolate){child=new Scope();child.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=createChildScopeClass(this)}
child=new this.$$ChildScope()}
child.$parent=parent;child.$$prevSibling=parent.$$childTail;if(parent.$$childHead){parent.$$childTail.$$nextSibling=child;parent.$$childTail=child}else{parent.$$childHead=parent.$$childTail=child}
if(isolate||parent!==this)child.$on('$destroy',destroyChildScope);return child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);var fn=isFunction(listener)?listener:noop;if(get.$$watchDelegate){return get.$$watchDelegate(this,fn,objectEquality,get,watchExp)}
var scope=this,array=scope.$$watchers,watcher={fn:fn,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};lastDirtyWatch=null;if(!array){array=scope.$$watchers=[];array.$$digestWatchIndex=-1}
array.unshift(watcher);array.$$digestWatchIndex++;incrementWatchersCount(this,1);return function deregisterWatch(){var index=arrayRemove(array,watcher);if(index>=0){incrementWatchersCount(scope,-1);if(index<array.$$digestWatchIndex){array.$$digestWatchIndex--}}
lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length);var newValues=new Array(watchExpressions.length);var deregisterFns=[];var self=this;var changeReactionScheduled=!1;var firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;self.$evalAsync(function(){if(shouldCall)listener(newValues,newValues,self);});return function deregisterWatchGroup(){shouldCall=!1}}
if(watchExpressions.length===1){return this.$watch(watchExpressions[0],function watchGroupAction(value,oldValue,scope){newValues[0]=value;oldValues[0]=oldValue;listener(newValues,(value===oldValue)?newValues:oldValues,scope)})}
forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function watchGroupSubAction(value){newValues[i]=value;if(!changeReactionScheduled){changeReactionScheduled=!0;self.$evalAsync(watchGroupAction)}});deregisterFns.push(unwatchFn)});function watchGroupAction(){changeReactionScheduled=!1;try{if(firstRun){firstRun=!1;listener(newValues,newValues,self)}else{listener(newValues,oldValues,self)}}finally{for(var i=0;i<watchExpressions.length;i++){oldValues[i]=newValues[i]}}}
return function deregisterWatchGroup(){while(deregisterFns.length){deregisterFns.shift()()}}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$$pure=$parse(obj).literal;$watchCollectionInterceptor.$stateful=!$watchCollectionInterceptor.$$pure;var self=this;var newValue;var oldValue;var veryOldValue;var trackVeryOldValue=(listener.length>1);var changeDetected=0;var changeDetector=$parse(obj,$watchCollectionInterceptor);var internalArray=[];var internalObject={};var initRun=!0;var oldLength=0;function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(isUndefined(newValue))return;if(!isObject(newValue)){if(oldValue!==newValue){oldValue=newValue;changeDetected++}}else if(isArrayLike(newValue)){if(oldValue!==internalArray){oldValue=internalArray;oldLength=oldValue.length=0;changeDetected++}
newLength=newValue.length;if(oldLength!==newLength){changeDetected++;oldValue.length=oldLength=newLength}
for(var i=0;i<newLength;i++){oldItem=oldValue[i];newItem=newValue[i];bothNaN=(oldItem!==oldItem)&&(newItem!==newItem);if(!bothNaN&&(oldItem!==newItem)){changeDetected++;oldValue[i]=newItem}}}else{if(oldValue!==internalObject){oldValue=internalObject={};oldLength=0;changeDetected++}
newLength=0;for(key in newValue){if(hasOwnProperty.call(newValue,key)){newLength++;newItem=newValue[key];oldItem=oldValue[key];if(key in oldValue){bothNaN=(oldItem!==oldItem)&&(newItem!==newItem);if(!bothNaN&&(oldItem!==newItem)){changeDetected++;oldValue[key]=newItem}}else{oldLength++;oldValue[key]=newItem;changeDetected++}}}
if(oldLength>newLength){changeDetected++;for(key in oldValue){if(!hasOwnProperty.call(newValue,key)){oldLength--;delete oldValue[key]}}}}
return changeDetected}
function $watchCollectionAction(){if(initRun){initRun=!1;listener(newValue,newValue,self)}else{listener(newValue,veryOldValue,self)}
if(trackVeryOldValue){if(!isObject(newValue)){veryOldValue=newValue}else if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++){veryOldValue[i]=newValue[i]}}else{veryOldValue={};for(var key in newValue){if(hasOwnProperty.call(newValue,key)){veryOldValue[key]=newValue[key]}}}}}
return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,fn,get,watchers,dirty,ttl=TTL,next,current,target=asyncQueue.length?$rootScope:this,watchLog=[],logIdx,asyncTask;beginPhase('$digest');$browser.$$checkUrlChange();if(this===$rootScope&&applyAsyncId!==null){$browser.defer.cancel(applyAsyncId);flushApplyAsync()}
lastDirtyWatch=null;do{dirty=!1;current=target;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{asyncTask=asyncQueue[asyncQueuePosition];fn=asyncTask.fn;fn(asyncTask.scope,asyncTask.locals)}catch(e){$exceptionHandler(e)}
lastDirtyWatch=null}
asyncQueue.length=0;traverseScopesLoop:do{if((watchers=!current.$$suspended&&current.$$watchers)){watchers.$$digestWatchIndex=watchers.length;while(watchers.$$digestWatchIndex--){try{watch=watchers[watchers.$$digestWatchIndex];if(watch){get=watch.get;if((value=get(current))!==(last=watch.last)&&!(watch.eq?equals(value,last):(isNumberNaN(value)&&isNumberNaN(last)))){dirty=!0;lastDirtyWatch=watch;watch.last=watch.eq?copy(value,null):value;fn=watch.fn;fn(value,((last===initWatchVal)?value:last),current);if(ttl<5){logIdx=4-ttl;if(!watchLog[logIdx])watchLog[logIdx]=[];watchLog[logIdx].push({msg:isFunction(watch.exp)?'fn: '+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last})}}else if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}}catch(e){$exceptionHandler(e)}}}
if(!(next=((!current.$$suspended&&current.$$watchersCount&&current.$$childHead)||(current!==target&&current.$$nextSibling)))){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent}}}while((current=next));if((dirty||asyncQueue.length)&&!(ttl--)){clearPhase();throw $rootScopeMinErr('infdig','{0} $digest() iterations reached. Aborting!\n'+'Watchers fired in the last 5 iterations: {1}',TTL,watchLog)}}while(dirty||asyncQueue.length);clearPhase();while(postDigestQueuePosition<postDigestQueue.length){try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}}
postDigestQueue.length=postDigestQueuePosition=0;$browser.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(this.$$destroyed)return;var parent=this.$parent;this.$broadcast('$destroy');this.$$destroyed=!0;if(this===$rootScope){$browser.$$applicationDestroyed()}
incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount){decrementListenerCount(this,this.$$listenerCount[eventName],eventName)}
if(parent&&parent.$$childHead===this)parent.$$childHead=this.$$nextSibling;if(parent&&parent.$$childTail===this)parent.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop;this.$on=this.$watch=this.$watchGroup=function(){return noop};this.$$listeners={};this.$$nextSibling=null;cleanUpScope(this)},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){if(!$rootScope.$$phase&&!asyncQueue.length){$browser.defer(function(){if(asyncQueue.length){$rootScope.$digest()}},null,'$evalAsync')}
asyncQueue.push({scope:this,fn:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase('$apply');try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){$exceptionHandler(e);throw e}}},$applyAsync:function(expr){var scope=this;if(expr){applyAsyncQueue.push($applyAsyncExpression)}
expr=$parse(expr);scheduleApplyAsync();function $applyAsyncExpression(){scope.$eval(expr)}},$on:function(name,listener){var namedListeners=this.$$listeners[name];if(!namedListeners){this.$$listeners[name]=namedListeners=[]}
namedListeners.push(listener);var current=this;do{if(!current.$$listenerCount[name]){current.$$listenerCount[name]=0}
current.$$listenerCount[name]++}while((current=current.$parent));var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);if(indexOfListener!==-1){delete namedListeners[indexOfListener];decrementListenerCount(self,1,name)}}},$emit:function(name,args){var empty=[],namedListeners,scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1),i,length;do{namedListeners=scope.$$listeners[name]||empty;event.currentScope=scope;for(i=0,length=namedListeners.length;i<length;i++){if(!namedListeners[i]){namedListeners.splice(i,1);i--;length--;continue}
try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}}
if(stopPropagation){break}
scope=scope.$parent}while(scope);event.currentScope=null;return event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;var listenerArgs=concat([event],arguments,1),listeners,i,length;while((current=next)){event.currentScope=current;listeners=current.$$listeners[name]||[];for(i=0,length=listeners.length;i<length;i++){if(!listeners[i]){listeners.splice(i,1);i--;length--;continue}
try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}}
if(!(next=((current.$$listenerCount[name]&&current.$$childHead)||(current!==target&&current.$$nextSibling)))){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent}}}
event.currentScope=null;return event}};var $rootScope=new Scope();var asyncQueue=$rootScope.$$asyncQueue=[];var postDigestQueue=$rootScope.$$postDigestQueue=[];var applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];var postDigestQueuePosition=0;return $rootScope;function beginPhase(phase){if($rootScope.$$phase){throw $rootScopeMinErr('inprog','{0} already in progress',$rootScope.$$phase)}
$rootScope.$$phase=phase}
function clearPhase(){$rootScope.$$phase=null}
function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while((current=current.$parent));}
function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count;if(current.$$listenerCount[name]===0){delete current.$$listenerCount[name]}}while((current=current.$parent));}
function initWatchVal(){}
function flushApplyAsync(){while(applyAsyncQueue.length){try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}}
applyAsyncId=null}
function scheduleApplyAsync(){if(applyAsyncId===null){applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)},null,'$applyAsync')}}}]}
function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|s?ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){aHrefSanitizationWhitelist=regexp;return this}
return aHrefSanitizationWhitelist};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){imgSrcSanitizationWhitelist=regexp;return this}
return imgSrcSanitizationWhitelist};this.$get=function(){return function sanitizeUri(uri,isMediaUrl){var regex=isMediaUrl?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;var normalizedVal=urlResolve(uri&&uri.trim()).href;if(normalizedVal!==''&&!normalizedVal.match(regex)){return'unsafe:'+normalizedVal}
return uri}}}
var $sceMinErr=minErr('$sce');var SCE_CONTEXTS={HTML:'html',CSS:'css',MEDIA_URL:'mediaUrl',URL:'url',RESOURCE_URL:'resourceUrl',JS:'js'};var UNDERSCORE_LOWERCASE_REGEXP=/_([a-z])/g;function snakeToCamel(name){return name.replace(UNDERSCORE_LOWERCASE_REGEXP,fnCamelCaseReplace)}
function adjustMatcher(matcher){if(matcher==='self'){return matcher}else if(isString(matcher)){if(matcher.indexOf('***')>-1){throw $sceMinErr('iwcard','Illegal sequence *** in string matcher.  String: {0}',matcher)}
matcher=escapeForRegexp(matcher).replace(/\\\*\\\*/g,'.*').replace(/\\\*/g,'[^:/.?&;]*');return new RegExp('^'+matcher+'$')}else if(isRegExp(matcher)){return new RegExp('^'+matcher.source+'$')}else{throw $sceMinErr('imatcher','Matchers may only be "self", string patterns or RegExp objects')}}
function adjustMatchers(matchers){var adjustedMatchers=[];if(isDefined(matchers)){forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))})}
return adjustedMatchers}
function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=['self'],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){if(arguments.length){resourceUrlWhitelist=adjustMatchers(value)}
return resourceUrlWhitelist};this.resourceUrlBlacklist=function(value){if(arguments.length){resourceUrlBlacklist=adjustMatchers(value)}
return resourceUrlBlacklist};this.$get=['$injector','$$sanitizeUri',function($injector,$$sanitizeUri){var htmlSanitizer=function htmlSanitizer(html){throw $sceMinErr('unsafe','Attempting to use an unsafe value in a safe context.')};if($injector.has('$sanitize')){htmlSanitizer=$injector.get('$sanitize')}
function matchUrl(matcher,parsedUrl){if(matcher==='self'){return urlIsSameOrigin(parsedUrl)||urlIsSameOriginAsBaseUrl(parsedUrl)}else{return!!matcher.exec(parsedUrl.href)}}
function isResourceUrlAllowedByPolicy(url){var parsedUrl=urlResolve(url.toString());var i,n,allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++){if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}}
if(allowed){for(i=0,n=resourceUrlBlacklist.length;i<n;i++){if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}}}
return allowed}
function generateHolderType(Base){var holderType=function TrustedValueHolderType(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};if(Base){holderType.prototype=new Base()}
holderType.prototype.valueOf=function sceValueOf(){return this.$$unwrapTrustedValue()};holderType.prototype.toString=function sceToString(){return this.$$unwrapTrustedValue().toString()};return holderType}
var trustedValueHolderBase=generateHolderType(),byType={};byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.MEDIA_URL]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.URL]=generateHolderType(byType[SCE_CONTEXTS.MEDIA_URL]);byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]);function trustAs(type,trustedValue){var Constructor=(byType.hasOwnProperty(type)?byType[type]:null);if(!Constructor){throw $sceMinErr('icontext','Attempted to trust a value in invalid context. Context: {0}; Value: {1}',type,trustedValue)}
if(trustedValue===null||isUndefined(trustedValue)||trustedValue===''){return trustedValue}
if(typeof trustedValue!=='string'){throw $sceMinErr('itype','Attempted to trust a non-string value in a content requiring a string: Context: {0}',type)}
return new Constructor(trustedValue)}
function valueOf(maybeTrusted){if(maybeTrusted instanceof trustedValueHolderBase){return maybeTrusted.$$unwrapTrustedValue()}else{return maybeTrusted}}
function getTrusted(type,maybeTrusted){if(maybeTrusted===null||isUndefined(maybeTrusted)||maybeTrusted===''){return maybeTrusted}
var constructor=(byType.hasOwnProperty(type)?byType[type]:null);if(constructor&&maybeTrusted instanceof constructor){return maybeTrusted.$$unwrapTrustedValue()}
if(isFunction(maybeTrusted.$$unwrapTrustedValue)){maybeTrusted=maybeTrusted.$$unwrapTrustedValue()}
if(type===SCE_CONTEXTS.MEDIA_URL||type===SCE_CONTEXTS.URL){return $$sanitizeUri(maybeTrusted.toString(),type===SCE_CONTEXTS.MEDIA_URL)}else if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted)){return maybeTrusted}else{throw $sceMinErr('insecurl','Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}',maybeTrusted.toString())}}else if(type===SCE_CONTEXTS.HTML){return htmlSanitizer(maybeTrusted)}
throw $sceMinErr('unsafe','Attempting to use an unsafe value in a safe context.')}
return{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}
function $SceProvider(){var enabled=!0;this.enabled=function(value){if(arguments.length){enabled=!!value}
return enabled};this.$get=['$parse','$sceDelegate',function($parse,$sceDelegate){if(enabled&&msie<8){throw $sceMinErr('iequirks','Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks '+'mode.  You can fix this by adding the text <!doctype html> to the top of your HTML '+'document.  See http://docs.angularjs.org/api/ng.$sce for more information.')}
var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled};sce.trustAs=$sceDelegate.trustAs;sce.getTrusted=$sceDelegate.getTrusted;sce.valueOf=$sceDelegate.valueOf;if(!enabled){sce.trustAs=sce.getTrusted=function(type,value){return value};sce.valueOf=identity}
sce.parseAs=function sceParseAs(type,expr){var parsed=$parse(expr);if(parsed.literal&&parsed.constant){return parsed}else{return $parse(expr,function(value){return sce.getTrusted(type,value)})}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[snakeToCamel('parse_as_'+lName)]=function(expr){return parse(enumValue,expr)};sce[snakeToCamel('get_trusted_'+lName)]=function(value){return getTrusted(enumValue,value)};sce[snakeToCamel('trust_as_'+lName)]=function(value){return trustAs(enumValue,value)}});return sce}]}
function $SnifferProvider(){this.$get=['$window','$document',function($window,$document){var eventSupport={},isNw=$window.nw&&$window.nw.process,isChromePackagedApp=!isNw&&$window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id),hasHistoryPushState=!isChromePackagedApp&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){transitions=!!('transition' in bodyStyle||'webkitTransition' in bodyStyle);animations=!!('animation' in bodyStyle||'webkitAnimation' in bodyStyle)}
return{history:!!(hasHistoryPushState&&!(android<4)&&!boxee),hasEvent:function(event){if(event==='input'&&msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement('div');eventSupport[event]='on'+event in divElm}
return eventSupport[event]},csp:csp(),transitions:transitions,animations:animations,android:android}}]}
function $$TaskTrackerFactoryProvider(){this.$get=valueFn(function(log){return new TaskTracker(log)})}
function TaskTracker(log){var self=this;var taskCounts={};var taskCallbacks=[];var ALL_TASKS_TYPE=self.ALL_TASKS_TYPE='$$all$$';var DEFAULT_TASK_TYPE=self.DEFAULT_TASK_TYPE='$$default$$';self.completeTask=completeTask;self.incTaskCount=incTaskCount;self.notifyWhenNoPendingTasks=notifyWhenNoPendingTasks;function completeTask(fn,taskType){taskType=taskType||DEFAULT_TASK_TYPE;try{fn()}finally{decTaskCount(taskType);var countForType=taskCounts[taskType];var countForAll=taskCounts[ALL_TASKS_TYPE];if(!countForAll||!countForType){var getNextCallback=!countForAll?getLastCallback:getLastCallbackForType;var nextCb;while((nextCb=getNextCallback(taskType))){try{nextCb()}catch(e){log.error(e)}}}}}
function decTaskCount(taskType){taskType=taskType||DEFAULT_TASK_TYPE;if(taskCounts[taskType]){taskCounts[taskType]--;taskCounts[ALL_TASKS_TYPE]--}}
function getLastCallback(){var cbInfo=taskCallbacks.pop();return cbInfo&&cbInfo.cb}
function getLastCallbackForType(taskType){for(var i=taskCallbacks.length-1;i>=0;--i){var cbInfo=taskCallbacks[i];if(cbInfo.type===taskType){taskCallbacks.splice(i,1);return cbInfo.cb}}}
function incTaskCount(taskType){taskType=taskType||DEFAULT_TASK_TYPE;taskCounts[taskType]=(taskCounts[taskType]||0)+1;taskCounts[ALL_TASKS_TYPE]=(taskCounts[ALL_TASKS_TYPE]||0)+1}
function notifyWhenNoPendingTasks(callback,taskType){taskType=taskType||ALL_TASKS_TYPE;if(!taskCounts[taskType]){callback()}else{taskCallbacks.push({type:taskType,cb:callback})}}}
var $templateRequestMinErr=minErr('$templateRequest');function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){if(val){httpOptions=val;return this}
return httpOptions};this.$get=['$exceptionHandler','$templateCache','$http','$q','$sce',function($exceptionHandler,$templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++;if(!isString(tpl)||isUndefined($templateCache.get(tpl))){tpl=$sce.getTrustedResourceUrl(tpl)}
var transformResponse=$http.defaults&&$http.defaults.transformResponse;if(isArray(transformResponse)){transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform})}else if(transformResponse===defaultHttpResponseTransform){transformResponse=null}
return $http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data)},handleError);function handleError(resp){if(!ignoreRequestError){resp=$templateRequestMinErr('tpload','Failed to load template: {0} (HTTP status: {1} {2})',tpl,resp.status,resp.statusText);$exceptionHandler(resp)}
return $q.reject(resp)}}
handleRequestFn.totalPendingRequests=0;return handleRequestFn}]}
function $$TestabilityProvider(){this.$get=['$rootScope','$browser','$location',function($rootScope,$browser,$location){var testability={};testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName('ng-binding');var matches=[];forEach(bindings,function(binding){var dataBinding=angular.element(binding).data('$binding');if(dataBinding){forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp('(^|\\s)'+escapeForRegexp(expression)+'(\\s|\\||$)');if(matcher.test(bindingName)){matches.push(binding)}}else{if(bindingName.indexOf(expression)!==-1){matches.push(binding)}}})}});return matches};testability.findModels=function(element,expression,opt_exactMatch){var prefixes=['ng-','data-ng-','ng\\:'];for(var p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?'=':'*=';var selector='['+prefixes[p]+'model'+attributeEquals+'"'+expression+'"]';var elements=element.querySelectorAll(selector);if(elements.length){return elements}}};testability.getLocation=function(){return $location.url()};testability.setLocation=function(url){if(url!==$location.url()){$location.url(url);$rootScope.$digest()}};testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)};return testability}]}
var $timeoutMinErr=minErr('$timeout');function $TimeoutProvider(){this.$get=['$rootScope','$browser','$q','$$q','$exceptionHandler',function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){if(!isFunction(fn)){invokeApply=delay;delay=fn;fn=noop}
var args=sliceArgs(arguments,3),skipApply=(isDefined(invokeApply)&&!invokeApply),deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise,timeoutId;timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e);$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}
if(!skipApply)$rootScope.$apply();},delay,'$timeout');promise.$$timeoutId=timeoutId;deferreds[timeoutId]=deferred;return promise}
timeout.cancel=function(promise){if(!promise)return!1;if(!promise.hasOwnProperty('$$timeoutId')){throw $timeoutMinErr('badprom','`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.')}
if(!deferreds.hasOwnProperty(promise.$$timeoutId))return!1;var id=promise.$$timeoutId;var deferred=deferreds[id];markQExceptionHandled(deferred.promise);deferred.reject('canceled');delete deferreds[id];return $browser.defer.cancel(id)};return timeout}]}
var urlParsingNode=window.document.createElement('a');var originUrl=urlResolve(window.location.href);var baseUrlParsingNode;urlParsingNode.href='http://[::1]';var ipv6InBrackets=urlParsingNode.hostname==='[::1]';function urlResolve(url){if(!isString(url))return url;var href=url;if(msie){urlParsingNode.setAttribute('href',href);href=urlParsingNode.href}
urlParsingNode.setAttribute('href',href);var hostname=urlParsingNode.hostname;if(!ipv6InBrackets&&hostname.indexOf(':')>-1){hostname='['+hostname+']'}
return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,''):'',host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,''):'',hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,''):'',hostname:hostname,port:urlParsingNode.port,pathname:(urlParsingNode.pathname.charAt(0)==='/')?urlParsingNode.pathname:'/'+urlParsingNode.pathname}}
function urlIsSameOrigin(requestUrl){return urlsAreSameOrigin(requestUrl,originUrl)}
function urlIsSameOriginAsBaseUrl(requestUrl){return urlsAreSameOrigin(requestUrl,getBaseUrl())}
function urlIsAllowedOriginFactory(whitelistedOriginUrls){var parsedAllowedOriginUrls=[originUrl].concat(whitelistedOriginUrls.map(urlResolve));return function urlIsAllowedOrigin(requestUrl){var parsedUrl=urlResolve(requestUrl);return parsedAllowedOriginUrls.some(urlsAreSameOrigin.bind(null,parsedUrl))}}
function urlsAreSameOrigin(url1,url2){url1=urlResolve(url1);url2=urlResolve(url2);return(url1.protocol===url2.protocol&&url1.host===url2.host)}
function getBaseUrl(){if(window.document.baseURI){return window.document.baseURI}
if(!baseUrlParsingNode){baseUrlParsingNode=window.document.createElement('a');baseUrlParsingNode.href='.';baseUrlParsingNode=baseUrlParsingNode.cloneNode(!1)}
return baseUrlParsingNode.href}
function $WindowProvider(){this.$get=valueFn(window)}
function $$CookieReader($document){var rawDocument=$document[0]||{};var lastCookies={};var lastCookieString='';function safeGetCookie(rawDocument){try{return rawDocument.cookie||''}catch(e){return''}}
function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}
return function(){var cookieArray,cookie,i,index,name;var currentCookieString=safeGetCookie(rawDocument);if(currentCookieString!==lastCookieString){lastCookieString=currentCookieString;cookieArray=lastCookieString.split('; ');lastCookies={};for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];index=cookie.indexOf('=');if(index>0){name=safeDecodeURIComponent(cookie.substring(0,index));if(isUndefined(lastCookies[name])){lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))}}}}
return lastCookies}}
$$CookieReader.$inject=['$document'];function $$CookieReaderProvider(){this.$get=$$CookieReader}
$FilterProvider.$inject=['$provide'];function $FilterProvider($provide){var suffix='Filter';function register(name,factory){if(isObject(name)){var filters={};forEach(name,function(filter,key){filters[key]=register(key,filter)});return filters}else{return $provide.factory(name+suffix,factory)}}
this.register=register;this.$get=['$injector',function($injector){return function(name){return $injector.get(name+suffix)}}];register('currency',currencyFilter);register('date',dateFilter);register('filter',filterFilter);register('json',jsonFilter);register('limitTo',limitToFilter);register('lowercase',lowercaseFilter);register('number',numberFilter);register('orderBy',orderByFilter);register('uppercase',uppercaseFilter)}
function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(array==null){return array}else{throw minErr('filter')('notarray','Expected array but received: {0}',array)}}
anyPropertyKey=anyPropertyKey||'$';var expressionType=getTypeForFilter(expression);var predicateFn;var matchAgainstAnyProp;switch(expressionType){case 'function':predicateFn=expression;break;case 'boolean':case 'null':case 'number':case 'string':matchAgainstAnyProp=!0;case 'object':predicateFn=createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}
return Array.prototype.filter.call(array,predicateFn)}}
function createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&(anyPropertyKey in expression);var predicateFn;if(comparator===!0){comparator=equals}else if(!isFunction(comparator)){comparator=function(actual,expected){if(isUndefined(actual)){return!1}
if((actual===null)||(expected===null)){return actual===expected}
if(isObject(expected)||(isObject(actual)&&!hasCustomToString(actual))){return!1}
actual=lowercase(''+actual);expected=lowercase(''+expected);return actual.indexOf(expected)!==-1}}
predicateFn=function(item){if(shouldMatchPrimitives&&!isObject(item)){return deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,!1)}
return deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)};return predicateFn}
function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual);var expectedType=getTypeForFilter(expected);if((expectedType==='string')&&(expected.charAt(0)==='!')){return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp)}else if(isArray(actual)){return actual.some(function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)})}
switch(actualType){case 'object':var key;if(matchAgainstAnyProp){for(key in actual){if(key.charAt&&(key.charAt(0)!=='$')&&deepCompare(actual[key],expected,comparator,anyPropertyKey,!0)){return!0}}
return dontMatchWholeObject?!1:deepCompare(actual,expected,comparator,anyPropertyKey,!1)}else if(expectedType==='object'){for(key in expected){var expectedVal=expected[key];if(isFunction(expectedVal)||isUndefined(expectedVal)){continue}
var matchAnyProperty=key===anyPropertyKey;var actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty)){return!1}}
return!0}else{return comparator(actual,expected)}
case 'function':return!1;default:return comparator(actual,expected)}}
function getTypeForFilter(val){return(val===null)?'null':typeof val}
var MAX_DIGITS=22;var DECIMAL_SEP='.';var ZERO_CHAR='0';currencyFilter.$inject=['$locale'];function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){if(isUndefined(currencySymbol)){currencySymbol=formats.CURRENCY_SYM}
if(isUndefined(fractionSize)){fractionSize=formats.PATTERNS[1].maxFrac}
var currencySymbolRe=!currencySymbol?/\s*\u00A4\s*/g:/\u00A4/g;return(amount==null)?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(currencySymbolRe,currencySymbol)}}
numberFilter.$inject=['$locale'];function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return(number==null)?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}
function parse(numStr){var exponent=0,digits,numberOfIntegerDigits;var i,j,zeros;if((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1){numStr=numStr.replace(DECIMAL_SEP,'')}
if((i=numStr.search(/e/i))>0){if(numberOfIntegerDigits<0)numberOfIntegerDigits=i;numberOfIntegerDigits+=+numStr.slice(i+1);numStr=numStr.substring(0,i)}else if(numberOfIntegerDigits<0){numberOfIntegerDigits=numStr.length}
for(i=0;numStr.charAt(i)===ZERO_CHAR;i++){}
if(i===(zeros=numStr.length)){digits=[0];numberOfIntegerDigits=1}else{zeros--;while(numStr.charAt(zeros)===ZERO_CHAR)zeros--;numberOfIntegerDigits-=i;digits=[];for(j=0;i<=zeros;i++,j++){digits[j]=+numStr.charAt(i)}}
if(numberOfIntegerDigits>MAX_DIGITS){digits=digits.splice(0,MAX_DIGITS-1);exponent=numberOfIntegerDigits-1;numberOfIntegerDigits=1}
return{d:digits,e:exponent,i:numberOfIntegerDigits}}
function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d;var fractionLen=digits.length-parsedNumber.i;fractionSize=(isUndefined(fractionSize))?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize;var roundAt=fractionSize+parsedNumber.i;var digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++){digits[j]=0}}else{fractionLen=Math.max(0,fractionLen);parsedNumber.i=1;digits.length=Math.max(1,roundAt=fractionSize+1);digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}
if(digit>=5){if(roundAt-1<0){for(var k=0;k>roundAt;k--){digits.unshift(0);parsedNumber.i++}
digits.unshift(1);parsedNumber.i++}else{digits[roundAt-1]++}}
for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){d=d+carry;digits[i]=d%10;return Math.floor(d/10)},0);if(carry){digits.unshift(carry);parsedNumber.i++}}
function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!(isString(number)||isNumber(number))||isNaN(number))return'';var isInfinity=!isFinite(number);var isZero=!1;var numStr=Math.abs(number)+'',formattedText='',parsedNumber;if(isInfinity){formattedText='\u221e'}else{parsedNumber=parse(numStr);roundNumber(parsedNumber,fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d;var integerLen=parsedNumber.i;var exponent=parsedNumber.e;var decimals=[];isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);while(integerLen<0){digits.unshift(0);integerLen++}
if(integerLen>0){decimals=digits.splice(integerLen,digits.length)}else{decimals=digits;digits=[0]}
var groups=[];if(digits.length>=pattern.lgSize){groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(''))}
while(digits.length>pattern.gSize){groups.unshift(digits.splice(-pattern.gSize,digits.length).join(''))}
if(digits.length){groups.unshift(digits.join(''))}
formattedText=groups.join(groupSep);if(decimals.length){formattedText+=decimalSep+decimals.join('')}
if(exponent){formattedText+='e+'+exponent}}
if(number<0&&!isZero){return pattern.negPre+formattedText+pattern.negSuf}else{return pattern.posPre+formattedText+pattern.posSuf}}
function padNumber(num,digits,trim,negWrap){var neg='';if(num<0||(negWrap&&num<=0)){if(negWrap){num=-num+1}else{num=-num;neg='-'}}
num=''+num;while(num.length<digits)num=ZERO_CHAR+num;if(trim){num=num.substr(num.length-digits)}
return neg+num}
function dateGetter(name,size,offset,trim,negWrap){offset=offset||0;return function(date){var value=date['get'+name]();if(offset>0||value>-offset){value+=offset}
if(value===0&&offset===-12)value=12;return padNumber(value,size,trim,negWrap)}}
function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date['get'+name]();var propPrefix=(standAlone?'STANDALONE':'')+(shortForm?'SHORT':'');var get=uppercase(propPrefix+name);return formats[get][value]}}
function timeZoneGetter(date,formats,offset){var zone=-1*offset;var paddedZone=(zone>=0)?'+':'';paddedZone+=padNumber(Math[zone>0?'floor':'ceil'](zone/60),2)+padNumber(Math.abs(zone%60),2);return paddedZone}
function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=(new Date(year,0,1)).getDay();return new Date(year,0,((dayOfWeekOnFirst<=4)?5:12)-dayOfWeekOnFirst)}
function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}
function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date);var diff=+thisThurs- +firstThurs,result=1+Math.round(diff/6.048e8);return padNumber(result,size)}}
function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}
function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}
function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}
var DATE_FORMATS={yyyy:dateGetter('FullYear',4,0,!1,!0),yy:dateGetter('FullYear',2,0,!0,!0),y:dateGetter('FullYear',1,0,!1,!0),MMMM:dateStrGetter('Month'),MMM:dateStrGetter('Month',!0),MM:dateGetter('Month',2,1),M:dateGetter('Month',1,1),LLLL:dateStrGetter('Month',!1,!0),dd:dateGetter('Date',2),d:dateGetter('Date',1),HH:dateGetter('Hours',2),H:dateGetter('Hours',1),hh:dateGetter('Hours',2,-12),h:dateGetter('Hours',1,-12),mm:dateGetter('Minutes',2),m:dateGetter('Minutes',1),ss:dateGetter('Seconds',2),s:dateGetter('Seconds',1),sss:dateGetter('Milliseconds',3),EEEE:dateStrGetter('Day'),EEE:dateStrGetter('Day',!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter};var DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,NUMBER_STRING=/^-?\d+$/;dateFilter.$inject=['$locale'];function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function jsonStringToDate(string){var match;if((match=string.match(R_ISO8601_STR))){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;if(match[9]){tzHour=toInt(match[9]+match[10]);tzMin=toInt(match[9]+match[11])}
dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour;var m=toInt(match[5]||0)-tzMin;var s=toInt(match[6]||0);var ms=Math.round(parseFloat('0.'+(match[7]||0))*1000);timeSetter.call(date,h,m,s,ms);return date}
return string}
return function(date,format,timezone){var text='',parts=[],fn,match;format=format||'mediumDate';format=$locale.DATETIME_FORMATS[format]||format;if(isString(date)){date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)}
if(isNumber(date)){date=new Date(date)}
if(!isDate(date)||!isFinite(date.getTime())){return date}
while(format){match=DATE_FORMATS_SPLIT.exec(format);if(match){parts=concat(parts,match,1);format=parts.pop()}else{parts.push(format);format=null}}
var dateTimezoneOffset=date.getTimezoneOffset();if(timezone){dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);date=convertTimezoneToLocal(date,timezone,!0)}
forEach(parts,function(value){fn=DATE_FORMATS[value];text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):value==='\'\''?'\'':value.replace(/(^'|'$)/g,'').replace(/''/g,'\'')});return text}}
function jsonFilter(){return function(object,spacing){if(isUndefined(spacing)){spacing=2}
return toJson(object,spacing)}}
var lowercaseFilter=valueFn(lowercase);var uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){if(Math.abs(Number(limit))===Infinity){limit=Number(limit)}else{limit=toInt(limit)}
if(isNumberNaN(limit))return input;if(isNumber(input))input=input.toString();if(!isArrayLike(input))return input;begin=(!begin||isNaN(begin))?0:toInt(begin);begin=(begin<0)?Math.max(0,input.length+begin):begin;if(limit>=0){return sliceFn(input,begin,begin+limit)}else{if(begin===0){return sliceFn(input,limit,input.length)}else{return sliceFn(input,Math.max(0,begin+limit),begin)}}}}
function sliceFn(input,begin,end){if(isString(input))return input.slice(begin,end);return slice.call(input,begin,end)}
orderByFilter.$inject=['$parse'];function orderByFilter($parse){return function(array,sortPredicate,reverseOrder,compareFn){if(array==null)return array;if(!isArrayLike(array)){throw minErr('orderBy')('notarray','Expected array but received: {0}',array)}
if(!isArray(sortPredicate)){sortPredicate=[sortPredicate]}
if(sortPredicate.length===0){sortPredicate=['+']}
var predicates=processPredicates(sortPredicate);var descending=reverseOrder?-1:1;var compare=isFunction(compareFn)?compareFn:defaultCompare;var compareValues=Array.prototype.map.call(array,getComparisonObject);compareValues.sort(doComparison);array=compareValues.map(function(item){return item.value});return array;function getComparisonObject(value,index){return{value:value,tieBreaker:{value:index,type:'number',index:index},predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}
function doComparison(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result){return result*predicates[i].descending*descending}}
return(compare(v1.tieBreaker,v2.tieBreaker)||defaultCompare(v1.tieBreaker,v2.tieBreaker))*descending}};function processPredicates(sortPredicates){return sortPredicates.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate)){get=predicate}else if(isString(predicate)){if((predicate.charAt(0)==='+'||predicate.charAt(0)==='-')){descending=predicate.charAt(0)==='-'?-1:1;predicate=predicate.substring(1)}
if(predicate!==''){get=$parse(predicate);if(get.constant){var key=get();get=function(value){return value[key]}}}}
return{get:get,descending:descending}})}
function isPrimitive(value){switch(typeof value){case 'number':case 'boolean':case 'string':return!0;default:return!1}}
function objectValue(value){if(isFunction(value.valueOf)){value=value.valueOf();if(isPrimitive(value))return value}
if(hasCustomToString(value)){value=value.toString();if(isPrimitive(value))return value}
return value}
function getPredicateValue(value,index){var type=typeof value;if(value===null){type='null'}else if(type==='object'){value=objectValue(value)}
return{value:value,type:type,index:index}}
function defaultCompare(v1,v2){var result=0;var type1=v1.type;var type2=v2.type;if(type1===type2){var value1=v1.value;var value2=v2.value;if(type1==='string'){value1=value1.toLowerCase();value2=value2.toLowerCase()}else if(type1==='object'){if(isObject(value1))value1=v1.index;if(isObject(value2))value2=v2.index}
if(value1!==value2){result=value1<value2?-1:1}}else{result=(type1==='undefined')?1:(type2==='undefined')?-1:(type1==='null')?1:(type2==='null')?-1:(type1<type2)?-1:1}
return result}}
function ngDirective(directive){if(isFunction(directive)){directive={link:directive}}
directive.restrict=directive.restrict||'AC';return valueFn(directive)}
var htmlAnchorDirective=valueFn({restrict:'E',compile:function(element,attr){if(!attr.href&&!attr.xlinkHref){return function(scope,element){if(element[0].nodeName.toLowerCase()!=='a')return;var href=toString.call(element.prop('href'))==='[object SVGAnimatedString]'?'xlink:href':'href';element.on('click',function(event){if(!element.attr(href)){event.preventDefault()}})}}}});var ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if(propName==='multiple')return;function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function ngBooleanAttrWatchAction(value){attr.$set(attrName,!!value)})}
var normalized=directiveNormalize('ng-'+attrName);var linkFn=defaultLinkFn;if(propName==='checked'){linkFn=function(scope,element,attr){if(attr.ngModel!==attr[normalized]){defaultLinkFn(scope,element,attr)}}}
ngAttributeAliasDirectives[normalized]=function(){return{restrict:'A',priority:100,link:linkFn}}});forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if(ngAttr==='ngPattern'&&attr.ngPattern.charAt(0)==='/'){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match){attr.$set('ngPattern',new RegExp(match[1],match[2]));return}}
scope.$watch(attr[ngAttr],function ngAttrAliasWatchAction(value){attr.$set(ngAttr,value)})}}}});forEach(['src','srcset','href'],function(attrName){var normalized=directiveNormalize('ng-'+attrName);ngAttributeAliasDirectives[normalized]=['$sce',function($sce){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;if(attrName==='href'&&toString.call(element.prop('href'))==='[object SVGAnimatedString]'){name='xlinkHref';attr.$attr[name]='xlink:href';propName=null}
attr.$set(normalized,$sce.getTrustedMediaUrl(attr[normalized]));attr.$observe(normalized,function(value){if(!value){if(attrName==='href'){attr.$set(name,null)}
return}
attr.$set(name,value);if(msie&&propName)element.prop(propName,attr[name]);})}}}]});var nullFormCtrl={$addControl:noop,$getControls:valueFn([]),$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop,$$setSubmitted:noop},PENDING_CLASS='ng-pending',SUBMITTED_CLASS='ng-submitted';function nullFormRenameControl(control,name){control.$name=name}
FormController.$inject=['$element','$attrs','$scope','$animate','$interpolate'];function FormController($element,$attrs,$scope,$animate,$interpolate){this.$$controls=[];this.$error={};this.$$success={};this.$pending=undefined;this.$name=$interpolate($attrs.name||$attrs.ngForm||'')($scope);this.$dirty=!1;this.$pristine=!0;this.$valid=!0;this.$invalid=!1;this.$submitted=!1;this.$$parentForm=nullFormCtrl;this.$$element=$element;this.$$animate=$animate;setupValidity(this)}
FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,function(control){control.$rollbackViewValue()})},$commitViewValue:function(){forEach(this.$$controls,function(control){control.$commitViewValue()})},$addControl:function(control){assertNotHasOwnProperty(control.$name,'input');this.$$controls.push(control);if(control.$name){this[control.$name]=control}
control.$$parentForm=this},$getControls:function(){return shallowCopy(this.$$controls)},$$renameControl:function(control,newName){var oldName=control.$name;if(this[oldName]===control){delete this[oldName]}
this[newName]=control;control.$name=newName},$removeControl:function(control){if(control.$name&&this[control.$name]===control){delete this[control.$name]}
forEach(this.$pending,function(value,name){this.$setValidity(name,null,control)},this);forEach(this.$error,function(value,name){this.$setValidity(name,null,control)},this);forEach(this.$$success,function(value,name){this.$setValidity(name,null,control)},this);arrayRemove(this.$$controls,control);control.$$parentForm=nullFormCtrl},$setDirty:function(){this.$$animate.removeClass(this.$$element,PRISTINE_CLASS);this.$$animate.addClass(this.$$element,DIRTY_CLASS);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,PRISTINE_CLASS,DIRTY_CLASS+' '+SUBMITTED_CLASS);this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;forEach(this.$$controls,function(control){control.$setPristine()})},$setUntouched:function(){forEach(this.$$controls,function(control){control.$setUntouched()})},$setSubmitted:function(){var rootForm=this;while(rootForm.$$parentForm&&(rootForm.$$parentForm!==nullFormCtrl)){rootForm=rootForm.$$parentForm}
rootForm.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,SUBMITTED_CLASS);this.$submitted=!0;forEach(this.$$controls,function(control){if(control.$$setSubmitted){control.$$setSubmitted()}})}};addSetValidityMethod({clazz:FormController,set:function(object,property,controller){var list=object[property];if(!list){object[property]=[controller]}else{var index=list.indexOf(controller);if(index===-1){list.push(controller)}}},unset:function(object,property,controller){var list=object[property];if(!list){return}
arrayRemove(list,controller);if(list.length===0){delete object[property]}}});var formDirectiveFactory=function(isNgForm){return['$timeout','$parse',function($timeout,$parse){var formDirective={name:'form',restrict:isNgForm?'EAC':'E',require:['form','^^?form'],controller:FormController,compile:function ngFormCompile(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?'name':(isNgForm&&attr.ngForm?'ngForm':!1);return{pre:function ngFormPreLink(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!('action' in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue();controller.$setSubmitted()});event.preventDefault()};formElement[0].addEventListener('submit',handleFormSubmission);formElement.on('$destroy',function(){$timeout(function(){formElement[0].removeEventListener('submit',handleFormSubmission)},0,!1)})}
var parentFormCtrl=ctrls[1]||controller.$$parentForm;parentFormCtrl.$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;if(nameAttr){setter(scope,controller);attr.$observe(nameAttr,function(newValue){if(controller.$name===newValue)return;setter(scope,undefined);controller.$$parentForm.$$renameControl(controller,newValue);setter=getSetter(controller.$name);setter(scope,controller)})}
formElement.on('$destroy',function(){controller.$$parentForm.$removeControl(controller);setter(scope,undefined);extend(controller,nullFormCtrl)})}}}};return formDirective;function getSetter(expression){if(expression===''){return $parse('this[""]').assign}
return $parse(expression).assign||noop}}]};var formDirective=formDirectiveFactory();var ngFormDirective=formDirectiveFactory(!0);function setupValidity(instance){instance.$$classCache={};instance.$$classCache[INVALID_CLASS]=!(instance.$$classCache[VALID_CLASS]=instance.$$element.hasClass(VALID_CLASS))}
function addSetValidityMethod(context){var clazz=context.clazz,set=context.set,unset=context.unset;clazz.prototype.$setValidity=function(validationErrorKey,state,controller){if(isUndefined(state)){createAndSet(this,'$pending',validationErrorKey,controller)}else{unsetAndCleanup(this,'$pending',validationErrorKey,controller)}
if(!isBoolean(state)){unset(this.$error,validationErrorKey,controller);unset(this.$$success,validationErrorKey,controller)}else{if(state){unset(this.$error,validationErrorKey,controller);set(this.$$success,validationErrorKey,controller)}else{set(this.$error,validationErrorKey,controller);unset(this.$$success,validationErrorKey,controller)}}
if(this.$pending){cachedToggleClass(this,PENDING_CLASS,!0);this.$valid=this.$invalid=undefined;toggleValidationCss(this,'',null)}else{cachedToggleClass(this,PENDING_CLASS,!1);this.$valid=isObjectEmpty(this.$error);this.$invalid=!this.$valid;toggleValidationCss(this,'',this.$valid)}
var combinedState;if(this.$pending&&this.$pending[validationErrorKey]){combinedState=undefined}else if(this.$error[validationErrorKey]){combinedState=!1}else if(this.$$success[validationErrorKey]){combinedState=!0}else{combinedState=null}
toggleValidationCss(this,validationErrorKey,combinedState);this.$$parentForm.$setValidity(validationErrorKey,combinedState,this)};function createAndSet(ctrl,name,value,controller){if(!ctrl[name]){ctrl[name]={}}
set(ctrl[name],value,controller)}
function unsetAndCleanup(ctrl,name,value,controller){if(ctrl[name]){unset(ctrl[name],value,controller)}
if(isObjectEmpty(ctrl[name])){ctrl[name]=undefined}}
function cachedToggleClass(ctrl,className,switchValue){if(switchValue&&!ctrl.$$classCache[className]){ctrl.$$animate.addClass(ctrl.$$element,className);ctrl.$$classCache[className]=!0}else if(!switchValue&&ctrl.$$classCache[className]){ctrl.$$animate.removeClass(ctrl.$$element,className);ctrl.$$classCache[className]=!1}}
function toggleValidationCss(ctrl,validationErrorKey,isValid){validationErrorKey=validationErrorKey?'-'+snake_case(validationErrorKey,'-'):'';cachedToggleClass(ctrl,VALID_CLASS+validationErrorKey,isValid===!0);cachedToggleClass(ctrl,INVALID_CLASS+validationErrorKey,isValid===!1)}}
function isObjectEmpty(obj){if(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return!1}}}
return!0}
var ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/;var URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i;var EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;var NUMBER_REGEXP=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;var DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/;var DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/;var MONTH_REGEXP=/^(\d{4,})-(\d\d)$/;var TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var PARTIAL_VALIDATION_EVENTS='keydown wheel mousedown';var PARTIAL_VALIDATION_TYPES=createMap();forEach('date,datetime-local,month,time,week'.split(','),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={'text':textInputType,'date':createDateInputType('date',DATE_REGEXP,createDateParser(DATE_REGEXP,['yyyy','MM','dd']),'yyyy-MM-dd'),'datetime-local':createDateInputType('datetimelocal',DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,['yyyy','MM','dd','HH','mm','ss','sss']),'yyyy-MM-ddTHH:mm:ss.sss'),'time':createDateInputType('time',TIME_REGEXP,createDateParser(TIME_REGEXP,['HH','mm','ss','sss']),'HH:mm:ss.sss'),'week':createDateInputType('week',WEEK_REGEXP,weekParser,'yyyy-Www'),'month':createDateInputType('month',MONTH_REGEXP,createDateParser(MONTH_REGEXP,['yyyy','MM']),'yyyy-MM'),'number':numberInputType,'url':urlInputType,'email':emailInputType,'radio':radioInputType,'range':rangeInputType,'checkbox':checkboxInputType,'hidden':noop,'button':noop,'submit':noop,'reset':noop,'file':noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}
function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl)}
function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on('compositionstart',function(){composing=!0});element.on('compositionupdate',function(ev){if(isUndefined(ev.data)||ev.data===''){composing=!1}});element.on('compositionend',function(){composing=!1;listener()})}
var timeout;var listener=function(ev){if(timeout){$browser.defer.cancel(timeout);timeout=null}
if(composing)return;var value=element.val(),event=ev&&ev.type;if(type!=='password'&&(!attr.ngTrim||attr.ngTrim!=='false')){value=trim(value)}
if(ctrl.$viewValue!==value||(value===''&&ctrl.$$hasNativeValidators)){ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent('input')){element.on('input',listener)}else{var deferListener=function(ev,input,origValue){if(!timeout){timeout=$browser.defer(function(){timeout=null;if(!input||input.value!==origValue){listener(ev)}})}};element.on('keydown',function(event){var key=event.keyCode;if(key===91||(15<key&&key<19)||(37<=key&&key<=40))return;deferListener(event,this,this.value)});if($sniffer.hasEvent('paste')){element.on('paste cut drop',deferListener)}}
element.on('change',listener);if(PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type){element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY];var origBadInput=validity.badInput;var origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null;if(validity.badInput!==origBadInput||validity.typeMismatch!==origTypeMismatch){listener(ev)}})}})}
ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?'':ctrl.$viewValue;if(element.val()!==value){element.val(value)}}}
function weekParser(isoWeek,existingDate){if(isDate(isoWeek)){return isoWeek}
if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=(week-1)*7;if(existingDate){hours=existingDate.getHours();minutes=existingDate.getMinutes();seconds=existingDate.getSeconds();milliseconds=existingDate.getMilliseconds()}
return new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}
return NaN}
function createDateParser(regexp,mapping){return function(iso,previousDate){var parts,map;if(isDate(iso)){return iso}
if(isString(iso)){if(iso.charAt(0)==='"'&&iso.charAt(iso.length-1)==='"'){iso=iso.substring(1,iso.length-1)}
if(ISO_DATE_REGEXP.test(iso)){return new Date(iso)}
regexp.lastIndex=0;parts=regexp.exec(iso);if(parts){parts.shift();if(previousDate){map={yyyy:previousDate.getFullYear(),MM:previousDate.getMonth()+1,dd:previousDate.getDate(),HH:previousDate.getHours(),mm:previousDate.getMinutes(),ss:previousDate.getSeconds(),sss:previousDate.getMilliseconds()/1000}}else{map={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}
forEach(parts,function(part,index){if(index<mapping.length){map[mapping[index]]=+part}});var date=new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,map.sss*1000||0);if(map.yyyy<100){date.setFullYear(map.yyyy)}
return date}}
return NaN}}
function createDateInputType(type,regexp,parseDate,format){return function dynamicDateInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){badInputChecker(scope,element,attr,ctrl,type);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var isTimeType=type==='time'||type==='datetimelocal';var previousDate;var previousTimezone;ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){return parseDateAndConvertTimeZoneToLocal(value,previousDate)}
ctrl.$$parserName=type;return undefined});ctrl.$formatters.push(function(value){if(value&&!isDate(value)){throw ngModelMinErr('datefmt','Expected `{0}` to be a date',value)}
if(isValidDate(value)){previousDate=value;var timezone=ctrl.$options.getOption('timezone');if(timezone){previousTimezone=timezone;previousDate=convertTimezoneToLocal(previousDate,timezone,!0)}
return formatter(value,timezone)}else{previousDate=null;previousTimezone=null;return''}});if(isDefined(attr.min)||attr.ngMin){var minVal=attr.min||$parse(attr.ngMin)(scope);var parsedMinVal=parseObservedDateValue(minVal);ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(parsedMinVal)||parseDate(value)>=parsedMinVal};attr.$observe('min',function(val){if(val!==minVal){parsedMinVal=parseObservedDateValue(val);minVal=val;ctrl.$validate()}})}
if(isDefined(attr.max)||attr.ngMax){var maxVal=attr.max||$parse(attr.ngMax)(scope);var parsedMaxVal=parseObservedDateValue(maxVal);ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(parsedMaxVal)||parseDate(value)<=parsedMaxVal};attr.$observe('max',function(val){if(val!==maxVal){parsedMaxVal=parseObservedDateValue(val);maxVal=val;ctrl.$validate()}})}
function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}
function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDateAndConvertTimeZoneToLocal(val)||undefined:val}
function parseDateAndConvertTimeZoneToLocal(value,previousDate){var timezone=ctrl.$options.getOption('timezone');if(previousTimezone&&previousTimezone!==timezone){previousDate=addDateMinutes(previousDate,timezoneToOffset(previousTimezone))}
var parsedDate=parseDate(value,previousDate);if(!isNaN(parsedDate)&&timezone){parsedDate=convertTimezoneToLocal(parsedDate,timezone)}
return parsedDate}
function formatter(value,timezone){var targetFormat=format;if(isTimeType&&isString(ctrl.$options.getOption('timeSecondsFormat'))){targetFormat=format.replace('ss.sss',ctrl.$options.getOption('timeSecondsFormat')).replace(/:$/,'')}
var formatted=$filter('date')(value,targetFormat,timezone);if(isTimeType&&ctrl.$options.getOption('timeStripZeroSeconds')){formatted=formatted.replace(/(?::00)?(?:\.000)?$/,'')}
return formatted}}}
function badInputChecker(scope,element,attr,ctrl,parserName){var node=element[0];var nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);if(nativeValidation){ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};if(validity.badInput||validity.typeMismatch){ctrl.$$parserName=parserName;return undefined}
return value})}}
function numberFormatterParser(ctrl){ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(NUMBER_REGEXP.test(value))return parseFloat(value);ctrl.$$parserName='number';return undefined});ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value)){throw ngModelMinErr('numfmt','Expected `{0}` to be a number',value)}
value=value.toString()}
return value})}
function parseNumberAttrVal(val){if(isDefined(val)&&!isNumber(val)){val=parseFloat(val)}
return!isNumberNaN(val)?val:undefined}
function isNumberInteger(num){return(num|0)===num}
function countDecimals(num){var numString=num.toString();var decimalSymbolIndex=numString.indexOf('.');if(decimalSymbolIndex===-1){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match){return Number(match[1])}}
return 0}
return numString.length-decimalSymbolIndex-1}
function isValidForStep(viewValue,stepBase,step){var value=Number(viewValue);var isNonIntegerValue=!isNumberInteger(value);var isNonIntegerStepBase=!isNumberInteger(stepBase);var isNonIntegerStep=!isNumberInteger(step);if(isNonIntegerValue||isNonIntegerStepBase||isNonIntegerStep){var valueDecimals=isNonIntegerValue?countDecimals(value):0;var stepBaseDecimals=isNonIntegerStepBase?countDecimals(stepBase):0;var stepDecimals=isNonIntegerStep?countDecimals(step):0;var decimalCount=Math.max(valueDecimals,stepBaseDecimals,stepDecimals);var multiplier=Math.pow(10,decimalCount);value=value*multiplier;stepBase=stepBase*multiplier;step=step*multiplier;if(isNonIntegerValue)value=Math.round(value);if(isNonIntegerStepBase)stepBase=Math.round(stepBase);if(isNonIntegerStep)step=Math.round(step);}
return(value-stepBase)%step===0}
function numberInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){badInputChecker(scope,element,attr,ctrl,'number');numberFormatterParser(ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var parsedMinVal;if(isDefined(attr.min)||attr.ngMin){var minVal=attr.min||$parse(attr.ngMin)(scope);parsedMinVal=parseNumberAttrVal(minVal);ctrl.$validators.min=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedMinVal)||viewValue>=parsedMinVal};attr.$observe('min',function(val){if(val!==minVal){parsedMinVal=parseNumberAttrVal(val);minVal=val;ctrl.$validate()}})}
if(isDefined(attr.max)||attr.ngMax){var maxVal=attr.max||$parse(attr.ngMax)(scope);var parsedMaxVal=parseNumberAttrVal(maxVal);ctrl.$validators.max=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedMaxVal)||viewValue<=parsedMaxVal};attr.$observe('max',function(val){if(val!==maxVal){parsedMaxVal=parseNumberAttrVal(val);maxVal=val;ctrl.$validate()}})}
if(isDefined(attr.step)||attr.ngStep){var stepVal=attr.step||$parse(attr.ngStep)(scope);var parsedStepVal=parseNumberAttrVal(stepVal);ctrl.$validators.step=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedStepVal)||isValidForStep(viewValue,parsedMinVal||0,parsedStepVal)};attr.$observe('step',function(val){if(val!==stepVal){parsedStepVal=parseNumberAttrVal(val);stepVal=val;ctrl.$validate()}})}}
function rangeInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl,'range');numberFormatterParser(ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&element[0].type==='range',minVal=supportsRange?0:undefined,maxVal=supportsRange?100:undefined,stepVal=supportsRange?1:undefined,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step);var originalRender=ctrl.$render;ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function rangeRender(){originalRender();ctrl.$setViewValue(element.val())}:originalRender;if(hasMinAttr){minVal=parseNumberAttrVal(attr.min);ctrl.$validators.min=supportsRange?function noopMinValidator(){return!0}:function minValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal};setInitialValueAndObserver('min',minChange)}
if(hasMaxAttr){maxVal=parseNumberAttrVal(attr.max);ctrl.$validators.max=supportsRange?function noopMaxValidator(){return!0}:function maxValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal};setInitialValueAndObserver('max',maxChange)}
if(hasStepAttr){stepVal=parseNumberAttrVal(attr.step);ctrl.$validators.step=supportsRange?function nativeStepValidator(){return!validity.stepMismatch}:function stepValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)};setInitialValueAndObserver('step',stepChange)}
function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]);var oldVal=attr[htmlAttrName];attr.$observe(htmlAttrName,function wrappedObserver(val){if(val!==oldVal){oldVal=val;changeFn(val)}})}
function minChange(val){minVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}
if(supportsRange){var elVal=element.val();if(minVal>elVal){elVal=minVal;element.val(elVal)}
ctrl.$setViewValue(elVal)}else{ctrl.$validate()}}
function maxChange(val){maxVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}
if(supportsRange){var elVal=element.val();if(maxVal<elVal){element.val(maxVal);elVal=maxVal<minVal?minVal:maxVal}
ctrl.$setViewValue(elVal)}else{ctrl.$validate()}}
function stepChange(val){stepVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}
if(!supportsRange){ctrl.$validate()}else if(ctrl.$viewValue!==element.val()){ctrl.$setViewValue(element.val())}}}
function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}
function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}
function radioInputType(scope,element,attr,ctrl){var doTrim=!attr.ngTrim||trim(attr.ngTrim)!=='false';if(isUndefined(attr.name)){element.attr('name',nextUid())}
var listener=function(ev){var value;if(element[0].checked){value=attr.value;if(doTrim){value=trim(value)}
ctrl.$setViewValue(value,ev&&ev.type)}};element.on('change',listener);ctrl.$render=function(){var value=attr.value;if(doTrim){value=trim(value)}
element[0].checked=(value===ctrl.$viewValue)};attr.$observe('value',ctrl.$render)}
function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){parseFn=$parse(expression);if(!parseFn.constant){throw ngModelMinErr('constexpr','Expected constant expression for `{0}`, but saw '+'`{1}`.',name,expression)}
return parseFn(context)}
return fallback}
function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,'ngTrueValue',attr.ngTrueValue,!0);var falseValue=parseConstantExpr($parse,scope,'ngFalseValue',attr.ngFalseValue,!1);var listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on('change',listener);ctrl.$render=function(){element[0].checked=ctrl.$viewValue};ctrl.$isEmpty=function(value){return value===!1};ctrl.$formatters.push(function(value){return equals(value,trueValue)});ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}
var inputDirective=['$browser','$sniffer','$filter','$parse',function($browser,$sniffer,$filter,$parse){return{restrict:'E',require:['?ngModel'],link:{pre:function(scope,element,attr,ctrls){if(ctrls[0]){(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}}];var hiddenInputBrowserCacheDirective=function(){var valueProperty={configurable:!0,enumerable:!1,get:function(){return this.getAttribute('value')||''},set:function(val){this.setAttribute('value',val)}};return{restrict:'E',priority:200,compile:function(_,attr){if(lowercase(attr.type)!=='hidden'){return}
return{pre:function(scope,element,attr,ctrls){var node=element[0];if(node.parentNode){node.parentNode.insertBefore(node,node.nextSibling)}
if(Object.defineProperty){Object.defineProperty(node,'value',valueProperty)}}}}}};var CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/;var ngValueDirective=function(){function updateElementValue(element,attr,value){var propValue=isDefined(value)?value:(msie===9)?'':null;element.prop('value',propValue);attr.$set('value',value)}
return{restrict:'A',priority:100,compile:function(tpl,tplAttr){if(CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)){return function ngValueConstantLink(scope,elm,attr){var value=scope.$eval(attr.ngValue);updateElementValue(elm,attr,value)}}else{return function ngValueLink(scope,elm,attr){scope.$watch(attr.ngValue,function valueWatchAction(value){updateElementValue(elm,attr,value)})}}}}};var ngBindDirective=['$compile',function($compile){return{restrict:'AC',compile:function ngBindCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind);element=element[0];scope.$watch(attr.ngBind,function ngBindWatchAction(value){element.textContent=stringify(value)})}}}}];var ngBindTemplateDirective=['$interpolate','$compile',function($interpolate,$compile){return{compile:function ngBindTemplateCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindTemplateLink(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions);element=element[0];attr.$observe('ngBindTemplate',function(value){element.textContent=isUndefined(value)?'':value})}}}}];var ngBindHtmlDirective=['$sce','$parse','$compile',function($sce,$parse,$compile){return{restrict:'A',compile:function ngBindHtmlCompile(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml);var ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function sceValueOf(val){return $sce.valueOf(val)});$compile.$$addBindingClass(tElement);return function ngBindHtmlLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml);scope.$watch(ngBindHtmlWatch,function ngBindHtmlWatchAction(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||'')})}}}}];var ngChangeDirective=valueFn({restrict:'A',require:'ngModel',link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}});function classDirective(name,selector){name='ngClass'+name;var indexWatchExpression;return['$parse',function($parse){return{restrict:'AC',link:function(scope,element,attr){var classCounts=element.data('$classCounts');var oldModulo=!0;var oldClassString;if(!classCounts){classCounts=createMap();element.data('$classCounts',classCounts)}
if(name!=='ngClass'){if(!indexWatchExpression){indexWatchExpression=$parse('$index',function moduloTwo($index){return $index&1})}
scope.$watch(indexWatchExpression,ngClassIndexWatchAction)}
scope.$watch($parse(attr[name],toClassString),ngClassWatchAction);function addClasses(classString){classString=digestClassCounts(split(classString),1);attr.$addClass(classString)}
function removeClasses(classString){classString=digestClassCounts(split(classString),-1);attr.$removeClass(classString)}
function updateClasses(oldClassString,newClassString){var oldClassArray=split(oldClassString);var newClassArray=split(newClassString);var toRemoveArray=arrayDifference(oldClassArray,newClassArray);var toAddArray=arrayDifference(newClassArray,oldClassArray);var toRemoveString=digestClassCounts(toRemoveArray,-1);var toAddString=digestClassCounts(toAddArray,1);attr.$addClass(toAddString);attr.$removeClass(toRemoveString)}
function digestClassCounts(classArray,count){var classesToUpdate=[];forEach(classArray,function(className){if(count>0||classCounts[className]){classCounts[className]=(classCounts[className]||0)+count;if(classCounts[className]===+(count>0)){classesToUpdate.push(className)}}});return classesToUpdate.join(' ')}
function ngClassIndexWatchAction(newModulo){if(newModulo===selector){addClasses(oldClassString)}else{removeClasses(oldClassString)}
oldModulo=newModulo}
function ngClassWatchAction(newClassString){if(oldModulo===selector){updateClasses(oldClassString,newClassString)}
oldClassString=newClassString}}}}];function arrayDifference(tokens1,tokens2){if(!tokens1||!tokens1.length)return[];if(!tokens2||!tokens2.length)return tokens1;var values=[];outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token===tokens2[j])continue outer}
values.push(token)}
return values}
function split(classString){return classString&&classString.split(' ')}
function toClassString(classValue){if(!classValue)return classValue;var classString=classValue;if(isArray(classValue)){classString=classValue.map(toClassString).join(' ')}else if(isObject(classValue)){classString=Object.keys(classValue).filter(function(key){return classValue[key]}).join(' ')}else if(!isString(classValue)){classString=classValue+''}
return classString}}
var ngClassDirective=classDirective('',!0);var ngClassOddDirective=classDirective('Odd',0);var ngClassEvenDirective=classDirective('Even',1);var ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set('ngCloak',undefined);element.removeClass('ng-cloak')}});var ngControllerDirective=[function(){return{restrict:'A',scope:!0,controller:'@',priority:500}}];var ngEventDirectives={};var forceAsyncEvents={'blur':!0,'focus':!0};forEach('click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),function(eventName){var directiveName=directiveNormalize('ng-'+eventName);ngEventDirectives[directiveName]=['$parse','$rootScope','$exceptionHandler',function($parse,$rootScope,$exceptionHandler){return createEventDirective($parse,$rootScope,$exceptionHandler,directiveName,eventName,forceAsyncEvents[eventName])}]});function createEventDirective($parse,$rootScope,$exceptionHandler,directiveName,eventName,forceAsync){return{restrict:'A',compile:function($element,attr){var fn=$parse(attr[directiveName]);return function ngEventHandler(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};if(!$rootScope.$$phase){scope.$apply(callback)}else if(forceAsync){scope.$evalAsync(callback)}else{try{callback()}catch(error){$exceptionHandler(error)}}})}}}}
var ngIfDirective=['$animate','$compile',function($animate,$compile){return{multiElement:!0,transclude:'element',priority:600,terminal:!0,restrict:'A',$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function ngIfWatchAction(value){if(value){if(!childScope){$transclude(function(clone,newScope){childScope=newScope;clone[clone.length++]=$compile.$$createComment('end ngIf',$attr.ngIf);block={clone:clone};$animate.enter(clone,$element.parent(),$element)})}}else{if(previousElements){previousElements.remove();previousElements=null}
if(childScope){childScope.$destroy();childScope=null}
if(block){previousElements=getBlockNodes(block.clone);$animate.leave(previousElements).done(function(response){if(response!==!1)previousElements=null});block=null}}})}}}];var ngIncludeDirective=['$templateRequest','$anchorScroll','$animate',function($templateRequest,$anchorScroll,$animate){return{restrict:'ECA',priority:400,terminal:!0,transclude:'element',controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||'',autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var changeCounter=0,currentScope,previousElement,currentElement;var cleanupLastIncludeContent=function(){if(previousElement){previousElement.remove();previousElement=null}
if(currentScope){currentScope.$destroy();currentScope=null}
if(currentElement){$animate.leave(currentElement).done(function(response){if(response!==!1)previousElement=null});previousElement=currentElement;currentElement=null}};scope.$watch(srcExp,function ngIncludeWatchAction(src){var afterAnimation=function(response){if(response!==!1&&isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll()}};var thisChangeId=++changeCounter;if(src){$templateRequest(src,!0).then(function(response){if(scope.$$destroyed)return;if(thisChangeId!==changeCounter)return;var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent();$animate.enter(clone,null,$element).done(afterAnimation)});currentScope=newScope;currentElement=clone;currentScope.$emit('$includeContentLoaded',src);scope.$eval(onloadExp)},function(){if(scope.$$destroyed)return;if(thisChangeId===changeCounter){cleanupLastIncludeContent();scope.$emit('$includeContentError',src)}});scope.$emit('$includeContentRequested',src)}else{cleanupLastIncludeContent();ctrl.template=null}})}}}}];var ngIncludeFillContentDirective=['$compile',function($compile){return{restrict:'ECA',priority:-400,require:'ngInclude',link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/)){$element.empty();$compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function namespaceAdaptedClone(clone){$element.append(clone)},{futureParentElement:$element});return}
$element.html(ctrl.template);$compile($element.contents())(scope)}}}];var ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}});var ngListDirective=function(){return{restrict:'A',priority:100,require:'ngModel',link:function(scope,element,attr,ctrl){var ngList=attr.ngList||', ';var trimValues=attr.ngTrim!=='false';var separator=trimValues?trim(ngList):ngList;var parse=function(viewValue){if(isUndefined(viewValue))return;var list=[];if(viewValue){forEach(viewValue.split(separator),function(value){if(value)list.push(trimValues?trim(value):value);})}
return list};ctrl.$parsers.push(parse);ctrl.$formatters.push(function(value){if(isArray(value)){return value.join(ngList)}
return undefined});ctrl.$isEmpty=function(value){return!value||!value.length}}}};var VALID_CLASS='ng-valid',INVALID_CLASS='ng-invalid',PRISTINE_CLASS='ng-pristine',DIRTY_CLASS='ng-dirty',UNTOUCHED_CLASS='ng-untouched',TOUCHED_CLASS='ng-touched',EMPTY_CLASS='ng-empty',NOT_EMPTY_CLASS='ng-not-empty';var ngModelMinErr=minErr('ngModel');NgModelController.$inject=['$scope','$exceptionHandler','$attrs','$element','$parse','$animate','$timeout','$q','$interpolate'];function NgModelController($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$q,$interpolate){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=undefined;this.$name=$interpolate($attr.name||'',!1)($scope);this.$$parentForm=nullFormCtrl;this.$options=defaultModelOptions;this.$$updateEvents='';this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=$parse($attr.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=undefined;this.$$parserName='parse';this.$$currentValidationRunId=0;this.$$scope=$scope;this.$$rootScope=$scope.$root;this.$$attr=$attr;this.$$element=$element;this.$$animate=$animate;this.$$timeout=$timeout;this.$$parse=$parse;this.$$q=$q;this.$$exceptionHandler=$exceptionHandler;setupValidity(this);setupModelWatcher(this)}
NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption('getterSetter')){var invokeModelGetter=this.$$parse(this.$$attr.ngModel+'()'),invokeModelSetter=this.$$parse(this.$$attr.ngModel+'($$$p)');this.$$ngModelGet=function($scope){var modelValue=this.$$parsedNgModel($scope);if(isFunction(modelValue)){modelValue=invokeModelGetter($scope)}
return modelValue};this.$$ngModelSet=function($scope,newValue){if(isFunction(this.$$parsedNgModel($scope))){invokeModelSetter($scope,{$$$p:newValue})}else{this.$$parsedNgModelAssign($scope,newValue)}}}else if(!this.$$parsedNgModel.assign){throw ngModelMinErr('nonassign','Expression \'{0}\' is non-assignable. Element: {1}',this.$$attr.ngModel,startingTag(this.$$element))}},$render:noop,$isEmpty:function(value){return isUndefined(value)||value===''||value===null||value!==value},$$updateEmptyClasses:function(value){if(this.$isEmpty(value)){this.$$animate.removeClass(this.$$element,NOT_EMPTY_CLASS);this.$$animate.addClass(this.$$element,EMPTY_CLASS)}else{this.$$animate.removeClass(this.$$element,EMPTY_CLASS);this.$$animate.addClass(this.$$element,NOT_EMPTY_CLASS)}},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,DIRTY_CLASS);this.$$animate.addClass(this.$$element,PRISTINE_CLASS)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,PRISTINE_CLASS);this.$$animate.addClass(this.$$element,DIRTY_CLASS);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,UNTOUCHED_CLASS,TOUCHED_CLASS)},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,TOUCHED_CLASS,UNTOUCHED_CLASS)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(isNumberNaN(this.$modelValue)){return}
var viewValue=this.$$lastCommittedViewValue;var modelValue=this.$$rawModelValue;var prevValid=this.$valid;var prevModelValue=this.$modelValue;var allowInvalid=this.$options.getOption('allowInvalid');var that=this;this.$$runValidators(modelValue,viewValue,function(allValid){if(!allowInvalid&&prevValid!==allValid){that.$modelValue=allValid?modelValue:undefined;if(that.$modelValue!==prevModelValue){that.$$writeModelToScope()}}})},$$runValidators:function(modelValue,viewValue,doneCallback){this.$$currentValidationRunId++;var localValidationRunId=this.$$currentValidationRunId;var that=this;if(!processParseErrors()){validationDone(!1);return}
if(!processSyncValidators()){validationDone(!1);return}
processAsyncValidators();function processParseErrors(){var errorKey=that.$$parserName;if(isUndefined(that.$$parserValid)){setValidity(errorKey,null)}else{if(!that.$$parserValid){forEach(that.$validators,function(v,name){setValidity(name,null)});forEach(that.$asyncValidators,function(v,name){setValidity(name,null)})}
setValidity(errorKey,that.$$parserValid);return that.$$parserValid}
return!0}
function processSyncValidators(){var syncValidatorsValid=!0;forEach(that.$validators,function(validator,name){var result=Boolean(validator(modelValue,viewValue));syncValidatorsValid=syncValidatorsValid&&result;setValidity(name,result)});if(!syncValidatorsValid){forEach(that.$asyncValidators,function(v,name){setValidity(name,null)});return!1}
return!0}
function processAsyncValidators(){var validatorPromises=[];var allValid=!0;forEach(that.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise)){throw ngModelMinErr('nopromise','Expected asynchronous validator to return a promise but got \'{0}\' instead.',promise)}
setValidity(name,undefined);validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1;setValidity(name,!1)}))});if(!validatorPromises.length){validationDone(!0)}else{that.$$q.all(validatorPromises).then(function(){validationDone(allValid)},noop)}}
function setValidity(name,isValid){if(localValidationRunId===that.$$currentValidationRunId){that.$setValidity(name,isValid)}}
function validationDone(allValid){if(localValidationRunId===that.$$currentValidationRunId){doneCallback(allValid)}}},$commitViewValue:function(){var viewValue=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue===viewValue&&(viewValue!==''||!this.$$hasNativeValidators)){return}
this.$$updateEmptyClasses(viewValue);this.$$lastCommittedViewValue=viewValue;if(this.$pristine){this.$setDirty()}
this.$$parseAndValidate()},$$parseAndValidate:function(){var viewValue=this.$$lastCommittedViewValue;var modelValue=viewValue;var that=this;this.$$parserValid=isUndefined(modelValue)?undefined:!0;this.$setValidity(this.$$parserName,null);this.$$parserName='parse';if(this.$$parserValid){for(var i=0;i<this.$parsers.length;i++){modelValue=this.$parsers[i](modelValue);if(isUndefined(modelValue)){this.$$parserValid=!1;break}}}
if(isNumberNaN(this.$modelValue)){this.$modelValue=this.$$ngModelGet(this.$$scope)}
var prevModelValue=this.$modelValue;var allowInvalid=this.$options.getOption('allowInvalid');this.$$rawModelValue=modelValue;if(allowInvalid){this.$modelValue=modelValue;writeToModelIfNeeded()}
this.$$runValidators(modelValue,this.$$lastCommittedViewValue,function(allValid){if(!allowInvalid){that.$modelValue=allValid?modelValue:undefined;writeToModelIfNeeded()}});function writeToModelIfNeeded(){if(that.$modelValue!==prevModelValue){that.$$writeModelToScope()}}},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(value,trigger){this.$viewValue=value;if(this.$options.getOption('updateOnDefault')){this.$$debounceViewValueCommit(trigger)}},$$debounceViewValueCommit:function(trigger){var debounceDelay=this.$options.getOption('debounce');if(isNumber(debounceDelay[trigger])){debounceDelay=debounceDelay[trigger]}else if(isNumber(debounceDelay['default'])&&this.$options.getOption('updateOn').indexOf(trigger)===-1){debounceDelay=debounceDelay['default']}else if(isNumber(debounceDelay['*'])){debounceDelay=debounceDelay['*']}
this.$$timeout.cancel(this.$$pendingDebounce);var that=this;if(debounceDelay>0){this.$$pendingDebounce=this.$$timeout(function(){that.$commitViewValue()},debounceDelay)}else if(this.$$rootScope.$$phase){this.$commitViewValue()}else{this.$$scope.$apply(function(){that.$commitViewValue()})}},$overrideModelOptions:function(options){this.$options=this.$options.createChild(options);this.$$setUpdateOnEvents()},$processModelValue:function(){var viewValue=this.$$format();if(this.$viewValue!==viewValue){this.$$updateEmptyClasses(viewValue);this.$viewValue=this.$$lastCommittedViewValue=viewValue;this.$render();this.$$runValidators(this.$modelValue,this.$viewValue,noop)}},$$format:function(){var formatters=this.$formatters,idx=formatters.length;var viewValue=this.$modelValue;while(idx--){viewValue=formatters[idx](viewValue)}
return viewValue},$$setModelValue:function(modelValue){this.$modelValue=this.$$rawModelValue=modelValue;this.$$parserValid=undefined;this.$processModelValue()},$$setUpdateOnEvents:function(){if(this.$$updateEvents){this.$$element.off(this.$$updateEvents,this.$$updateEventHandler)}
this.$$updateEvents=this.$options.getOption('updateOn');if(this.$$updateEvents){this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)}},$$updateEventHandler:function(ev){this.$$debounceViewValueCommit(ev&&ev.type)}};function setupModelWatcher(ctrl){ctrl.$$scope.$watch(function ngModelWatch(scope){var modelValue=ctrl.$$ngModelGet(scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$$setModelValue(modelValue)}
return modelValue})}
addSetValidityMethod({clazz:NgModelController,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]}});var ngModelDirective=['$rootScope',function($rootScope){return{restrict:'A',require:['ngModel','^?form','^?ngModelOptions'],controller:NgModelController,priority:1,compile:function ngModelCompile(element){element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS);return{pre:function ngModelPreLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm,optionsCtrl=ctrls[2];if(optionsCtrl){modelCtrl.$options=optionsCtrl.$options}
modelCtrl.$$initGetterSetters();formCtrl.$addControl(modelCtrl);attr.$observe('name',function(newValue){if(modelCtrl.$name!==newValue){modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}});scope.$on('$destroy',function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function ngModelPostLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$$setUpdateOnEvents();function setTouched(){modelCtrl.$setTouched()}
element.on('blur',function(){if(modelCtrl.$touched)return;if($rootScope.$$phase){scope.$evalAsync(setTouched)}else{scope.$apply(setTouched)}})}}}}}];var defaultModelOptions;var DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/;function ModelOptions(options){this.$$options=options}
ModelOptions.prototype={getOption:function(name){return this.$$options[name]},createChild:function(options){var inheritAll=!1;options=extend({},options);forEach(options,function(option,key){if(option==='$inherit'){if(key==='*'){inheritAll=!0}else{options[key]=this.$$options[key];if(key==='updateOn'){options.updateOnDefault=this.$$options.updateOnDefault}}}else{if(key==='updateOn'){options.updateOnDefault=!1;options[key]=trim(option.replace(DEFAULT_REGEXP,function(){options.updateOnDefault=!0;return' '}))}}},this);if(inheritAll){delete options['*'];defaults(options,this.$$options)}
defaults(options,defaultModelOptions.$$options);return new ModelOptions(options)}};defaultModelOptions=new ModelOptions({updateOn:'',updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ngModelOptionsDirective=function(){NgModelOptionsController.$inject=['$attrs','$scope'];function NgModelOptionsController($attrs,$scope){this.$$attrs=$attrs;this.$$scope=$scope}
NgModelOptionsController.prototype={$onInit:function(){var parentOptions=this.parentCtrl?this.parentCtrl.$options:defaultModelOptions;var modelOptionsDefinition=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=parentOptions.createChild(modelOptionsDefinition)}};return{restrict:'A',priority:10,require:{parentCtrl:'?^^ngModelOptions'},bindToController:!0,controller:NgModelOptionsController}};function defaults(dst,src){forEach(src,function(value,key){if(!isDefined(dst[key])){dst[key]=value}})}
var ngNonBindableDirective=ngDirective({terminal:!0,priority:1000});var ngOptionsMinErr=minErr('ngOptions');var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var ngOptionsDirective=['$compile','$document','$parse',function($compile,$document,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!(match)){throw ngOptionsMinErr('iexp','Expected expression in form of '+'\'_select_ (as _label_)? for (_key_,)?_value_ in _collection_\''+' but got \'{0}\'. Element: {1}',optionsExp,startingTag(selectElement))}
var valueName=match[5]||match[7];var keyName=match[6];var selectAs=/ as /.test(match[0])&&match[1];var trackBy=match[9];var valueFn=$parse(match[2]?match[1]:valueName);var selectAsFn=selectAs&&$parse(selectAs);var viewValueFn=selectAsFn||valueFn;var trackByFn=trackBy&&$parse(trackBy);var getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function getHashOfValue(value){return hashKey(value)};var getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))};var displayFn=$parse(match[2]||match[1]);var groupByFn=$parse(match[3]||'');var disableWhenFn=$parse(match[4]||'');var valuesFn=$parse(match[8]);var locals={};var getLocals=keyName?function(value,key){locals[keyName]=key;locals[valueName]=value;return locals}:function(value){locals[valueName]=value;return locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue;this.viewValue=viewValue;this.label=label;this.group=group;this.disabled=disabled}
function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues)){optionValuesKeys=optionValues}else{optionValuesKeys=[];for(var itemKey in optionValues){if(optionValues.hasOwnProperty(itemKey)&&itemKey.charAt(0)!=='$'){optionValuesKeys.push(itemKey)}}}
return optionValuesKeys}
return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];var optionValuesKeys=getOptionValuesKeys(optionValues);var optionValuesLength=optionValuesKeys.length;for(var index=0;index<optionValuesLength;index++){var key=(optionValues===optionValuesKeys)?index:optionValuesKeys[index];var value=optionValues[key];var locals=getLocals(value,key);var selectValue=getTrackByValueFn(value,locals);watchedArray.push(selectValue);if(match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}
if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}
return watchedArray}),getOptions:function(){var optionItems=[];var selectValueMap={};var optionValues=valuesFn(scope)||[];var optionValuesKeys=getOptionValuesKeys(optionValues);var optionValuesLength=optionValuesKeys.length;for(var index=0;index<optionValuesLength;index++){var key=(optionValues===optionValuesKeys)?index:optionValuesKeys[index];var value=optionValues[key];var locals=getLocals(value,key);var viewValue=viewValueFn(scope,locals);var selectValue=getTrackByValueFn(viewValue,locals);var label=displayFn(scope,locals);var group=groupByFn(scope,locals);var disabled=disableWhenFn(scope,locals);var optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem);selectValueMap[selectValue]=optionItem}
return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?copy(option.viewValue):option.viewValue}}}}}
var optionTemplate=window.document.createElement('option'),optGroupTemplate=window.document.createElement('optgroup');function ngOptionsPostLink(scope,selectElement,attr,ctrls){var selectCtrl=ctrls[0];var ngModelCtrl=ctrls[1];var multiple=attr.multiple;for(var i=0,children=selectElement.children(),ii=children.length;i<ii;i++){if(children[i].value===''){selectCtrl.hasEmptyOption=!0;selectCtrl.emptyOption=children.eq(i);break}}
selectElement.empty();var providedEmptyOption=!!selectCtrl.emptyOption;var unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val('?');var options;var ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope);var listFragment=$document[0].createDocumentFragment();selectCtrl.generateUnknownOptionValue=function(val){return'?'};if(!multiple){selectCtrl.writeValue=function writeNgOptionsValue(value){if(!options)return;var selectedOption=selectElement[0].options[selectElement[0].selectedIndex];var option=options.getOptionFromViewValue(value);if(selectedOption)selectedOption.removeAttribute('selected');if(option){if(selectElement[0].value!==option.selectValue){selectCtrl.removeUnknownOption();selectElement[0].value=option.selectValue;option.element.selected=!0}
option.element.setAttribute('selected','selected')}else{selectCtrl.selectUnknownOrEmptyOption(value)}};selectCtrl.readValue=function readNgOptionsValue(){var selectedOption=options.selectValueMap[selectElement.val()];if(selectedOption&&!selectedOption.disabled){selectCtrl.unselectEmptyOption();selectCtrl.removeUnknownOption();return options.getViewValueFromOption(selectedOption)}
return null};if(ngOptions.trackBy){scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})}}else{selectCtrl.writeValue=function writeNgOptionsMultiple(values){if(!options)return;var selectedOptions=values&&values.map(getAndUpdateSelectedOption)||[];options.items.forEach(function(option){if(option.element.selected&&!includes(selectedOptions,option)){option.element.selected=!1}})};selectCtrl.readValue=function readNgOptionsMultiple(){var selectedValues=selectElement.val()||[],selections=[];forEach(selectedValues,function(value){var option=options.selectValueMap[value];if(option&&!option.disabled)selections.push(options.getViewValueFromOption(option));});return selections};if(ngOptions.trackBy){scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue)){return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})}},function(){ngModelCtrl.$render()})}}
if(providedEmptyOption){$compile(selectCtrl.emptyOption)(scope);selectElement.prepend(selectCtrl.emptyOption);if(selectCtrl.emptyOption[0].nodeType===NODE_TYPE_COMMENT){selectCtrl.hasEmptyOption=!1;selectCtrl.registerOption=function(optionScope,optionEl){if(optionEl.val()===''){selectCtrl.hasEmptyOption=!0;selectCtrl.emptyOption=optionEl;selectCtrl.emptyOption.removeClass('ng-scope');ngModelCtrl.$render();optionEl.on('$destroy',function(){var needsRerender=selectCtrl.$isEmptyOptionSelected();selectCtrl.hasEmptyOption=!1;selectCtrl.emptyOption=undefined;if(needsRerender)ngModelCtrl.$render();})}}}else{selectCtrl.emptyOption.removeClass('ng-scope')}}
scope.$watchCollection(ngOptions.getWatchables,updateOptions);function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement);updateOptionElement(option,optionElement)}
function getAndUpdateSelectedOption(viewValue){var option=options.getOptionFromViewValue(viewValue);var element=option&&option.element;if(element&&!element.selected)element.selected=!0;return option}
function updateOptionElement(option,element){option.element=element;element.disabled=option.disabled;if(option.label!==element.label){element.label=option.label;element.textContent=option.label}
element.value=option.selectValue}
function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options){for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];if(isDefined(option.group)){jqLiteRemove(option.element.parentNode)}else{jqLiteRemove(option.element)}}}
options=ngOptions.getOptions();var groupElementMap={};options.items.forEach(function addOption(option){var groupElement;if(isDefined(option.group)){groupElement=groupElementMap[option.group];if(!groupElement){groupElement=optGroupTemplate.cloneNode(!1);listFragment.appendChild(groupElement);groupElement.label=option.group===null?'null':option.group;groupElementMap[option.group]=groupElement}
addOptionElement(option,groupElement)}else{addOptionElement(option,listFragment)}});selectElement[0].appendChild(listFragment);ngModelCtrl.$render();if(!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();var isNotPrimitive=ngOptions.trackBy||multiple;if(isNotPrimitive?!equals(previousValue,nextValue):previousValue!==nextValue){ngModelCtrl.$setViewValue(nextValue);ngModelCtrl.$render()}}}}
return{restrict:'A',terminal:!0,require:['select','ngModel'],link:{pre:function ngOptionsPreLink(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:ngOptionsPostLink}}}];var ngPluralizeDirective=['$locale','$interpolate','$log',function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+'-'+offset+endSymbol,watchRemover=angular.noop,lastCount;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?'-':'')+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}});forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))});scope.$watch(numberExp,function ngPluralizeWatchAction(newVal){var count=parseFloat(newVal);var countIsNaN=isNumberNaN(count);if(!countIsNaN&&!(count in whens)){count=$locale.pluralCat(count-offset)}
if((count!==lastCount)&&!(countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];if(isUndefined(whenExpFn)){if(newVal!=null){$log.debug('ngPluralize: no rule defined for \''+count+'\' in '+whenExp)}
watchRemover=noop;updateElementText()}else{watchRemover=scope.$watch(whenExpFn,updateElementText)}
lastCount=count}});function updateElementText(newText){element.text(newText||'')}}}}];var ngRefMinErr=minErr('ngRef');var ngRefDirective=['$parse',function($parse){return{priority:-1,restrict:'A',compile:function(tElement,tAttrs){var controllerName=directiveNormalize(nodeName_(tElement));var getter=$parse(tAttrs.ngRef);var setter=getter.assign||function(){throw ngRefMinErr('nonassign','Expression in ngRef="{0}" is non-assignable!',tAttrs.ngRef)};return function(scope,element,attrs){var refValue;if(attrs.hasOwnProperty('ngRefRead')){if(attrs.ngRefRead==='$element'){refValue=element}else{refValue=element.data('$'+attrs.ngRefRead+'Controller');if(!refValue){throw ngRefMinErr('noctrl','The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',attrs.ngRefRead,tAttrs.ngRef)}}}else{refValue=element.data('$'+controllerName+'Controller')}
refValue=refValue||element;setter(scope,refValue);element.on('$destroy',function(){if(getter(scope)===refValue){setter(scope,null)}})}}}}];var ngRepeatDirective=['$parse','$animate','$compile',function($parse,$animate,$compile){var NG_REMOVED='$$NG_REMOVED';var ngRepeatMinErr=minErr('ngRepeat');var updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value;if(keyIdentifier)scope[keyIdentifier]=key;scope.$index=index;scope.$first=(index===0);scope.$last=(index===(arrayLength-1));scope.$middle=!(scope.$first||scope.$last);scope.$odd=!(scope.$even=(index&1)===0)};var getBlockStart=function(block){return block.clone[0]};var getBlockEnd=function(block){return block.clone[block.clone.length-1]};var trackByIdArrayFn=function($scope,key,value){return hashKey(value)};var trackByIdObjFn=function($scope,key){return key};return{restrict:'A',multiElement:!0,transclude:'element',priority:1000,terminal:!0,$$tlb:!0,compile:function ngRepeatCompile($element,$attr){var expression=$attr.ngRepeat;var ngRepeatEndComment=$compile.$$createComment('end ngRepeat',expression);var match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match){throw ngRepeatMinErr('iexp','Expected expression in form of \'_item_ in _collection_[ track by _id_]\' but got \'{0}\'.',expression)}
var lhs=match[1];var rhs=match[2];var aliasAs=match[3];var trackByExp=match[4];match=lhs.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!match){throw ngRepeatMinErr('iidexp','\'_item_\' in \'_item_ in _collection_\' should be an identifier or \'(_key_, _value_)\' expression, but got \'{0}\'.',lhs)}
var valueIdentifier=match[3]||match[1];var keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs))){throw ngRepeatMinErr('badident','alias \'{0}\' is invalid --- must be a valid JS identifier which is not a reserved name.',aliasAs)}
var trackByIdExpFn;if(trackByExp){var hashFnLocals={$id:hashKey};var trackByExpGetter=$parse(trackByExp);trackByIdExpFn=function($scope,key,value,index){if(keyIdentifier)hashFnLocals[keyIdentifier]=key;hashFnLocals[valueIdentifier]=value;hashFnLocals.$index=index;return trackByExpGetter($scope,hashFnLocals)}}
return function ngRepeatLink($scope,$element,$attr,ctrl,$transclude){var lastBlockMap=createMap();$scope.$watchCollection(rhs,function ngRepeatAction(collection){var index,length,previousNode=$element[0],nextNode,nextBlockMap=createMap(),collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove;if(aliasAs){$scope[aliasAs]=collection}
if(isArrayLike(collection)){collectionKeys=collection;trackByIdFn=trackByIdExpFn||trackByIdArrayFn}else{trackByIdFn=trackByIdExpFn||trackByIdObjFn;collectionKeys=[];for(var itemKey in collection){if(hasOwnProperty.call(collection,itemKey)&&itemKey.charAt(0)!=='$'){collectionKeys.push(itemKey)}}}
collectionLength=collectionKeys.length;nextBlockOrder=new Array(collectionLength);for(index=0;index<collectionLength;index++){key=(collection===collectionKeys)?index:collectionKeys[index];value=collection[key];trackById=trackByIdFn($scope,key,value,index);if(lastBlockMap[trackById]){block=lastBlockMap[trackById];delete lastBlockMap[trackById];nextBlockMap[trackById]=block;nextBlockOrder[index]=block}else if(nextBlockMap[trackById]){forEach(nextBlockOrder,function(block){if(block&&block.scope)lastBlockMap[block.id]=block});throw ngRepeatMinErr('dupes','Duplicates in a repeater are not allowed. Use \'track by\' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}',expression,trackById,value)}else{nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined};nextBlockMap[trackById]=!0}}
if(hashFnLocals){hashFnLocals[valueIdentifier]=undefined}
for(var blockKey in lastBlockMap){block=lastBlockMap[blockKey];elementsToRemove=getBlockNodes(block.clone);$animate.leave(elementsToRemove);if(elementsToRemove[0].parentNode){for(index=0,length=elementsToRemove.length;index<length;index++){elementsToRemove[index][NG_REMOVED]=!0}}
block.scope.$destroy()}
for(index=0;index<collectionLength;index++){key=(collection===collectionKeys)?index:collectionKeys[index];value=collection[key];block=nextBlockOrder[index];if(block.scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode[NG_REMOVED]);if(getBlockStart(block)!==nextNode){$animate.move(getBlockNodes(block.clone),null,previousNode)}
previousNode=getBlockEnd(block);updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else{$transclude(function ngRepeatTransclude(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode;$animate.enter(clone,null,previousNode);previousNode=endNode;block.clone=clone;nextBlockMap[block.id]=block;updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)})}}
lastBlockMap=nextBlockMap})}}}}];var NG_HIDE_CLASS='ng-hide';var NG_HIDE_IN_PROGRESS_CLASS='ng-hide-animate';var ngShowDirective=['$animate',function($animate){return{restrict:'A',multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function ngShowWatchAction(value){$animate[value?'removeClass':'addClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}];var ngHideDirective=['$animate',function($animate){return{restrict:'A',multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function ngHideWatchAction(value){$animate[value?'addClass':'removeClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}];var ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watchCollection(attr.ngStyle,function ngStyleWatchAction(newStyles,oldStyles){if(oldStyles&&(newStyles!==oldStyles)){if(!newStyles){newStyles={}}
forEach(oldStyles,function(val,style){if(newStyles[style]==null){newStyles[style]=''}})}
if(newStyles)element.css(newStyles);})});var ngSwitchDirective=['$animate','$compile',function($animate,$compile){return{require:'ngSwitch',controller:['$scope',function NgSwitchController(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[];var spliceFactory=function(array,index){return function(response){if(response!==!1)array.splice(index,1);}};scope.$watch(watchExpr,function ngSwitchWatchAction(value){var i,ii;while(previousLeaveAnimations.length){$animate.cancel(previousLeaveAnimations.pop())}
for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var runner=previousLeaveAnimations[i]=$animate.leave(selected);runner.done(spliceFactory(previousLeaveAnimations,i))}
selectedElements.length=0;selectedScopes.length=0;if((selectedTranscludes=ngSwitchController.cases['!'+value]||ngSwitchController.cases['?'])){forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment('end ngSwitchWhen');var block={clone:caseElement};selectedElements.push(block);$animate.enter(caseElement,anchor.parent(),anchor)})})}})}}}];var ngSwitchWhenDirective=ngDirective({transclude:'element',priority:1200,require:'^ngSwitch',multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){var cases=attrs.ngSwitchWhen.split(attrs.ngSwitchWhenSeparator).sort().filter(function(element,index,array){return array[index-1]!==element});forEach(cases,function(whenCase){ctrl.cases['!'+whenCase]=(ctrl.cases['!'+whenCase]||[]);ctrl.cases['!'+whenCase].push({transclude:$transclude,element:element})})}});var ngSwitchDefaultDirective=ngDirective({transclude:'element',priority:1200,require:'^ngSwitch',multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases['?']=(ctrl.cases['?']||[]);ctrl.cases['?'].push({transclude:$transclude,element:element})}});var ngTranscludeMinErr=minErr('ngTransclude');var ngTranscludeDirective=['$compile',function($compile){return{restrict:'EAC',compile:function ngTranscludeCompile(tElement){var fallbackLinkFn=$compile(tElement.contents());tElement.empty();return function ngTranscludePostLink($scope,$element,$attrs,controller,$transclude){if(!$transclude){throw ngTranscludeMinErr('orphan','Illegal use of ngTransclude directive in the template! '+'No parent directive that requires a transclusion found. '+'Element: {0}',startingTag($element))}
if($attrs.ngTransclude===$attrs.$attr.ngTransclude){$attrs.ngTransclude=''}
var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;$transclude(ngTranscludeCloneAttachFn,null,slotName);if(slotName&&!$transclude.isSlotFilled(slotName)){useFallbackContent()}
function ngTranscludeCloneAttachFn(clone,transcludedScope){if(clone.length&&notWhitespace(clone)){$element.append(clone)}else{useFallbackContent();transcludedScope.$destroy()}}
function useFallbackContent(){fallbackLinkFn($scope,function(clone){$element.append(clone)})}
function notWhitespace(nodes){for(var i=0,ii=nodes.length;i<ii;i++){var node=nodes[i];if(node.nodeType!==NODE_TYPE_TEXT||node.nodeValue.trim()){return!0}}}}}}}];var scriptDirective=['$templateCache',function($templateCache){return{restrict:'E',terminal:!0,compile:function(element,attr){if(attr.type==='text/ng-template'){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}];var noopNgModelController={$setViewValue:noop,$render:noop};function setOptionSelectedStatus(optionEl,value){optionEl.prop('selected',value);optionEl.attr('selected',value)}
var SelectController=['$element','$scope',function($element,$scope){var self=this,optionsMap=new NgMap();self.selectValueMap={};self.ngModelCtrl=noopNgModelController;self.multiple=!1;self.unknownOption=jqLite(window.document.createElement('option'));self.hasEmptyOption=!1;self.emptyOption=undefined;self.renderUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal);$element.prepend(self.unknownOption);setOptionSelectedStatus(self.unknownOption,!0);$element.val(unknownVal)};self.updateUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal);setOptionSelectedStatus(self.unknownOption,!0);$element.val(unknownVal)};self.generateUnknownOptionValue=function(val){return'? '+hashKey(val)+' ?'};self.removeUnknownOption=function(){if(self.unknownOption.parent())self.unknownOption.remove();};self.selectEmptyOption=function(){if(self.emptyOption){$element.val('');setOptionSelectedStatus(self.emptyOption,!0)}};self.unselectEmptyOption=function(){if(self.hasEmptyOption){setOptionSelectedStatus(self.emptyOption,!1)}};$scope.$on('$destroy',function(){self.renderUnknownOption=noop});self.readValue=function readSingleValue(){var val=$element.val();var realVal=val in self.selectValueMap?self.selectValueMap[val]:val;if(self.hasOption(realVal)){return realVal}
return null};self.writeValue=function writeSingleValue(value){var currentlySelectedOption=$element[0].options[$element[0].selectedIndex];if(currentlySelectedOption)setOptionSelectedStatus(jqLite(currentlySelectedOption),!1);if(self.hasOption(value)){self.removeUnknownOption();var hashedVal=hashKey(value);$element.val(hashedVal in self.selectValueMap?hashedVal:value);var selectedOption=$element[0].options[$element[0].selectedIndex];setOptionSelectedStatus(jqLite(selectedOption),!0)}else{self.selectUnknownOrEmptyOption(value)}};self.addOption=function(value,element){if(element[0].nodeType===NODE_TYPE_COMMENT)return;assertNotHasOwnProperty(value,'"option value"');if(value===''){self.hasEmptyOption=!0;self.emptyOption=element}
var count=optionsMap.get(value)||0;optionsMap.set(value,count+1);scheduleRender()};self.removeOption=function(value){var count=optionsMap.get(value);if(count){if(count===1){optionsMap.delete(value);if(value===''){self.hasEmptyOption=!1;self.emptyOption=undefined}}else{optionsMap.set(value,count-1)}}};self.hasOption=function(value){return!!optionsMap.get(value)};self.$hasEmptyOption=function(){return self.hasEmptyOption};self.$isUnknownOptionSelected=function(){return $element[0].options[0]===self.unknownOption[0]};self.$isEmptyOptionSelected=function(){return self.hasEmptyOption&&$element[0].options[$element[0].selectedIndex]===self.emptyOption[0]};self.selectUnknownOrEmptyOption=function(value){if(value==null&&self.emptyOption){self.removeUnknownOption();self.selectEmptyOption()}else if(self.unknownOption.parent().length){self.updateUnknownOption(value)}else{self.renderUnknownOption(value)}};var renderScheduled=!1;function scheduleRender(){if(renderScheduled)return;renderScheduled=!0;$scope.$$postDigest(function(){renderScheduled=!1;self.ngModelCtrl.$render()})}
var updateScheduled=!1;function scheduleViewValueUpdate(renderAfter){if(updateScheduled)return;updateScheduled=!0;$scope.$$postDigest(function(){if($scope.$$destroyed)return;updateScheduled=!1;self.ngModelCtrl.$setViewValue(self.readValue());if(renderAfter)self.ngModelCtrl.$render();})}
self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(optionAttrs.$attr.ngValue){var oldVal,hashedVal;optionAttrs.$observe('value',function valueAttributeObserveAction(newVal){var removal;var previouslySelected=optionElement.prop('selected');if(isDefined(hashedVal)){self.removeOption(oldVal);delete self.selectValueMap[hashedVal];removal=!0}
hashedVal=hashKey(newVal);oldVal=newVal;self.selectValueMap[hashedVal]=newVal;self.addOption(newVal,optionElement);optionElement.attr('value',hashedVal);if(removal&&previouslySelected){scheduleViewValueUpdate()}})}else if(interpolateValueFn){optionAttrs.$observe('value',function valueAttributeObserveAction(newVal){self.readValue();var removal;var previouslySelected=optionElement.prop('selected');if(isDefined(oldVal)){self.removeOption(oldVal);removal=!0}
oldVal=newVal;self.addOption(newVal,optionElement);if(removal&&previouslySelected){scheduleViewValueUpdate()}})}else if(interpolateTextFn){optionScope.$watch(interpolateTextFn,function interpolateWatchAction(newVal,oldVal){optionAttrs.$set('value',newVal);var previouslySelected=optionElement.prop('selected');if(oldVal!==newVal){self.removeOption(oldVal)}
self.addOption(newVal,optionElement);if(oldVal&&previouslySelected){scheduleViewValueUpdate()}})}else{self.addOption(optionAttrs.value,optionElement)}
optionAttrs.$observe('disabled',function(newVal){if(newVal==='true'||newVal&&optionElement.prop('selected')){if(self.multiple){scheduleViewValueUpdate(!0)}else{self.ngModelCtrl.$setViewValue(null);self.ngModelCtrl.$render()}}});optionElement.on('$destroy',function(){var currentValue=self.readValue();var removeValue=optionAttrs.value;self.removeOption(removeValue);scheduleRender();if(self.multiple&&currentValue&&currentValue.indexOf(removeValue)!==-1||currentValue===removeValue){scheduleViewValueUpdate(!0)}})}}];var selectDirective=function(){return{restrict:'E',require:['select','?ngModel'],controller:SelectController,priority:1,link:{pre:selectPreLink,post:selectPostLink}};function selectPreLink(scope,element,attr,ctrls){var selectCtrl=ctrls[0];var ngModelCtrl=ctrls[1];if(!ngModelCtrl){selectCtrl.registerOption=noop;return}
selectCtrl.ngModelCtrl=ngModelCtrl;element.on('change',function(){selectCtrl.removeUnknownOption();scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})});if(attr.multiple){selectCtrl.multiple=!0;selectCtrl.readValue=function readMultipleValue(){var array=[];forEach(element.find('option'),function(option){if(option.selected&&!option.disabled){var val=option.value;array.push(val in selectCtrl.selectValueMap?selectCtrl.selectValueMap[val]:val)}});return array};selectCtrl.writeValue=function writeMultipleValue(value){forEach(element.find('option'),function(option){var shouldBeSelected=!!value&&(includes(value,option.value)||includes(value,selectCtrl.selectValueMap[option.value]));var currentlySelected=option.selected;if(shouldBeSelected!==currentlySelected){setOptionSelectedStatus(jqLite(option),shouldBeSelected)}})};var lastView,lastViewRef=NaN;scope.$watch(function selectMultipleWatch(){if(lastViewRef===ngModelCtrl.$viewValue&&!equals(lastView,ngModelCtrl.$viewValue)){lastView=shallowCopy(ngModelCtrl.$viewValue);ngModelCtrl.$render()}
lastViewRef=ngModelCtrl.$viewValue});ngModelCtrl.$isEmpty=function(value){return!value||value.length===0}}}
function selectPostLink(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}};var optionDirective=['$interpolate',function($interpolate){return{restrict:'E',priority:100,compile:function(element,attr){var interpolateValueFn,interpolateTextFn;if(isDefined(attr.ngValue)){}else if(isDefined(attr.value)){interpolateValueFn=$interpolate(attr.value,!0)}else{interpolateTextFn=$interpolate(element.text(),!0);if(!interpolateTextFn){attr.$set('value',element.text())}}
return function(scope,element,attr){var selectCtrlName='$selectController',parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);if(selectCtrl){selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}}];var requiredDirective=['$parse',function($parse){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var value=attr.required||$parse(attr.ngRequired)(scope);attr.required=!0;ctrl.$validators.required=function(modelValue,viewValue){return!value||!ctrl.$isEmpty(viewValue)};attr.$observe('required',function(newVal){if(value!==newVal){value=newVal;ctrl.$validate()}})}}}];var patternDirective=['$parse',function($parse){return{restrict:'A',require:'?ngModel',compile:function(tElm,tAttr){var patternExp;var parseFn;if(tAttr.ngPattern){patternExp=tAttr.ngPattern;if(tAttr.ngPattern.charAt(0)==='/'&&REGEX_STRING_REGEXP.test(tAttr.ngPattern)){parseFn=function(){return tAttr.ngPattern}}else{parseFn=$parse(tAttr.ngPattern)}}
return function(scope,elm,attr,ctrl){if(!ctrl)return;var attrVal=attr.pattern;if(attr.ngPattern){attrVal=parseFn(scope)}else{patternExp=attr.pattern}
var regexp=parsePatternAttr(attrVal,patternExp,elm);attr.$observe('pattern',function(newVal){var oldRegexp=regexp;regexp=parsePatternAttr(newVal,patternExp,elm);if((oldRegexp&&oldRegexp.toString())!==(regexp&&regexp.toString())){ctrl.$validate()}});ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}}];var maxlengthDirective=['$parse',function($parse){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var maxlength=attr.maxlength||$parse(attr.ngMaxlength)(scope);var maxlengthParsed=parseLength(maxlength);attr.$observe('maxlength',function(value){if(maxlength!==value){maxlengthParsed=parseLength(value);maxlength=value;ctrl.$validate()}});ctrl.$validators.maxlength=function(modelValue,viewValue){return(maxlengthParsed<0)||ctrl.$isEmpty(viewValue)||(viewValue.length<=maxlengthParsed)}}}}];var minlengthDirective=['$parse',function($parse){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var minlength=attr.minlength||$parse(attr.ngMinlength)(scope);var minlengthParsed=parseLength(minlength)||-1;attr.$observe('minlength',function(value){if(minlength!==value){minlengthParsed=parseLength(value)||-1;minlength=value;ctrl.$validate()}});ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlengthParsed}}}}];function parsePatternAttr(regex,patternExp,elm){if(!regex)return undefined;if(isString(regex)){regex=new RegExp('^'+regex+'$')}
if(!regex.test){throw minErr('ngPattern')('noregexp','Expected {0} to be a RegExp but was {1}. Element: {2}',patternExp,regex,startingTag(elm))}
return regex}
function parseLength(val){var intVal=toInt(val);return isNumberNaN(intVal)?-1:intVal}
if(window.angular.bootstrap){if(window.console){console.log('WARNING: Tried to load AngularJS more than once.')}
return}
bindJQuery();publishExternalAPI(angular);angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function getDecimals(n){n=n+'';var i=n.indexOf('.');return(i==-1)?0:n.length-i-1}
function getVF(n,opt_precision){var v=opt_precision;if(undefined===v){v=Math.min(getDecimals(n),3)}
var base=Math.pow(10,v);var f=((n*base)|0)%base;return{v:v,f:f}}
$provide.value("$locale",{"DATETIME_FORMATS":{"AMPMS":["AM","PM"],"DAY":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"ERANAMES":["Before Christ","Anno Domini"],"ERAS":["BC","AD"],"FIRSTDAYOFWEEK":6,"MONTH":["January","February","March","April","May","June","July","August","September","October","November","December"],"SHORTDAY":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"SHORTMONTH":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"STANDALONEMONTH":["January","February","March","April","May","June","July","August","September","October","November","December"],"WEEKENDRANGE":[5,6],"fullDate":"EEEE, MMMM d, y","longDate":"MMMM d, y","medium":"MMM d, y h:mm:ss a","mediumDate":"MMM d, y","mediumTime":"h:mm:ss a","short":"M/d/yy h:mm a","shortDate":"M/d/yy","shortTime":"h:mm a"},"NUMBER_FORMATS":{"CURRENCY_SYM":"$","DECIMAL_SEP":".","GROUP_SEP":",","PATTERNS":[{"gSize":3,"lgSize":3,"maxFrac":3,"minFrac":0,"minInt":1,"negPre":"-","negSuf":"","posPre":"","posSuf":""},{"gSize":3,"lgSize":3,"maxFrac":2,"minFrac":2,"minInt":1,"negPre":"-\u00a4","negSuf":"","posPre":"\u00a4","posSuf":""}]},"id":"en-us","localeID":"en_US","pluralCat":function(n,opt_precision){var i=n|0;var vf=getVF(n,opt_precision);if(i==1&&vf.v==0){return PLURAL_CATEGORY.ONE}return PLURAL_CATEGORY.OTHER}})}]);jqLite(function(){angularInit(window.document,bootstrap)})})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');/**
 * @license AngularJS v1.7.7
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window,angular){'use strict';function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++){dst[i]=src[i]}}else if(isObject(src)){dst=dst||{};for(var key in src){if(!(key.charAt(0)==='$'&&key.charAt(1)==='$')){dst[key]=src[key]}}}
return dst||src}
function routeToRegExp(path,opts){var keys=[];var pattern=path.replace(/([().])/g,'\\$1').replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(_,slash,key,option){var optional=option==='?'||option==='*?';var star=option==='*'||option==='*?';keys.push({name:key,optional:optional});slash=slash||'';return((optional?'(?:'+slash:slash+'(?:')+(star?'(.+?)':'([^/]+)')+(optional?'?)?':')'))}).replace(/([/$*])/g,'\\$1');if(opts.ignoreTrailingSlashes){pattern=pattern.replace(/\/+$/,'')+'/*'}
return{keys:keys,regexp:new RegExp('^'+pattern+'(?:[?#]|$)',opts.caseInsensitiveMatch?'i':'')}}
var isArray;var isObject;var isDefined;var noop;var ngRouteModule=angular.module('ngRoute',[]).info({angularVersion:'1.7.7'}).provider('$route',$RouteProvider).run(instantiateRoute);var $routeMinErr=angular.$$minErr('ngRoute');var isEagerInstantiationEnabled;function $RouteProvider(){isArray=angular.isArray;isObject=angular.isObject;isDefined=angular.isDefined;noop=angular.noop;function inherit(parent,extra){return angular.extend(Object.create(parent),extra)}
var routes={};this.when=function(path,route){var routeCopy=shallowCopy(route);if(angular.isUndefined(routeCopy.reloadOnUrl)){routeCopy.reloadOnUrl=!0}
if(angular.isUndefined(routeCopy.reloadOnSearch)){routeCopy.reloadOnSearch=!0}
if(angular.isUndefined(routeCopy.caseInsensitiveMatch)){routeCopy.caseInsensitiveMatch=this.caseInsensitiveMatch}
routes[path]=angular.extend(routeCopy,{originalPath:path},path&&routeToRegExp(path,routeCopy));if(path){var redirectPath=(path[path.length-1]==='/')?path.substr(0,path.length-1):path+'/';routes[redirectPath]=angular.extend({originalPath:path,redirectTo:path},routeToRegExp(redirectPath,routeCopy))}
return this};this.caseInsensitiveMatch=!1;this.otherwise=function(params){if(typeof params==='string'){params={redirectTo:params}}
this.when(null,params);return this};isEagerInstantiationEnabled=!0;this.eagerInstantiationEnabled=function eagerInstantiationEnabled(enabled){if(isDefined(enabled)){isEagerInstantiationEnabled=enabled;return this}
return isEagerInstantiationEnabled};this.$get=['$rootScope','$location','$routeParams','$q','$injector','$templateRequest','$sce','$browser',function($rootScope,$location,$routeParams,$q,$injector,$templateRequest,$sce,$browser){var forceReload=!1,preparedRoute,preparedRouteIsUpdateOnly,$route={routes:routes,reload:function(){forceReload=!0;var fakeLocationEvent={defaultPrevented:!1,preventDefault:function fakePreventDefault(){this.defaultPrevented=!0;forceReload=!1}};$rootScope.$evalAsync(function(){prepareRoute(fakeLocationEvent);if(!fakeLocationEvent.defaultPrevented)commitRoute();})},updateParams:function(newParams){if(this.current&&this.current.$$route){newParams=angular.extend({},this.current.params,newParams);$location.path(interpolate(this.current.$$route.originalPath,newParams));$location.search(newParams)}else{throw $routeMinErr('norout','Tried updating route with no current route')}}};$rootScope.$on('$locationChangeStart',prepareRoute);$rootScope.$on('$locationChangeSuccess',commitRoute);return $route;function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1];var val=m[i];if(key&&val){params[key.name]=val}}
return params}
function prepareRoute($locationEvent){var lastRoute=$route.current;preparedRoute=parseRoute();preparedRouteIsUpdateOnly=isNavigationUpdateOnly(preparedRoute,lastRoute);if(!preparedRouteIsUpdateOnly&&(lastRoute||preparedRoute)){if($rootScope.$broadcast('$routeChangeStart',preparedRoute,lastRoute).defaultPrevented){if($locationEvent){$locationEvent.preventDefault()}}}}
function commitRoute(){var lastRoute=$route.current;var nextRoute=preparedRoute;if(preparedRouteIsUpdateOnly){lastRoute.params=nextRoute.params;angular.copy(lastRoute.params,$routeParams);$rootScope.$broadcast('$routeUpdate',lastRoute)}else if(nextRoute||lastRoute){forceReload=!1;$route.current=nextRoute;var nextRoutePromise=$q.resolve(nextRoute);$browser.$$incOutstandingRequestCount('$route');nextRoutePromise.then(getRedirectionData).then(handlePossibleRedirection).then(function(keepProcessingRoute){return keepProcessingRoute&&nextRoutePromise.then(resolveLocals).then(function(locals){if(nextRoute===$route.current){if(nextRoute){nextRoute.locals=locals;angular.copy(nextRoute.params,$routeParams)}
$rootScope.$broadcast('$routeChangeSuccess',nextRoute,lastRoute)}})}).catch(function(error){if(nextRoute===$route.current){$rootScope.$broadcast('$routeChangeError',nextRoute,lastRoute,error)}}).finally(function(){$browser.$$completeOutstandingRequest(noop,'$route')})}}
function getRedirectionData(route){var data={route:route,hasRedirection:!1};if(route){if(route.redirectTo){if(angular.isString(route.redirectTo)){data.path=interpolate(route.redirectTo,route.params);data.search=route.params;data.hasRedirection=!0}else{var oldPath=$location.path();var oldSearch=$location.search();var newUrl=route.redirectTo(route.pathParams,oldPath,oldSearch);if(angular.isDefined(newUrl)){data.url=newUrl;data.hasRedirection=!0}}}else if(route.resolveRedirectTo){return $q.resolve($injector.invoke(route.resolveRedirectTo)).then(function(newUrl){if(angular.isDefined(newUrl)){data.url=newUrl;data.hasRedirection=!0}
return data})}}
return data}
function handlePossibleRedirection(data){var keepProcessingRoute=!0;if(data.route!==$route.current){keepProcessingRoute=!1}else if(data.hasRedirection){var oldUrl=$location.url();var newUrl=data.url;if(newUrl){$location.url(newUrl).replace()}else{newUrl=$location.path(data.path).search(data.search).replace().url()}
if(newUrl!==oldUrl){keepProcessingRoute=!1}}
return keepProcessingRoute}
function resolveLocals(route){if(route){var locals=angular.extend({},route.resolve);angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value,null,null,key)});var template=getTemplateFor(route);if(angular.isDefined(template)){locals['$template']=template}
return $q.all(locals)}}
function getTemplateFor(route){var template,templateUrl;if(angular.isDefined(template=route.template)){if(angular.isFunction(template)){template=template(route.params)}}else if(angular.isDefined(templateUrl=route.templateUrl)){if(angular.isFunction(templateUrl)){templateUrl=templateUrl(route.params)}
if(angular.isDefined(templateUrl)){route.loadedTemplateUrl=$sce.valueOf(templateUrl);template=$templateRequest(templateUrl)}}
return template}
function parseRoute(){var params,match;angular.forEach(routes,function(route,path){if(!match&&(params=switchRouteMatcher($location.path(),route))){match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params});match.$$route=route}});return match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}
function isNavigationUpdateOnly(newRoute,oldRoute){return!forceReload&&newRoute&&oldRoute&&(newRoute.$$route===oldRoute.$$route)&&(!newRoute.reloadOnUrl||(!newRoute.reloadOnSearch&&angular.equals(newRoute.pathParams,oldRoute.pathParams)))}
function interpolate(string,params){var result=[];angular.forEach((string||'').split(':'),function(segment,i){if(i===0){result.push(segment)}else{var segmentMatch=segment.match(/(\w+)(?:[?*])?(.*)/);var key=segmentMatch[1];result.push(params[key]);result.push(segmentMatch[2]||'');delete params[key]}});return result.join('')}}]}
instantiateRoute.$inject=['$injector'];function instantiateRoute($injector){if(isEagerInstantiationEnabled){$injector.get('$route')}}
ngRouteModule.provider('$routeParams',$RouteParamsProvider);function $RouteParamsProvider(){this.$get=function(){return{}}}
ngRouteModule.directive('ngView',ngViewFactory);ngRouteModule.directive('ngView',ngViewFillContentFactory);ngViewFactory.$inject=['$route','$anchorScroll','$animate'];function ngViewFactory($route,$anchorScroll,$animate){return{restrict:'ECA',terminal:!0,priority:400,transclude:'element',link:function(scope,$element,attr,ctrl,$transclude){var currentScope,currentElement,previousLeaveAnimation,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||'';scope.$on('$routeChangeSuccess',update);update();function cleanupLastView(){if(previousLeaveAnimation){$animate.cancel(previousLeaveAnimation);previousLeaveAnimation=null}
if(currentScope){currentScope.$destroy();currentScope=null}
if(currentElement){previousLeaveAnimation=$animate.leave(currentElement);previousLeaveAnimation.done(function(response){if(response!==!1)previousLeaveAnimation=null});currentElement=null}}
function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new();var current=$route.current;var clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element).done(function onNgViewEnter(response){if(response!==!1&&angular.isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll()}});cleanupLastView()});currentElement=clone;currentScope=current.scope=newScope;currentScope.$emit('$viewContentLoaded');currentScope.$eval(onloadExp)}else{cleanupLastView()}}}}}
ngViewFillContentFactory.$inject=['$compile','$controller','$route'];function ngViewFillContentFactory($compile,$controller,$route){return{restrict:'ECA',priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);if(current.controllerAs){scope[current.controllerAs]=controller}
$element.data('$ngControllerController',controller);$element.children().data('$ngControllerController',controller)}
scope[current.resolveAs||'$resolve']=locals;link(scope)}}}})(window,window.angular);(function(s,c){'use strict';function P(c){var h=[];C(h,E).chars(c);return h.join("")}var D=c.$$minErr("$sanitize"),F,h,G,H,I,q,E,J,K,C;c.module("ngSanitize",[]).provider("$sanitize",function(){function f(a,e){return B(a.split(","),e)}function B(a,e){var d={},b;for(b=0;b<a.length;b++)d[e?q(a[b]):a[b]]=!0;return d}function t(a,e){e&&e.length&&h(a,B(e))}function Q(a){for(var e={},d=0,b=a.length;d<b;d++){var k=a[d];e[k.name]=k.value}return e}function L(a){return a.replace(/&/g,"&amp;").replace(z,function(a){var d=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(d-55296)+(a-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function A(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var e=a.attributes,d=0,b=e.length;d<b;d++){var k=e[d],g=k.name.toLowerCase();if("xmlns:ns1"===g||0===g.lastIndexOf("ns1:",0))a.removeAttributeNode(k),d--,b--}(e=a.firstChild)&&A(e);a=v("nextSibling",a)}}function v(a,e){var d=e[a];if(d&&J.call(e,d))throw D("elclob",e.outerHTML||e.outerText);return d}var y=!1,g=!1;this.$get=["$$sanitizeUri",function(a){y=!0;g&&h(m,l);return function(e){var d=[];K(e,C(d,function(b,d){return!/^unsafe:/.test(a(b,d))}));return d.join("")}}];this.enableSvg=function(a){return I(a)?(g=a,this):g};this.addValidElements=function(a){y||(H(a)&&(a={htmlElements:a}),t(l,a.svgElements),t(r,a.htmlVoidElements),t(m,a.htmlVoidElements),t(m,a.htmlElements));return this};this.addValidAttrs=function(a){y||h(M,B(a,!0));return this};F=c.bind;h=c.extend;G=c.forEach;H=c.isArray;I=c.isDefined;q=c.$$lowercase;E=c.noop;K=function(a,e){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);var d=N(a);if(!d)return"";var b=5;do{if(0===b)throw D("uinput");b--;a=d.innerHTML;d=N(a)}while(a!==d.innerHTML);for(b=d.firstChild;b;){switch(b.nodeType){case 1:e.start(b.nodeName.toLowerCase(),Q(b.attributes));break;case 3:e.chars(b.textContent)}var k;if(!(k=b.firstChild)&&(1===b.nodeType&&e.end(b.nodeName.toLowerCase()),k=v("nextSibling",b),!k))for(;null==k;){b=v("parentNode",b);if(b===d)break;k=v("nextSibling",b);1===b.nodeType&&e.end(b.nodeName.toLowerCase())}b=k}for(;b=d.firstChild;)d.removeChild(b)};C=function(a,e){var d=!1,b=F(a,a.push);return{start:function(a,g){a=q(a);!d&&w[a]&&(d=a);d||!0!==m[a]||(b("<"),b(a),G(g,function(d,g){var c=q(g),f="img"===a&&"src"===c||"background"===c;!0!==M[c]||!0===O[c]&&!e(d,f)||(b(" "),b(g),b('="'),b(L(d)),b('"'))}),b(">"))},end:function(a){a=q(a);d||!0!==m[a]||!0===r[a]||(b("</"),b(a),b(">"));a==d&&(d=!1)},chars:function(a){d||b(L(a))}}};J=s.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var z=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^#-~ |!])/g,r=f("area,br,col,hr,img,wbr"),x=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),p=f("rp,rt"),n=h({},p,x),x=h({},x,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),p=h({},p,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),l=f("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),w=f("script,style"),m=h({},r,x,p,n),O=f("background,cite,href,longdesc,src,xlink:href,xml:base"),n=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),p=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=h({},O,p,n),N=function(a,e){function d(b){b="<remove></remove>"+b;try{var d=(new a.DOMParser).parseFromString(b,"text/html").body;d.firstChild.remove();return d}catch(e){}}function b(a){c.innerHTML=a;e.documentMode&&A(c);return c}var g;if(e&&e.implementation)g=e.implementation.createHTMLDocument("inert");else throw D("noinert");var c=(g.documentElement||g.getDocumentElement()).querySelector("body");c.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';return c.querySelector("svg")?(c.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',c.querySelector("svg img")?d:b):function(b){b="<remove></remove>"+b;try{b=encodeURI(b)}catch(d){return}var e=new a.XMLHttpRequest;e.responseType="document";e.open("GET","data:text/html;charset=utf-8,"+b,!1);e.send(null);b=e.response.body;b.firstChild.remove();return b}}(s,s.document)}).info({angularVersion:"1.7.7"});c.module("ngSanitize").filter("linky",["$sanitize",function(f){var h=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,t=/^mailto:/i,q=c.$$minErr("linky"),s=c.isDefined,A=c.isFunction,v=c.isObject,y=c.isString;return function(c,z,u){function r(c){c&&l.push(P(c))}function x(c,g){var f,a=p(c);l.push("<a ");for(f in a)l.push(f+'="'+a[f]+'" ');!s(z)||"target"in a||l.push('target="',z,'" ');l.push('href="',c.replace(/"/g,"&quot;"),'">');r(g);l.push("</a>")}if(null==c||""===c)return c;if(!y(c))throw q("notstring",c);for(var p=A(u)?u:v(u)?function(){return u}:function(){return{}},n=c,l=[],w,m;c=n.match(h);)w=c[0],c[2]||c[4]||(w=(c[3]?"http://":"mailto:")+w),m=c.index,r(n.substr(0,m)),x(w,c[0].replace(t,"")),n=n.substring(m+c[0].length);r(n);return f(l.join(""))}}])})(window,window.angular);var CmsApp=angular.module("cmsApp",["ngRoute","ngSanitize"]);CmsApp.config(function($routeProvider,$httpProvider,$locationProvider){$routeProvider.when("/dashboard",{templateUrl:"dashboard",active:'dashboard'}).when("/team",{templateUrl:"team",active:'team'}).when("/profile",{templateUrl:"profile",active:'profile'}).when("/developer",{templateUrl:"developer",active:'developer'}).when("/filemanager",{templateUrl:"filemanager",active:'filemanager'}).when("/edit-team/:id",{templateUrl:function(params){return"edit-team/"+params.id},active:'team'}).when("/app/:id",{templateUrl:function(params){return"app/"+params.id},active:'app'}).when("/app-dashboard/:id",{templateUrl:function(params){return"app-dashboard/"+params.id},active:'appDashboard'}).when("/backup/:id",{templateUrl:function(params){return"backup/"+params.id},active:'appBackup'}).when("/templates",{templateUrl:"templates",active:'dashboard'}).when("/import",{templateUrl:"import",active:'importBackup'}).when("/support",{templateUrl:"support",active:'support'}).when("/ticket/:id",{templateUrl:function(params){return"ticket/"+params.id},active:'support'}).when("/purchase-app/:id",{templateUrl:function(params){return"purchase-app/"+params.id},active:'app'}).when("/extended-app/:id",{templateUrl:function(params){return"extended-app/"+params.id},active:'app'}).when("/premium-modules/:id",{templateUrl:function(params){return"premium-modules/"+params.id},active:'app'}).when("/google-play/:id",{templateUrl:function(params){return"google-play/"+params.id},active:'app'}).when("/update-ios/:id",{templateUrl:function(params){return"update-ios/"+params.id},active:'app'}).when("/host",{templateUrl:"host",active:'host'}).when("/pre-factor/:product/:id",{templateUrl:function(params){return"pre-factor/"+params.product+"/"+params.id},active:'app'}).when("/bills",{templateUrl:"bills",active:'bills'}).when("/bill/:id",{templateUrl:function(params){return"bill/"+params.id},active:'bills'}).when("/representative",{templateUrl:"representative",active:'representative'}).when("/appeals",{templateUrl:"appeals",active:'appeals'}).when("/appeal/:id",{templateUrl:function(params){return"appeal/"+params.id},active:'appeals'}).when("/messages",{templateUrl:"messages",active:'usermessages'}).when("/admin/users",{templateUrl:"admin/users",active:'users'}).when("/admin/user/:id",{templateUrl:function(params){return"admin/user/"+params.id},active:'users'}).when("/admin/coupons",{templateUrl:"admin/coupons",active:'coupons'}).when("/admin/all-appeals",{templateUrl:"admin/all-appeals",active:'all-appeals'}).when("/admin/appeal/:id",{templateUrl:function(params){return"admin/appeal/"+params.id},active:'all-appeals'}).when("/admin/modules/:name",{templateUrl:function(params){return"admin/modules/"+params.name},active:'modules'}).when("/admin/messages",{templateUrl:"admin/messages",active:'messages'}).when("/admin/crm",{templateUrl:"admin/get-crm",active:'crm'}).when("/admin/excel",{templateUrl:"admin/get-excel",active:'crm'}).when("/admin/common-answers",{templateUrl:"admin/common-answers",active:'common-answers'}).when("/admin/common-answer/:id",{templateUrl:function(params){return"admin/common-answer/"+params.id},active:'common-answers'}).when("/admin/campaign",{templateUrl:function(params){return"admin/advertising-campaign"},active:'campaign'}).when("/admin/campaign/:id",{templateUrl:function(params){return"admin/campaign/"+params.id},active:'campaign'}).when("/admin/templates",{templateUrl:function(){return"admin/templates"},active:'templates'}).when("/services/:section",{templateUrl:function(params){return"services/"+params.section},active:'services'}).otherwise({redirectTo:'/dashboard'});$httpProvider.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded;charset=utf-8';$httpProvider.defaults.headers.common['Cache-Control']='no-cache';$httpProvider.defaults.cache=!1});CmsApp.controller('mainCtrl',function($route,$routeParams,$scope,$location,$templateCache,$rootScope,$timeout,$http){$scope.$route=$route;$scope.vote_range=3;$scope.vote_comment='';$scope.vote_id='';$scope.vote_show=!0;$scope.showMenu=function(){$('.panel-menu').toggleClass('just-desktop')};$rootScope.$on('$routeChangeStart',function(event,next,current){$(".preloader").fadeIn();if(typeof(current)!=='undefined'){$templateCache.remove(current.templateUrl)}});$rootScope.$on('$viewContentLoaded',function(){$templateCache.removeAll();$(".preloader").fadeOut();$(window).scrollTop(0);panelInit()});$scope.shownps=function(){$("#nps").modal("show")};$scope.saveNps=function(type){if(type=='nps'){var value=$('.panel-range').asRange('get');$scope.vote_range=value;var data=$.param({vote_range:value,type:type});blockUi();$http({method:"POST",url:url+"api/panel/save-nps",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");$("#nps").modal("hide");$scope.vote_id=response.data.id
$timeout(function(){$("#npsComment").modal("show")},250)}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{if($scope.vote_comment==''){showMsg(LANG.empty_comment);return!1}
var data=$.param({vote_comment:$scope.vote_comment,vote_id:$scope.vote_id,type:type});blockUi();$http({method:"POST",url:url+"api/panel/save-nps",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){$scope.vote_show=!1;showMsg(response.data.msg,"","success");$("#npsComment").modal("hide")}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}};$scope.saveCes=function(type){var value=$('.panel-range').asRange('get');$scope.vote_range=value;var data=$.param({vote_range:value,type:type});blockUi();$http({method:"POST",url:url+"api/panel/save-ces",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success")}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}}).directive("sidebar",function($templateCache){return{template:$templateCache.get("sidebar.html")}}).directive("navbar",function($templateCache){return{template:$templateCache.get("navbar.html")}});function usernameIsValid(username){return/^[0-9a-zA-Z_-]+$/.test(username)}
function panelInit(innerDesign){if(typeof innerDesign=="undefined"){innerDesign=!1}
var DOC=document;var $DOC=$(document);var $BODY=$('body');if(isMobileDevice()){$("#moduleFormSaveBtn").html('<i class="fa fa-save"></i>');$("#moduleFormSaveBtn").addClass('save-in-mobile');$("#themeFormSaveBtn").html('<i class="fa fa-save"></i>');$("#themeFormSaveBtn").addClass('save-in-mobile')}
if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=DOC.createElement('style');msViewportStyle.appendChild(DOC.createTextNode('@-ms-viewport{width:auto!important}'));DOC.querySelector('head').appendChild(msViewportStyle)}
$DOC.tooltip({selector:'[data-tooltip=true]',container:'body'});$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover();$('[data-toggle="popoverWebUi"]').webuiPopover();$("[data-toggle='dropdown']").click(function(e){e.preventDefault()});$("[data-toggle='collapse']").click(function(e){e.preventDefault()});$('[data-toggle="tab"]').click(function(e){e.preventDefault()});if(typeof screenfull!=='undefined'){$DOC.on('click','[data-toggle="fullscreen"]',function(){if(screenfull.enabled){screenfull.toggle()}
return!1});if(screenfull.enabled){DOC.addEventListener(screenfull.raw.fullscreenchange,function(){$('[data-toggle="fullscreen"]').toggleClass('active',screenfull.isFullscreen)})}}
$(document).on('click','[data-target=\'#site-navbar-collapse\']',function(e){var $trigger=$(this);var isClose=$trigger.hasClass('collapsed');$BODY.addClass('site-navbar-collapsing');$BODY.toggleClass('site-navbar-collapse-show',!isClose);setTimeout(function(){$BODY.removeClass('site-navbar-collapsing')},350)});$(document).on('click','.dropdown-menu-media',function(e){e.stopPropagation()});var PanelClass=new Plugin.getPlugin('panel');var isMobile=isMobileDevice();$('[data-toggle="panel-collapse"]').each(function(){if(isMobile){$(this).removeClass("wb-minus").addClass("wb-plus");$(this).closest('.panel').addClass("is-collapse");$(this).after('<a class="panel-action icon wb-pencil mobile-action"></a>');$(this).closest('.panel').find('.mobile-action').click(function(){$(this).parent().find('[data-toggle="panel-fullscreen"]').click();$(this).closest('.panel').toggleClass("is-collapse");$(this).toggleClass('wb-pencil').toggleClass('wb-arrow-left')});$(this).remove()}else{var collapse_cache=$(this).attr("data-id");var collapsed=getCookie(collapse_cache);if(collapsed!=""){if(collapsed=="hideContent"){$(this).removeClass("wb-minus").addClass("wb-plus");$(this).closest('.panel').addClass("is-collapse")}}}});$('.dropify').dropify();$('.iconpicker').iconpicker({icons:ICON_PICKER_ICONS,selectedCustomClass:'bg-purple',hideOnSelect:!0});$('.iconpicker').on('iconpickerSelected',function(event){console.log(event.iconpickerValue);console.log($(event.target).parent().find(".iconpicker-showcase").addClass(event.iconpickerValue))});$('.icp-dd').iconpicker({icons:ICON_PICKER_ICONS,selectedCustomClass:'bg-purple',hideOnSelect:!0});$('.icp-dd').on('iconpickerSelected',function(event){var input=$(event.target).attr('data-id');var callback=$(event.target).attr('data-callback');$("#"+input).val(event.iconpickerValue);if(typeof window[callback]=="function"){window[callback](event.iconpickerValue)}});saveForm("moduleForm","moduleFormSaveBtn","onModuleSaved","moduleBeforeSubmit");saveForm("themeForm","themeFormSaveBtn","onThemeSaved","themeBeforeSubmit");$('.asColorpicker').asColorPicker({namespace:'colorInputUi'});$(".btn-image-remove").on("click",function(){var id=$(this).attr("data-info");var val=$("#"+id).val();$("#"+id).val("");$("#"+id+"_src").attr("src","");$("."+id+"_box").hide();$("#media_manager_"+id).val("");var callback="remove_callback_"+id;if(typeof window[callback]=="function"){window[callback](val,id)}});$('.inputSpinnerRadius').asSpinner({namespace:"spinnerUi",skin:null,min:0,max:60,mousewheel:!0});$('.inputSpinnerBorder').asSpinner({namespace:"spinnerUi",skin:null,min:0,max:10,mousewheel:!0});$('.inputSpinnerFont').asSpinner({namespace:"spinnerUi",skin:null,min:10,max:124,mousewheel:!0});if(!innerDesign){$('.app-content-editor').each(function(){window[$(this).attr('id')]=CKEDITOR.replace($(this).attr('id'),ckEditorOptions)})}
$(".select2").select2({language:LANG.lang,dir:LANG.direction});$("a[href='#page_designs']").click(function(){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==9){EditorCtrl.tour(10)}});$("a[href='#theme_menu_design']").click(function(){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==22){EditorCtrl.tour(23)}});$("a[href='#theme_contents']").click(function(){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==23){EditorCtrl.tour(24)}});lazyload()};var ckEditorOptions={language:LANG.lang,extraPlugins:['appeto','appeto_button','ckeditor_responsive_table','justify','bidi','pastefromword','colorbutton','colordialog','videoembed'],toolbar:[{name:'document',items:['Source']},{name:'clipboard',items:['Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo']},{name:'editing',items:['Find','Replace','SelectAll']},{name:'basicstyles',items:['Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat']},{name:'paragraph',items:['NumberedList','BulletedList','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock']},{name:'links',items:['Link','Unlink']},{name:'insert',items:['Appeto','ResponsiveTable','VideoEmbed','Iframe','AppetoButton']},'/',{name:'styles',items:['Format','FontSize']},{name:'colors',items:['TextColor','BGColor']},{name:'tools',items:['Maximize','ShowBlocks']}]};CKEDITOR.on("instanceReady",function(event){event.editor.on("beforeCommandExec",function(event){if(event.data.name=="paste"){event.editor._.forcePasteDialog=!0}
if(event.data.name=="pastetext"&&event.data.commandData.from=="keystrokeHandler"){event.cancel()}})});function selectImageSection(savePath,fullInfo,id){$("#"+id).val(savePath);$("#"+id+"_src").attr("src",fullInfo.url).show();$("."+id+"_box").show();$('[data-tooltip="true"]').tooltip();var is_stock=savePath.search("/uploads/stocks/");var multiple=$("#media_manager_"+id).attr("data-multiple");if(typeof multiple!==typeof undefined&&multiple!==!1){$("#"+multiple).val($("#"+multiple).val()+"||"+savePath)}else{if(is_stock>=0){$("#media_manager_"+id).val("")}else{$("#media_manager_"+id).val(savePath)}}
var callback="callback_"+id;if(typeof window[callback]=="function"){window[callback](savePath,fullInfo,id)}}
function repeaterSelectImageSection(savePath,fullInfo,id){if(fullInfo.mime==="image/jpeg"||fullInfo.mime==='image/png'||fullInfo.mime==="image/jpg"){let before=$("#"+id).val();$("#"+id).val(savePath);$("#"+id+"_src").attr("src",fullInfo.url).show();$("."+id+"_box").show();$('[data-tooltip="true"]').tooltip();var is_stock=savePath.search("/uploads/stocks/");var multiple=$("#media_manager_"+id).attr("data-multiple");if(typeof multiple!==typeof undefined&&multiple!==!1){if(before.trim()!==""){try{let val=$("#"+multiple).val();val=val.replace(before,savePath);$("#"+multiple).val(val)}catch(e){}}else{$("#"+multiple).val($("#"+multiple).val()+"||"+savePath)}}else{if(is_stock>=0){$("#media_manager_"+id).val("")}else{$("#media_manager_"+id).val(savePath)}}
try{var _id=id.replace("_image_","|");var extractId=_id.split("|");var box=extractId[0];var index=extractId[1];EditorCtrl.repeater[box][index].image=savePath;var callback="callback_"+id;if(typeof window[callback]=="function"){window[callback](savePath,fullInfo,id)}}catch(e){}}else{$("#"+id).val(savePath)}}
function selectMediaSection(savePath,fullInfo,id){$("#"+id).val(savePath)}
function getExtension(path){path=path.split('/');var name=path[path.length-1];var extension=name.split('.');extension=extension[extension.length-1];return extension.toLowerCase()}
function createPagination(total,limit,currPage){total=Number(total);var counter=Math.ceil(total/limit);var element=[],i=1,p={};if(total>limit){if(counter<=7){for(i;i<=counter;++i){p={p:i};element.push(p)}}else{p={p:1};element.push(p);if(currPage==1||currPage==counter||currPage==2||currPage==counter-1){p={p:2};element.push(p);p={p:3};element.push(p);p={p:'...'};element.push(p);p={p:counter-2};element.push(p);p={p:counter-1};element.push(p)}else if(currPage==3){p={p:2};element.push(p);p={p:3};element.push(p);p={p:4};element.push(p);p={p:'...'};element.push(p);p={p:counter-2};element.push(p);p={p:counter-1};element.push(p)}else if(currPage==counter-2){p={p:2};element.push(p);p={p:3};element.push(p);p={p:'...'};element.push(p);p={p:counter-3};element.push(p);p={p:counter-2};element.push(p);p={p:counter-1};element.push(p)}else{p={p:'...'};element.push(p);p={p:currPage-1};element.push(p);p={p:currPage};element.push(p);p={p:currPage+1};element.push(p);p={p:'...'};element.push(p)}
p={p:counter};element.push(p)}}
return element}
function activePageTables(classLi,idLi){setTimeout(function(){$("."+classLi).each(function(i,e){$(e).removeClass('active')});$("#"+idLi).addClass('active')},100)}
function selectImageSectionStock(savePath,fullInfo,id,type){$("#"+id).val(savePath);$("#"+id+"_src").attr("src",fullInfo.url).show();$("."+id+"_box").show();$('[data-tooltip="true"]').tooltip();$("#media_manager_"+id).val("")}
function my_alert(msg){bootbox.alert({className:"modal-fade-in-scale-up",size:"small",title:LANG.error,message:msg,buttons:{ok:{label:LANG.ok,className:'btn-danger',}}})}
function listSortManager(elm,callback){var srt=document.getElementById(elm);var list=Sortable.create(srt,{animation:150,scroll:!0,scrollSensitivity:0,onUpdate:function(evt){callback(elm,list)}});return list}
var inSaveMode=!1;function saveForm(formObj,selector,callback,beforeSubmit){$("#"+formObj).formValidation({framework:"bootstrap4",locale:LANG.locale,button:{selector:'#'+selector,disabled:'disabled'},icon:null,err:{clazz:'invalid-feedback'},control:{valid:'is-valid',invalid:'is-invalid'},row:{invalid:'has-danger'}}).on('success.form.fv',function(e){e.preventDefault();if(beforeSubmit!=""){if(typeof window[beforeSubmit]=="function"){if(!window[beforeSubmit]()){$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm();return!1}}}
if(typeof window.checkModuleDesignSave=="function"){if(!window.checkModuleDesignSave()){$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm();return!1}}
if(typeof window.checkModuleSubPageDesignSave=="function"){if(!window.checkModuleSubPageDesignSave()){$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm();return!1}}
var checkBoxes="";$('#'+formObj+' input[type="checkbox"]').each(function(){var name=$(this).attr("name");if(typeof name!==typeof undefined&&name!==!1){if(!$(this).is(':checked')){checkBoxes+='&'+name+'='+0}else{$(this).val(1)}}});var checkCkeditor=!1;var checkRemoteImage=!1;$('.app-content-editor').each(function(){var _id=$(this).attr('id');var _editor=window[$(this).attr('id')];_editor.updateElement();if($(this).hasClass('content-required')&&_editor.getData()==""){checkCkeditor=!0;return!1}
var block_images="";$('<span style="display: none;"></span>').html(_editor.getData()).find('img').each(function(){var src=$(this).attr('src').replace(url,"");if(src.indexOf('http://')>-1||src.indexOf('https://')>-1){checkRemoteImage=!0;return!1}
block_images+=src+"||"});$("#media_manager_"+_id).val(block_images)});if(checkCkeditor){my_alert(LANG.enter_full_info);$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm();return!1}
if(checkRemoteImage){my_alert(LANG.remote_image_error);$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm();return!1}
var formData=$("#"+formObj).serialize()+checkBoxes;inSaveMode=!0;blockUi();$.ajax({method:$("#"+formObj).attr("method"),url:$("#"+formObj).attr("action"),data:formData}).done(function(data){inSaveMode=!1;if(typeof data.status!="undefined"){if(data.status){if(typeof data.msg!="undefined"){showMsg(data.msg,"","success")}else{showMsg(LANG.success_msg,"","success")}
if(typeof data.newSaveToken!="undefined"){$("#_saveToken").val(data.newSaveToken)}
if(typeof EditorCtrl!="undefined"&&EditorCtrl!=null&&EditorCtrl.editType==1){var id=EditorCtrl.pageId;var demo=$('#device-screen').attr("data-info")+'?loadPage='+id;if(EditorCtrl.pageId==''&&selector=='themeFormSaveBtn'){demo=$('#device-screen').attr("src")}
reload_demo(demo)}}else{if(typeof data.msg!="undefined"){showMsg(data.msg,LANG.wrong_title,"error")}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}}}
if(callback!=""){if(typeof window[callback]=="function"){window[callback](data)}}}).fail(function(){inSaveMode=!1;showMsg(LANG.global_error,LANG.wrong_title,"error")}).always(function(){inSaveMode=!1;unBlockUi();$("#"+formObj).data('formValidation').disableSubmitButtons(!1);$("#"+formObj).data('formValidation').resetForm()})})}
var iFrameWin;function reload_demo(src){var info=$("#device-screen").attr('data-info');$("#device-screen").remove();var iframe='<iframe src="'+src+'" data-info="'+info+'" frameborder="0" id="device-screen"></iframe>';$("#iframebuilder").append(iframe);document.getElementById("device-screen").onload=function(){var demo_info=iFrameWin.getReloadInfo();if(demo_info!=null&&demo_info!=""){console.log('reload demo app');$.ajax({method:"POST",url:info+"/reload",data:{"demo":demo_info,"app":EditorCtrl.app,}}).done(function(data){if(data=="exists"){console.log("mobile demo reloaded")}}).fail(function(){}).always(function(){})}}}
function get_demo_base_link(){return $('#device-screen').attr("data-info")}
function aptRouter(data,internal_pages){if(data!=""){var explode=data.split("/");console.log(explode);var type=explode[0];var link="";switch(type){case "web":link=explode[1];link=link.split("||").join("/");window.open(link,'_system');break;case "mailto":link=explode[1];window.location.href="mailto:"+link;break;case "tel":link=explode[1];link=link.replace("#","%23");window.location.href="tel:"+link;break;case "ussd":link=explode[1];link=link.replace("#","%23");window.location.href="tel:"+link;break;case "sms":var body="";link=explode[1];if(typeof explode[2]!="undefined"){body=explode[2]}
window.location.href="sms://"+link+"?body="+body;break}}}
function showMsg(msg,title,type,options){if(typeof options=="undefined"){var pos="toast-bottom-right";if(LANG.rtl){pos="toast-bottom-left"}
options={"closeButton":!0,"timeOut":"2000","positionClass":pos,}}
options.rtl=LANG.rtl;toastr.options=options;switch(type){case "warning":toastr.warning(msg,title);break;case "info":toastr.info(msg,title);break;case "error":toastr.error(msg,title);break;case "success":toastr.success(msg,title);break;default:toastr.info(msg,title)}}
function blockUi(el){if(typeof el=="undefined"){$(".block-page-full").show()}else{var $block_page=$(el).find(".block-page");if($block_page.length<=0){$(".block-page").clone().appendTo(el);$block_page=$(el).find(".block-page");$block_page.attr("style","position: absolute; top: 0; height: "+Number($(el).height()+100)+"px;")}
$block_page.show()}}
function unBlockUi(el){if(typeof el=="undefined"){$(".block-page-full").hide()}else{$(el).find(".block-page").hide()}}
function isNumber(text){var reg=new RegExp('[0-9]+$');if(text){return reg.test(text)}
return!1}
function removeSpecial(text){if(text){var lower=text.toLowerCase();var result="";for(var i=0;i<lower.length;++i){if(isNumber(text[i])||!in_array_name(text[i])){result+=text[i]}}
return result}
return''}
function in_array_name(txt){var special=new Array('/','[',']','{','}','\\','\'','"',',','.','=','+','-','_',')','(','*','&','^','%','$','#','@','!','`','~','?');var find=!1;for(var i in special){if(txt==special[i]){find=!0;break}}
return find}
function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase())}
function validateDomain(domain){let reHttps=/^(https?:\/\/(.+?\.)?(\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\(\)\*\+,;\=]*)?)/;let re=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/;let result1=re.test(String(domain).toLowerCase());let result2=reHttps.test(String(domain).toLowerCase());if(result1||result2)
return!0;return!1}
window.processSelectedFile=function(filePath,callback,id){if(callback!=""){if(typeof window[callback]=="function"){var savePath=filePath.url.replace(url,"");if(filePath.url.indexOf(url+'api/hard-external')>-1){savePath=filePath.url}
window[callback](savePath,filePath,id)}}};window.processSelectedStocks=function(filePath,callback,id,type){if(callback!=""){if(typeof window[callback]=="function"){var savePath=filePath.url.replace(url,"");window[callback](savePath,filePath,id,type)}}};function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1)}
if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}
return""}
function in_array(need,array){for(var i in array){if(array[i]==need){return!0}}
return!1}
var panel_tour=[{"el":"#modulesTab","description":LANG.tour_step_0,"full-block":!1,"position":"manual","pos":{"top":"","left":"","right":"30px","bottom":"110px",},"after":!0,"start_callback":function(){$("#addPageBtn").css("z-index","10001")},"end_callback":function(){$("#addPageBtn").css("z-index","")},},{"el":"#tour-page-name-change","description":LANG.tour_step_1,"full-block":!0,"position":"bottom"},{"el":"#tour-page-hidden","description":LANG.tour_step_2,"full-block":!0,"position":"bottom_near","start_callback":function(){$("#tour-page-hidden").addClass("active")},"end_callback":function(){$("#tour-page-hidden").removeClass("active")},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(3)">'+LANG.next+'</button>'},{"el":"#tour-page-remove","description":LANG.tour_step_3,"full-block":!0,"position":"bottom_near","start_callback":function(){$("#tour-page-remove").addClass("active")},"end_callback":function(){$("#tour-page-remove").removeClass("active")},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(4)">'+LANG.next+'</button>'},{"el":"#tour_static_image_selector_0","description":LANG.tour_step_4,"full-block":!0,"position":"left"},{"el":"#filemanagerModal","description":LANG.tour_step_5,"full-block":!0,"position":"manual","pos":{"top":"0","left":"","right":"68px","bottom":"",},"start_callback":function(){$("#tourDesc").css("max-width","100%");$("#tourDesc p").css("font-size","12px")},"end_callback":function(){$("#tourDesc").css("max-width","250px");$("#tourDesc p").css("font-size","14px")},},{"el":"#tour-about_us_slider-minimize-full-screen","description":LANG.tour_step_6,"full-block":!0,"position":"left","start_callback":function(){$("#tour-about_us_slider-minimize-full-screen").css('color','#ffffff');$("#tour-about_us_slider-minimize-full-screen").find('.wb-minus').attr('data-toggle','');$("#tour-about_us_slider-minimize-full-screen").find('.wb-expand').attr('data-toggle','')},"end_callback":function(){$("#tour-about_us_slider-minimize-full-screen").css('color','');$("#tour-about_us_slider-minimize-full-screen").find('.wb-minus').attr('data-toggle','panel-collapse');$("#tour-about_us_slider-minimize-full-screen").find('.wb-expand').attr('data-toggle','panel-fullscreen')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(7)">'+LANG.next+'</button>'},{"el":"#modulesTab","description":LANG.tour_step_7,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},},{"el":".demo-container","description":LANG.tour_step_8,"full-block":!0,"position":"right","start_callback":function(){$("#tour_demo_native").addClass('active');$("#tour_demo_native").attr('data-target','')},"end_callback":function(){$("#tour_demo_native").removeClass('active');$("#tour_demo_native").attr('data-target','#realDemoModal')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(9)">'+LANG.next+'</button>'},{"el":".nav-tabs-line","description":LANG.tour_step_9,"full-block":!0,"position":"bottom"},{"el":"#modulesTab","description":LANG.tour_step_10,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(11)">'+LANG.next+'</button>'},{"el":"#tour-module_icon","description":LANG.tour_step_11,"full-block":!0,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(12)">'+LANG.next+'</button>'},{"el":"#modulesTab","description":LANG.tour_step_12,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"start_callback":function(){$('html, body').animate({scrollTop:$("#tour-page_structure").offset().top-50},500);$("#moduleFormSaveBtn").css('z-index',10001)},"end_callback":function(){$("#moduleFormSaveBtn").css('z-index','')},},{"el":"#modulesTab","description":LANG.tour_step_13,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"start_callback":function(){$("a[href='#page_translate']").click()},"end_callback":function(){},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(14)">'+LANG.next+'</button>'},{"el":"#tour-nav-tabs-line-purple","description":LANG.tour_step_14,"full-block":!1,"position":"left","start_callback":function(){$("#currentPageAdmin").html("");EditorCtrl.hidePageSettings()},"end_callback":function(){},},{"el":"#theme_default","description":LANG.tour_step_15,"full-block":!1,"position":"top",},{"el":"#tour-theme-name-change","description":LANG.tour_step_16,"full-block":!0,"position":"bottom","start_callback":function(){$("#tour-theme-name-change").find('.form-group').css('z-index',10001);$("#tour-theme-name-change").find('.input-group').css('z-index',10001)},"end_callback":function(){$("#tour-theme-name-change").find('.form-group').css('z-index','');$("#tour-theme-name-change").find('.input-group').css('z-index','')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(17)">'+LANG.next+'</button>'},{"el":"#tour-copy_theme","description":LANG.tour_step_17,"full-block":!0,"position":"bottom_near","start_callback":function(){$("#tour-copy_theme").addClass("active")},"end_callback":function(){$("#tour-copy_theme").removeClass("active")},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(18)">'+LANG.next+'</button>'},{"el":"#tour-remove_theme","description":LANG.tour_step_18,"full-block":!0,"position":"bottom_near","start_callback":function(){$("#tour-remove_theme").addClass("active");$("#tour-remove_theme").removeAttr('disabled')},"end_callback":function(){$("#tour-remove_theme").removeClass("active");$("#tour-remove_theme").attr('disabled','disabled')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(19)">'+LANG.next+'</button>'},{"el":"#tour-design_type","description":LANG.tour_step_19,"full-block":!0,"position":"bottom","next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(20)">'+LANG.next+'</button>'},{"el":"#theme_colors_settings","description":LANG.tour_step_20,"full-block":!0,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},},{"el":"#modulesTab","description":LANG.tour_step_21,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"start_callback":function(){$('html, body').animate({scrollTop:$("#tour-direction").offset().top-50},500);$("#themeFormSaveBtn").css('z-index',10001)},"end_callback":function(){$("#themeFormSaveBtn").css('z-index','')},},{"el":".nav-tabs-line","description":LANG.tour_step_22,"full-block":!0,"position":"bottom"},{"el":".nav-tabs-line","description":LANG.tour_step_23,"full-block":!0,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"start_callback":function(){$("#tour-theme_menu_design").css('z-index',10001)},"end_callback":function(){$("#tour-theme_menu_design").css('z-index','')},},{"el":".nav-tabs-line","description":LANG.tour_step_24,"full-block":!0,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"start_callback":function(){$("#tour-pages_list_menu").css('z-index',10001)},"end_callback":function(){$("#tour-pages_list_menu").css('z-index','')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(25)">'+LANG.next+'</button>'},{"el":"#addThemeBtn","description":LANG.tour_step_25,"full-block":!1,"position":"left","start_callback":function(){$("#currentPageAdmin").html("");EditorCtrl.hideThemeSettings()},"end_callback":function(){},},{"el":"#modulesTab","description":LANG.tour_step_26,"full-block":!1,"position":"manual","pos":{"top":"90px","left":"","right":"30px","bottom":"",},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(27)">'+LANG.next+'</button>'},{"el":"#tour-settings-export","description":LANG.tour_step_27,"full-block":!1,"position":"manual","pos":{"top":"10px","left":"","right":"210px","bottom":"",},"start_callback":function(){$("#currentPageAdmin").html("");EditorCtrl.hideThemeSettings();$("#tour-settings-export").find('.btn-default').removeClass('btn-outline')},"end_callback":function(){$("#tour-settings-export").find('.btn-default').addClass('btn-outline')},"next":'<button class="btn btn-success btn-sm m-0" type="button" onclick="EditorCtrl.tour(28)">'+LANG.next+'</button>'},{"el":"#tour-nav-tabs-line-purple","description":LANG.tour_step_28,"full-block":!1,"position":"left","start_callback":function(){$("#currentPageAdmin").html("");EditorCtrl.hidePageSettings();EditorCtrl.hideThemeSettings()},"end_callback":function(){},},{"el":"#modulesTab","description":LANG.tour_step_29,"full-block":!1,"position":"manual","pos":{"top":"","left":"","right":"30px","bottom":"110px",},"after":!0,"start_callback":function(){$("#addPageBtn").css("z-index","10001")},"end_callback":function(){$("#addPageBtn").css("z-index","")},},];var _themes_settings={"navbar_type":"option","theme_navbar_text_align":"option","theme_navbar_title_type":"option","theme_navbar_box_shadow":"option","navbar_image_title":"text","background_type":"option","background_color":"color","background_image":"text","theme_primary_color":"color","theme_secondary_color":"color","theme_primary_color_txt":"color","theme_secondary_color_txt":"color","btn-secondary-schema-color":"color","btn-secondary-txt-schema-color":"color","optional_cards_elevation":"option","optional_cards_radius_top_right":"text","optional_cards_radius_top_left":"text","optional_cards_radius_bottom_right":"text","optional_cards_radius_bottom_left":"text","optional_cards_border_width":"text","optional_cards_border_color":"color","optional_cards_title_color":"color","optional_cards_sub_title_color":"color","optional_cards_text_color":"color","optional_cards_icon_color":"color","optional_cards_link_color":"color","optional_cards_bg_color":"color","optional_cards_title_size":"text","optional_cards_sub_title_size":"text","optional_cards_text_size":"text","optional_cards_icon_size":"text","optional_cards_link_size":"text","optional_panels_elevation":"text","optional_panels_radius_top_right":"text","optional_panels_radius_top_left":"text","optional_panels_radius_bottom_right":"text","optional_panels_radius_bottom_left":"text","optional_panels_border_color":"color","optional_panels_border_width":"text","optional_panels_title_color":"color","optional_panels_sub_title_color":"color","optional_panels_text_color":"color","optional_panels_icon_color":"color","optional_panels_link_color":"color","optional_panels_bg_color":"color","optional_panels_title_size":"text","optional_panels_sub_title_size":"text","optional_panels_text_size":"text","optional_panels_icon_size":"text","optional_panels_link_size":"text","optional_buttons_background":"color","optional_buttons_txt_color":"color","optional_buttons_icon_color":"color","optional_buttons_elevation":"text","optional_buttons_radius_top_right":"text","optional_buttons_radius_top_left":"text","optional_buttons_radius_bottom_right":"text","optional_buttons_radius_bottom_left":"text","optional_buttons_border_color":"color","optional_buttons_border_width":"text","optional_buttons_text_size":"text","optional_buttons_icon_size":"text","optional_buttons_animation":"option","optional_fab_buttons_background":"color","optional_fab_buttons_txt_color":"color","optional_fab_buttons_icon_color":"color","optional_fab_buttons_elevation":"text","optional_fab_buttons_radius_top_right":"text","optional_fab_buttons_radius_top_left":"text","optional_fab_buttons_radius_bottom_right":"text","optional_fab_buttons_radius_bottom_left":"text","optional_fab_buttons_border_color":"color","optional_fab_buttons_border_width":"text","optional_fab_buttons_text_size":"text","optional_fab_buttons_icon_size":"text","optional_fab_buttons_animation":"option","optional_inputs_type":"option","optional_inputs_active_border_color":"color","optional_inputs_active_label_color":"color","optional_inputs_border_color":"color","optional_inputs_label_color":"color","optional_inputs_border_width":"text","optional_inputs_radius_top_right":"text","optional_inputs_radius_top_left":"text","optional_inputs_radius_bottom_right":"text","optional_inputs_radius_bottom_left":"text","optional_inputs_font_size":"text","optional_inputs_active_font_size":"text","optional_lists_elevation":"text","optional_lists_element_elevation":"option","optional_lists_radius_top_right":"text","optional_lists_radius_top_left":"text","optional_lists_radius_bottom_right":"text","optional_lists_radius_bottom_left":"text","optional_lists_border_color":"color","optional_lists_border_width":"text","optional_lists_title_color":"color","optional_lists_text_color":"color","optional_lists_icon_color":"color","optional_lists_link_color":"color","optional_lists_bg_color":"color","optional_lists_title_size":"text","optional_lists_text_size":"text","optional_lists_icon_size":"text","optional_lists_link_size":"text","optional_messages_radius_top_right":"text","optional_messages_radius_top_left":"text","optional_messages_radius_bottom_right":"text","optional_messages_radius_bottom_left":"text","optional_messages_border_width":"text","optional_messages_border_color":"color","optional_messages_title_color":"color","optional_messages_text_color":"color","optional_messages_link_color":"color","optional_messages_bg_color":"color","optional_messages_title_size":"text","optional_messages_text_size":"text","optional_messages_link_size":"text","photo_browser_theme":"option","photo_browser_title_size":"text","photo_browser_text_size":"text","optional_no_panels_title_color":"color","optional_no_panels_sub_title_color":"color","optional_no_panels_text_color":"color","optional_no_panels_icon_color":"color","optional_no_panels_link_color":"color","optional_no_panels_title_size":"text","optional_no_panels_sub_title_size":"text","optional_no_panels_text_size":"text","optional_no_panels_icon_size":"text","optional_no_panels_link_size":"text","optional_slideshow_title_color":"color","optional_slideshow_sub_title_color":"color","optional_slideshow_title_size":"text","optional_slideshow_sub_title_size":"text","optional_slideshow_indicator_active_color":"color","optional_slideshow_indicator_deactive_color":"color","optional_slideshow_elevation":"option","optional_slideshow_border_color":"color","optional_slideshow_border_width":"text","optional_slideshow_radius_top_right":"text","optional_slideshow_radius_top_left":"text","optional_slideshow_radius_bottom_right":"text","optional_slideshow_radius_bottom_left":"text","optional_preloader_indicator_color":"color","optional_preloader_indicator_size":"text","optional_preloader_text_color":"color","optional_preloader_text_size":"text","optional_toast_elevation":"text","optional_toast_radius_top_right":"text","optional_toast_radius_top_left":"text","optional_toast_radius_bottom_right":"text","optional_toast_radius_bottom_left":"text","optional_toast_border_width":"text","optional_toast_border_color":"color","optional_toast_text_color":"color","optional_toast_link_color":"color","optional_toast_bg_color":"color","optional_toast_text_size":"text","optional_toast_link_size":"text","optional_swipe_tab_indicator_active_color":"color","optional_swipe_tab_selected_background_color":"color","optional_swipe_tab_unselected_background_color":"color","optional_swipe_tab_title_selected_color":"color","optional_swipe_tab_title_unselected_color":"color","optional_swipe_tab_title_size":"text","optional_swipe_tab_indicator_width":"text","optional_swipe_tab_border_color":"color","optional_swipe_tab_border_width":"text","optional_swipe_tab_radius_top_right":"text","optional_swipe_tab_radius_top_left":"text","optional_swipe_tab_radius_bottom_right":"text","optional_swipe_tab_radius_bottom_left":"text",};function beta(){my_alert("این بخش در حال آماده سازی است...")}
function isMobileDevice(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){return!0}
return!1}
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=Base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}
output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}
return output},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}
if(enc4!=64){output=output+String.fromCharCode(chr3)}}
output=Base64._utf8_decode(output);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}}
return utftext},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}}
return string}};CmsApp.controller('DashboardCtrl',function($scope,$http,$location,$timeout){$scope.activeCode="";$scope.appName="";$scope.backup="";$scope.changeUploadDir="0";$scope.init=function(){$("[data-toggle='collapse']").click(function(e){e.preventDefault()});$('[data-toggle="tooltip"]').tooltip();var elem=document.querySelector('.js-switch');if(elem!=null){if($('body').hasClass('apt-panel-dark')){elem.setAttribute('checked','checked')}
var init=new Switchery(elem,{color:'#ffffff',secondaryColor:'#373737',jackColor:'#373737',jackSecondaryColor:'#ffffff'});elem.onchange=function(){$('body').toggleClass('apt-panel-dark');if($('body').hasClass('apt-panel-dark')){setCookie('panel_color_apt','apt-panel-dark',365)}else{setCookie('panel_color_apt','',365)}}}
lazyload();$(".btn-category").on('click',function(){$(".btn-category").removeClass("active");$(this).addClass("active");let id=$(this).attr('data-id');if(id==''){$(".template").removeClass("hidden-module");return}
$(".template").addClass("hidden-module");$(".template").each(function(){if($(this).attr("data-category").indexOf(id)>=0){$(this).removeClass("hidden-module")}})})};$scope.setTemplateDemo=function(id){$("#template-demo-qr").attr('src',url+'uploads/qr/61eea118221f0557231f6063/'+id+'/qrcode.png')};$scope.activeAccount=function(){if($scope.activeCode==""){showMsg(LANG.write_code,LANG.wrong_title,"error");return!1}
var data=$.param({activeCode:$scope.activeCode});blockUi();$http({method:"POST",url:url+"api/panel/active",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");$scope.activeCode="";$("#is_active").hide(500);$("#team_email").attr('disabled','disabled')}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.activeAccountMobile=function(){if($scope.activeCode==""){showMsg(LANG.write_code,LANG.wrong_title,"error");return!1}
var data=$.param({code:$scope.activeCode});blockUi();$http({method:"POST",url:url+"api/panel/check-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");$scope.activeCode="";$("#is_active").hide(500);$("#team_mobile").attr('disabled','disabled')}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.addApp=function(){if($('.tourLayer').length>0){$('.tourLayer').remove()}
var data=$.param({appName:LANG.empty_name});blockUi();$http({method:"POST",url:url+"api/panel/addApp",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");$location.path("/app/"+response.data.app)}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.goToApp=function(app){$location.path("/app/"+app)};$scope.goToPage=function(page){$timeout(function(){if(page=='ai'){document.location.href=url+page}
$location.path("/"+page)},1000)}
$scope.importInit=function(){$('.dropify').dropify({messages:{'default':"فایل نسخه پشتیبان با فرمت json",'replace':"فایل نسخه پشتیبان با فرمت json",'remove':LANG.remove,'error':LANG.global_error}});$("#backupFile").change(function(event){$scope.backup=event.target.files[0]})}
$scope.importApp=function(){let form_data=new FormData();if($scope.backup!=""){form_data.append("backup",$scope.backup);form_data.append("change_upload_dir",$scope.changeUploadDir);blockUi();$http({method:"POST",url:url+"api/panel/app-import",headers:{'Content-Type':undefined},data:form_data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$location.path("/dashboard/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}}
$scope.dashboardTour=function(){var html='<div class="tourLayer"><button style="position: absolute; top: 7%; right: calc(50% - 225px);" class="btn btn-danger btn-lg btn-circle" onclick="$(\'.tourLayer\').remove()" type="button"><i class="fa fa-close"></i></button><div id="tourDesc"></div></div>';$('body').prepend(html);$("#tourDesc").html(LANG.startDashboardTour);$("#tourDesc").css('top','10%');$("#tourDesc").css('left','calc(50% - 120px)');$(".add-app-tour").css('z-index',20000)};$scope.removeApp=function(app,id){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.removeApp,message:"<p>"+LANG.removeAppDesc+"</p><p><input type='text' id='remove_app_accept' class='form-control'></p>",buttons:{ok:{label:LANG.removeAppAccept,className:'btn-danger',callback:function(){if($("#remove_app_accept").val()=='delete'){var data=$.param({});blockUi();$http({method:"DELETE",url:url+"api/panel/app-remove/"+app,data:data}).then(function success(response){if(response.data.status){showMsg(response.data.msg,"","success");$("#app_"+id).remove();unBlockUi()}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.selectTemplate=function(id){bootbox.dialog({className:"modal-fade-in-scale-up",title:"ساخت اپلیکیشن",message:"<p>آیا میخواهید از این قالب یک اپ جدید ایجاد کنید؟</p>",buttons:{ok:{label:LANG.ok,className:'btn-purple btn-rounded',callback:function(){var data=$.param({"id":id});blockUi();$http({method:"POST",url:url+"api/panel/add-from-template",data:data}).then(function success(response){if(response.data.status){showMsg(response.data.msg,"","success");unBlockUi();document.location.href=url+"#!/app/"+response.data.app}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})}});if(isMobileDevice()){var apt_current_app_link=getCookie('apt_current_app_link');if(apt_current_app_link!=''){window.location.href=apt_current_app_link}};EditorCtrl=null;CmsApp.controller('EditorCtrl',function($scope,$http,$compile,$window,$timeout){$scope.demoType="android";$scope.demoClock="";$scope.pageName="";$scope.pageInfo="";$scope.pageId="";$scope.app="";$scope.sort=0;$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$scope.sortable=null;$scope.oldDataSort=-1;$scope.newDataSort=-1;$scope.fa_eye="fa-eye-slash";$scope.themeName="";$scope.themeType="";$scope.themeId="";$scope.lastTheme="";$scope.tourMode=!1;$scope.tourStep=-1;$scope.reloadModulePage=!1;$scope.editType=1;$scope.openDesignTabs=[];$scope.pageType='';$scope.changeDemo=function(){if($scope.demoType=="android"){$scope.demoType="ios"}else{$scope.demoType="android"}};$scope.designHelper=function(){document.getElementById("device-screen").contentWindow.window.designHelper()};$scope.init=function(){var today=new Date();var h=today.getHours();var m=today.getMinutes();if(m<10){m="0"+m}
$scope.demoClock=h+":"+m;var height=$(".app-demo-device").height();var width=$scope.getWidth(height,10,18);$(".app-demo-device").width(width+'px');var paddingLeft=($(".demo-box").width()-width)/2;if(LANG.rtl){$(".demo-box").attr("style","padding-right: "+paddingLeft+"px !important;")}else{$(".demo-box").attr("style","padding-left: "+paddingLeft+"px !important;")}
if($scope.editType==1){var srt=document.getElementById('addedPages');$scope.sortable=Sortable.create(srt,{animation:150,scroll:!0,scrollSensitivity:0,onUpdate:function(evt){var $item=$(evt.item);var $next=$item.next();var $perv=$item.prev();var sort=null;if($next.length<=0){sort=parseFloat($perv.attr("data-sort"))+1000}else if($perv.length<=0){sort=parseFloat($next.attr("data-sort"))/2}else{sort=(parseFloat($next.attr("data-sort"))+parseFloat($perv.attr("data-sort")))/2}
if(sort==null||isNaN(sort)){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
var update={};update[$item.attr("data-id")]=sort;$item.attr("data-sort",sort);$scope.updateSort(update)}})}
$('#app_page_name').on('keyup',function(){var el=$("#page_"+$scope.pageId).find('.module-name');el.html($(this).val())});$('#app_theme_name').on('keyup',function(){var el=$("#theme_"+$scope.themeId).find('.theme-name');$scope.limitText(this,35,el)});$("#theme_type_selector").on('change',function(){if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
var newType=$(this).val();$scope.lastTheme=$("#theme_"+$scope.themeId).attr("data-type");if(newType==""||$scope.lastTheme==$scope.themeType){return!1}
$scope.updateThemeSettings("type",newType,function(tid,val,status){if(status=="success"){$("#theme_"+tid).attr("data-type",val);$scope.openTheme(tid,!0)}else{$scope.themeType=$scope.lastTheme}})});$(".media-modal-lg").on("show.bs.modal",function(e){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==4){EditorCtrl.tour(5)}
var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}});$(".media-modal-lg").on("hide.bs.modal",function(e){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==5){if($("#about_us_slider_image_0").val()==""||$("#about_us_slider_image_0").val()=="cdn/img/profile.png"){EditorCtrl.tour(4)}else{EditorCtrl.tour(6)}}});$("a[href='#themesTab']").click(function(){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==14){EditorCtrl.tour(15);$("#currentPageAdmin").html("");EditorCtrl.hidePageSettings()}});$("a[href='#modulesTab']").click(function(){if(EditorCtrl.tourMode&&EditorCtrl.tourStep==28){EditorCtrl.tour(29)}});if($scope.editType==1){$('body').keydown(function(e){if(e.ctrlKey&&e.keyCode==83){e.preventDefault();if(!inSaveMode){if($("#moduleFormSaveBtn").length==1){$("#moduleFormSaveBtn").click()}else if($("#themeFormSaveBtn").length==1){$("#themeFormSaveBtn").click()}else{}}
return!1}})}
var $aside=$('.page-aside');if($aside.length>0){var _PageAside=window.SectionPageAside;var aside=new _PageAside.default({$el:$aside});aside.run()}
if(isMobileDevice()){var apt_current_opened=getCookie('apt_current_opened');setCookie('apt_current_app_link','',-1);setCookie('apt_current_opened','',-1);if(apt_current_opened!=''){$("#page_"+apt_current_opened).click()}}
var elem=document.querySelector('.js-switch');if(elem!=null){if($('body').hasClass('apt-panel-dark')){elem.setAttribute('checked','checked')}
var init=new Switchery(elem,{color:'#ffffff',secondaryColor:'#373737',jackColor:'#373737',jackSecondaryColor:'#ffffff'});elem.onchange=function(){$('body').toggleClass('apt-panel-dark');if($('body').hasClass('apt-panel-dark')){setCookie('panel_color_apt','apt-panel-dark',365)}else{setCookie('panel_color_apt','',365)}}}
EditorCtrl=$scope};$scope.openMobileDemo=function(demo){var from_appeto_app=getCookie('from_appeto_app');if(from_appeto_app=='true'){var slug="";if($scope.pageId!=""){slug=$("#page_"+$scope.pageId).attr("data-slug")}
setCookie('apt_current_app_link',window.location.href,1);setCookie('apt_current_opened',$scope.pageId,1);var win=window.open(demo+'?_mbd&loadPageSlug='+slug,'_blank');win.focus()}else{var win=window.open('https://panel.appeto.ir/appeto-app-dl','_blank');win.focus()}};$scope.getWidth=function(height,x,y){return(height*x)/y};$scope.getHeight=function(width,x,y){};$scope.tour=function(step){$scope.tourStep=step;if(step==-1){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.tour_desc_title,message:"<p>"+LANG.tour_desc_text+"</p>",buttons:{ok:{label:LANG.lets_go,className:'btn-purple',callback:function(){$("#fullPageTour").hide();$scope.tourMode=!0;$scope.tour(0)}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){$scope.tourMode=!1}}}})}else{if(step==0){$("a[href='#modulesTab']").click()}
if(step==3||step==19){$('.panel').removeClass('is-collapse');$('.panel-action.wb-plus').removeClass('wb-plus').addClass('wb-minus')}
if(typeof panel_tour[step]!="undefined"){var el=panel_tour[step].el;var $tourLayer=$(".tourLayer");if($tourLayer.length>0){$tourLayer.remove()}
var next="";if(typeof panel_tour[step].next!="undefined"){next='<div class="text-center">'+panel_tour[step].next+'</div>'}
var html='<div class="tourLayer"><button class="btn btn-danger btn-lg btn-circle" onclick="EditorCtrl.cancelTour()" type="button"><i class="fa fa-close"></i></button><div id="tourDesc"></div></div>';if(panel_tour[step]["full-block"]){$('body').prepend(html)}else{if(typeof panel_tour[step].after!="undefined"){$(el).after(html)}else{$(el).before(html)}}
$tourLayer=$(".tourLayer");$("#tourDesc").html(panel_tour[step].description+next);if(typeof panel_tour[step-1]!="undefined"){$(panel_tour[step-1].el).css("z-index",'');if(typeof panel_tour[step-1].end_callback!="undefined"){panel_tour[step-1].end_callback()}}
$(el).css("z-index",10001);var left=$(el).offset().left;var top=$(el).offset().top;var right=$(document).width()-($(el).width()+left)-30;if(panel_tour[step].position=="left"){if(top-($("#tourDesc").height())>0){$("#tourDesc").css('top',top-($("#tourDesc").height()))}
if(left-($("#tourDesc").width())<=0){$("#tourDesc").css('right',30)}else{$("#tourDesc").css('left',left-($("#tourDesc").width())-30)}}
if(panel_tour[step].position=="right"){if(top-($("#tourDesc").height())>0){$("#tourDesc").css('top',top-($("#tourDesc").height()))}
$("#tourDesc").css('right',right-($("#tourDesc").width()))}
if(panel_tour[step].position=="bottom"){$("#tourDesc").css('top',top+($("#tourDesc").height()));$("#tourDesc").css('left',($(document).width()/2)+($("#tourDesc").width()))}
if(panel_tour[step].position=="bottom_near"){$("#tourDesc").css('top',($("#tourDesc").height()));$("#tourDesc").css('left',($(document).width()/2)-($("#tourDesc").width()))}
if(panel_tour[step].position=="top"){if(top-($("#tourDesc").height())<0){$("#tourDesc").css('top',0)}else{$("#tourDesc").css('top',top-($("#tourDesc").height())-30)}
$("#tourDesc").css('left',($(document).width()/2)+($("#tourDesc").width()))}
if(panel_tour[step].position=="manual"){$("#tourDesc").css('top',panel_tour[step].pos.top);$("#tourDesc").css('left',panel_tour[step].pos.left);$("#tourDesc").css('right',panel_tour[step].pos.right);$("#tourDesc").css('bottom',panel_tour[step].pos.bottom)}
if(typeof panel_tour[step].start_callback!="undefined"){panel_tour[step].start_callback()}}}};$scope.cancelTour=function(){$scope.tourMode=!1;$scope.tourStep=-1;var $tourLayer=$(".tourLayer");if($tourLayer.length>0){$tourLayer.fadeOut(200,function(){$tourLayer.remove();if(!$scope.showPageTopSettings&&!$scope.showThemeTopSettings){$("#fullPageTour").show()}
for(var step in panel_tour){if(typeof panel_tour[step].end_callback!="undefined"){panel_tour[step].end_callback()}
$(panel_tour[step].el).css("z-index",'')}})}};$scope.hidePageSettings=function(){$timeout(function(){$scope.showPageTopSettings=!1},0)};$scope.hideThemeSettings=function(){$timeout(function(){$scope.showThemeTopSettings=!1},0)};$scope.removeTheme=function(reload){if(typeof reload=="undefined"){reload=!1}
if($scope.themeId==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.theme_remove,message:"<p>"+LANG.are_you_sure_theme+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){var data=$.param({theme:$scope.themeId,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/removeTheme",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){$scope.themeName="";$scope.themeType="";var id=$scope.themeId;$scope.themeId="";$scope.lastTheme="";$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#currentPageAdmin").html("");$("#addedThemes").find(".active").removeClass("active");$("#theme_"+id).remove();showMsg(response.data.msg,"","success");if(reload&&$scope.pageType!=''){$scope.openModule($scope.pageType,$scope.pageInfo,$scope.pageId,!1);$scope.pageType=''}}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.exportThemeChanges=function(){if($scope.themeId==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
var data=$.param({theme:$scope.themeId,app:$scope.app});blockUi();$http({method:"POST",url:url+"admin/export-theme-changes",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();showMsg("Done!","","success");window.prompt("Copy to clipboard: Ctrl+C, Enter",response.data)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.saveThemeName=function(){if($scope.themeName==""){showMsg(LANG.write_theme_name,LANG.wrong_title,"error");return!1}
if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
$scope.updateThemeSettings("name",$scope.themeName,function(tid,val,status){if(status=="success"){$("#theme_"+tid).attr("data-name",val)}})};$scope.copyTheme=function(){if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
var theme_id="theme_";var sort=1;var theme_item=$(".theme-item").last().attr("data-id");if(theme_item!="default"){sort=theme_item.split("_");sort=Number(sort[sort.length-1])+1}
if(isNaN(sort)){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
theme_id=theme_id+sort;var data=$.param({copy:$scope.themeId,theme_id:theme_id,sort:sort,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/copyTheme",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){if(response.data.status){showMsg(response.data.msg,"","success");var newTheme=`
                <li class="list-group-item theme-item" 
                ng-click="openTheme('`+theme_id+`');" 
                id="theme_`+theme_id+`" 
                data-id="`+theme_id+`"
                data-name="`+response.data.themeName+`"
                data-type="`+$scope.themeType+`"
                >
                    <i class="icon fa-paint-brush" aria-hidden="true"></i>
                    <span class="text-wrap theme-name">`+response.data.themeName+`</span>
                </li>
                `;var html=$compile(newTheme)($scope);$("#addedThemes").append(html);$scope.openTheme(theme_id)}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.compileModal=function(html){var newHtml=$compile(html)($scope);return newHtml};$scope.updateThemeSettings=function(which,update,callback){if(typeof callback=="undefined"){callback=""}
var data=$.param({which:which,update:update,themeId:$scope.themeId,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/updateThemeSettings",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");if(callback!=""){callback($scope.themeId,update,"success")}}else{showMsg(response.data.msg,LANG.wrong_title,"error");callback($scope.themeId,update,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.hiddenPage=function(){if($scope.pageId==""){showMsg(LANG.write_page_name,LANG.wrong_title,"error");return!1}
if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
var hidden=Number($("#page_"+$scope.pageId).attr("data-hidden"));if(hidden==1){hidden=0}else{hidden=1}
$scope.updatePageSettings("hidden",hidden,function(pid,val){$("#page_"+pid).attr("data-hidden",val);$("#isHidden_"+pid).toggleClass("hidden");if(val==1){$scope.fa_eye="fa-eye"}else{$scope.fa_eye="fa-eye-slash"}})};$scope.removePage=function(){if($scope.pageId==""){showMsg(LANG.write_page_name,LANG.wrong_title,"error");return!1}
if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.page_remove,message:"<p>"+LANG.are_you_sure+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){var module=$("#page_"+$scope.pageId).attr("data-module");var data=$.param({module:module,page:$scope.pageId,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/removePage",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){$scope.pageName="";$scope.pageInfo="";var id=$scope.pageId;$scope.pageId="";$scope.showPageTopSettings=!1;$("#currentPageAdmin").html("");$("#addedPages").find(".active").removeClass("active");$("#page_"+id).remove();showMsg(response.data.msg,"","success")}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.limitText=function(field,maxChar,el){var ref=$(field);ref.val(removeSpecial(ref.val()));var val=ref.val();if(val==''){val='&nbsp;'}
if(val.length>=maxChar){ref.val(function(){return val.substr(0,maxChar)});val=ref.val()}
el.html(val)};$scope.savePageName=function(){if($scope.pageName==""){showMsg(LANG.write_page_name,LANG.wrong_title,"error");return!1}
if($scope.tourMode){if($scope.tourStep!=1){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
if($scope.pageName==LANG["about-us-title"]){showMsg(LANG.tour_error_1,LANG.wrong_title,"info");return!1}}
$scope.updatePageSettings("name",$scope.pageName,function(pid,val){$("#page_"+pid).attr("data-name",val);if($scope.tourMode){$scope.tour(2)}})};$scope.updatePageSettings=function(which,update,callback){if(typeof callback=="undefined"){callback=""}
var data=$.param({which:which,update:update,page:$scope.pageId,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/updatePageSettings",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");if(callback!=""){callback($scope.pageId,update)}}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.updateSort=function(update){blockUi(".modulesTabLoader");var data=$.param({newSort:update,app:$scope.app});$http({method:"POST",url:url+"api/panel/sortPages",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi(".modulesTabLoader");if(response.data.status){showMsg(response.data.msg,"","success")}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi(".modulesTabLoader")})};$scope.changePanelColor=function(){$('body').toggleClass('apt-panel-dark');if($('body').hasClass('apt-panel-dark')){setCookie('panel_color_apt','apt-panel-dark',365)}else{setCookie('panel_color_apt','',365)}};$scope.showHelpSection=function(){$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$scope.themeId="";$scope.pageId="";$("#addedPages").find(".active").removeClass("active");$("#addedThemes").find(".active").removeClass("active");$("#fullPageTour").show();$scope.tour(-1)};$scope.openModule=function(module,info,id,forceSave){if(typeof forceSave=="undefined"){forceSave=!1}
if(module==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$('.page-aside.open').removeClass('open');if($scope.reloadModulePage){$scope.reloadModulePage=!1}
$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#fullPageTour").hide();var data=$.param({});blockUi();$http({method:"POST",url:url+"api/panel/module/"+module+"/run/"+info,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.pageName=$("#page_"+id).attr("data-name");$scope.pageInfo=info;$scope.pageId=id;$scope.themeName="";$scope.themeType="";$scope.themeId="";$scope.showPageTopSettings=!0;$scope.showThemeTopSettings=!1;var html=$compile(response.data)($scope);$("#currentPageAdmin").html(html);$("#addedPages").find(".active").removeClass("active");$("#addedThemes").find(".active").removeClass("active");$("#page_"+id).addClass("active");var hidden=Number($("#page_"+$scope.pageId).attr("data-hidden"));if(hidden==1){$scope.fa_eye="fa-eye"}else{$scope.fa_eye="fa-eye-slash"}
panelInit();var slug=$("#page_"+$scope.pageId).attr("data-slug");if(forceSave){$("#moduleForm").submit()}
if($scope.openDesignTabs.length>0){for(let i in $scope.openDesignTabs){$("a[href='"+$scope.openDesignTabs[i]+"']").click()}
$scope.openDesignTabs=[]}
if($scope.tourMode){$scope.tour($scope.tourStep+1)}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.openTheme=function(id,reload){if(typeof reload=="undefined"){reload=!1}
if(reload&&id==''){id=$scope.themeId}
if(id==""||$scope.app==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$('.page-aside.open').removeClass('open');$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#fullPageTour").hide();var data=$.param({});blockUi();$http({method:"POST",url:url+"api/panel/theme/"+id+"/editor/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.themeName=$("#theme_"+id).attr("data-name");$scope.themeType=$("#theme_"+id).attr("data-type");$scope.themeId=id;$scope.pageName="";$scope.pageInfo="";$scope.pageId="";$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!0;var html=$compile(response.data)($scope);$("#currentPageAdmin").html(html);$("#addedThemes").find(".active").removeClass("active");$("#addedPages").find(".active").removeClass("active");$("#theme_"+id).addClass("active");panelInit();if($scope.tourMode&&$scope.tourStep==15){if($scope.themeId=="default"){$scope.tour(16)}else{$scope.tour(15)}}
if($scope.tourMode&&$scope.tourStep==25){$scope.tour(26)}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.openExport=function(type){if(typeof type=="undefined"){type=""}
if(type==""||$scope.app==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$('.page-aside.open').removeClass('open');$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#fullPageTour").hide();var data=$.param({});blockUi();$http({method:"POST",url:url+"api/panel/export/"+type+"/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();var html=$compile(response.data)($scope);$("#currentPageAdmin").html(html);$("#addedThemes").find(".active").removeClass("active");$("#addedPages").find(".active").removeClass("active");panelInit()},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.extraModule=null;$scope.extraModuleLicenseType="";$scope.extraModuleLicense="";$scope.openExtraModule=function(){if($scope.app==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$('.page-aside.open').removeClass('open');$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#fullPageTour").hide();var data=$.param({});blockUi();$http({method:"POST",url:url+"api/panel/app-add-extra-module/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();var html=$compile(response.data)($scope);$("#currentPageAdmin").html(html);$("#addedThemes").find(".active").removeClass("active");$("#addedPages").find(".active").removeClass("active");panelInit()},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.extraModuleImportInit=function(){$scope.extraModule=null;$timeout(function(){$('.dropify').dropify({messages:{'default':"فایل های ماژول با فرمت zip",'replace':"فایل های ماژول با فرمت zip",'remove':LANG.remove,'error':LANG.global_error}});$("#moduleFile").change(function(event){$scope.extraModule=event.target.files[0]})},500)}
$scope.addExtraModule=function(){let form_data=new FormData();if($scope.extraModule!=""&&$scope.extraModule!=null){form_data.append("file",$scope.extraModule);form_data.append("licenseType",$scope.extraModuleLicenseType);form_data.append("license",$scope.extraModuleLicense);blockUi();$http({method:"POST",url:url+"api/panel/app-upload-extra-module/"+$scope.app,headers:{'Content-Type':undefined},data:form_data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$timeout(function(){document.location.reload()},1000)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}}
$scope.openSettings=function(){if($scope.app==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$('.page-aside.open').removeClass('open');$("#currentPageAdmin").html("");$scope.showPageTopSettings=!1;$scope.showThemeTopSettings=!1;$("#fullPageTour").hide();var data=$.param({});blockUi();$http({method:"POST",url:url+"api/panel/app-settings/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();var html=$compile(response.data)($scope);$("#currentPageAdmin").html(html);$("#addedThemes").find(".active").removeClass("active");$("#addedPages").find(".active").removeClass("active");panelInit()},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.saveSettings=function(){var name=$("#app_name").val();var font=$("#app_font").val();var icon=$("#app_icon").val();var copy=$("#can_copy").val();var screen=$("#screen_record").val();var no_image=$("#app_no_image").val();var images_box_fit=$("#images_box_fit").val();if(name==''){showMsg(LANG.app_name_error,LANG.wrong_title,"warning");return!1}
if(icon==''){showMsg(LANG.app_icon_error,LANG.wrong_title,"warning");return!1}
if(font!=''){var ext=font.split(".");ext=ext[ext.length-1];ext=ext.toLowerCase();if(ext!='ttf'){showMsg(LANG.app_font_error,LANG.wrong_title,"warning");return!1}}
var data=$.param({"name":name,"icon":icon,"font":font,'can_copy':copy,'screen_record':screen,'no_image':no_image,'images_box_fit':images_box_fit,});blockUi();$http({method:"POST",url:url+"api/panel/save-settings/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,'',"success");$("#show_app_icon").attr('src',url+icon);$("#show_app_name").html(name)}else{showMsg(response.data.msg,LANG.wrong_title,"danger")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.showModules=function(){if($scope.tourMode&&$scope.tourStep==29){$scope.cancelTour()}
$("#appModules").modal("show")};$scope.hideModules=function(){$("#appModules").modal("hide")};$scope.showThemes=function(){$("#appThemes").modal("show")};$scope.hideThemes=function(){$("#appThemes").modal("hide")};$scope.addPage=function(module){if(module==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
if($scope.tourMode){if($scope.tourStep!=0){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
if(module!="AboutUs"){showMsg(LANG.tour_error_0,LANG.wrong_title,"info");return!1}}
$scope.hideModules();if($(".module-item").last().attr("data-sort")==undefined){$scope.sort=1000}else{$scope.sort=parseFloat($(".module-item").last().attr("data-sort"));$scope.sort+=1000}
var data=$.param({module:module,sort:$scope.sort,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/addPage",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){if(response.data.status){var router=JSON.stringify(response.data.page.settings.router);showMsg(response.data.msg,"","success");var hidden="hidden";if(response.data.page.hidden==1){hidden=""}
var newPage=`
                <li class="list-group-item module-item mo-`+module+`" 
                    id="page_`+response.data.page.id+`" 
                    data-id="`+response.data.page.id+`" 
                    data-sort="`+response.data.page.sort+`" 
                    data-name="`+response.data.page.name+`" 
                    data-hidden="`+response.data.page.hidden+`"
                    data-none-page="`+response.data.page.hidden+`"
                    data-info="`+response.data.page.info+`" 
                    data-module="`+module+`" 
                    data-slug="`+response.data.page.slug+`" 
                    data-router='`+router+`' 
                    data-icon='`+response.data.page.settings.icon+`' 
                    data-color='`+response.data.page.settings.color+`' 
                    ng-click="openModule('`+module+`', '`+response.data.page.info+`', '`+response.data.page.id+`')">
                    <i class="icon mo-icon `+response.data.page.settings.icon+` sortable-handle" aria-hidden="true"></i>
                    <span class="text-wrap module-name">`+response.data.page.name+`</span>
                    <div class="modules-list-settings">
                        <i class="icon mo-hide-icon fa-eye-slash ml-10 mr-0 `+hidden+`" id="isHidden_`+response.data.page.id+`" aria-hidden="true"></i>
                        <i class="icon  fa-arrows-v ml-10 mr-0 text-right" aria-hidden="true"></i>
                    </div>
                </li>
                `;var html=$compile(newPage)($scope);$("#addedPages").append(html);$scope.openModule(module,response.data.page.info,response.data.page.id,!0)}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.addTheme=function(theme){if(theme==""){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
$scope.hideThemes();var theme_id="theme_";var sort=1;var theme_item=$(".theme-item").last().attr("data-id");if(theme_item!="default"){sort=theme_item.split("_");sort=Number(sort[sort.length-1])+1}
if(isNaN(sort)){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
theme_id=theme_id+sort;var data=$.param({theme:theme,theme_id:theme_id,sort:sort,app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/addTheme",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){if(response.data.status){showMsg(response.data.msg,"","success");var newTheme=`
                <li class="list-group-item theme-item" 
                ng-click="openTheme('`+theme_id+`');" 
                id="theme_`+theme_id+`" 
                data-id="`+theme_id+`"
                data-name="`+response.data.themeName+`"
                data-type="`+theme+`"
                >
                    <i class="icon fa-paint-brush" aria-hidden="true"></i>
                    <span class="text-wrap theme-name">`+response.data.themeName+`</span>
                </li>
                `;var html=$compile(newTheme)($scope);$("#addedThemes").append(html);$scope.openTheme(theme_id)}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.beta=function(){beta()};$scope.exportTest=function(){var data=$.param({app:$scope.app});blockUi();$http({method:"POST",url:url+"api/panel/exportTest",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success");if(typeof response.data.debug_dl!="undefined"){document.location.href=response.data.debug_dl}}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.modulesKeyword="";$scope.searchModulesKeyword=function(){$scope.modulesCategories=LANG.all;if($scope.modulesKeyword==""){$(".modules-list-item").removeClass("hidden-module");return!1}else{$(".modules-list-item").addClass("hidden-module")}
$(".modules-list-item").each(function(){if($(this).attr("data-keywords").indexOf($scope.modulesKeyword)>=0){$(this).removeClass("hidden-module")}})};$scope.modulesCategories=LANG.all;$scope.searchModulesCategory=function(){$scope.modulesKeyword="";if($scope.modulesCategories==LANG.all){$(".modules-list-item").removeClass("hidden-module");return!1}else{$(".modules-list-item").addClass("hidden-module")}
$(".modules-list-item").each(function(){if($(this).attr("data-categories").indexOf($scope.modulesCategories)>=0){$(this).removeClass("hidden-module")}})};$scope.moduleSearch='';$scope.searchPage=function(){$("#moduleSearchResult").html('');if($scope.moduleSearch=='')return;var result=[];$(".module-item").each(function(){if($(this).attr("data-name").indexOf($scope.moduleSearch)>=0){result.push($(this).attr("id"))}});if(result.length<=0){showMsg(LANG.notFound,LANG.wrong_title,"warning");return}
$(".moduleSearchResultBox").show();for(var i in result){var elm=$("#"+result[i]);var name=elm.attr('data-name');var module=elm.attr('data-module');var info=elm.attr('data-info');var id=elm.attr('data-id');$("#moduleSearchResult").append('<li onclick="EditorCtrl.openModule(\''+module+'\', \''+info+'\', \''+id+'\')" class="list-group-item">'+name+'</li>')}}
$scope.closeSearch=function(){$(".moduleSearchResultBox").hide();$scope.moduleSearch='';$("#moduleSearchResult").html('')}
$scope.table=[];$scope.changePageTable=function(p,fun){if(typeof window[fun]=="function"){window[fun](p)}};$scope.removeItemTable=function(id,fun){if(typeof window[fun]=="function"){window[fun](id)}};$scope.changeStatusInTable=function(id,statusAccept,index,fun){if(typeof window[fun]=="function"){window[fun](id,statusAccept,index)}};$scope.copyObject=function(obj){return JSON.parse(JSON.stringify(obj))};$scope.repeater=[];$scope.repeaterEnd=function(callback,data){if(typeof window[callback]=="function"){window[callback](data)}};$scope.updateRepeater=function(box,val){$scope.$apply(function(){$scope.repeater[box]=val})};$scope.removeRepeater=function(box,obj,callback){var index=Number($(obj).attr('data-index'));var remove=!0;if(callback!=''&&typeof window[callback]=="function"){remove=window[callback](index,obj)}
if(remove){$timeout(function(){$scope.repeater[box].splice(index,1);if($scope.repeater[box].length<=0){$("#"+box+"_manage_empty").attr('name',$("#"+box+"_manage_empty").attr('data-name'));$("#"+box+"_manage_empty").val('')}
if(callback!=""){callback="after_"+callback}
if(callback!=''&&typeof window[callback]=="function"){window[callback](box)}},0)}};$scope.addRepeater=function(box,callback){var defaultVal=$scope.copyObject($scope.repeater[box+"_default_val"]);$scope.repeater[box].push(defaultVal);$("#"+box+"_manage_empty").removeAttr('name');if(callback!=''&&typeof window[callback]=="function"){window[callback]()}};$scope.callAddRepeater=function(box,callback){$timeout(function(){$scope.addRepeater(box,callback)},0)};$scope.showRepeaterTypeRouter=function(box,type,index){$timeout(function(){if(type=='none'||type=="link"||type=="email"||type=="tel"||type=="ussd"){$("#"+box+"_link_"+index).show();$("#"+box+"_router_settings_"+index).hide()}else{$("#"+box+"_link_"+index).hide();$("#"+box+"_router_settings_"+index).show()}},0)};$scope.repeaterTypeChanged=function(box,obj){var type=$(obj).val();var index=Number($(obj).attr('data-index'));$(obj).attr('data-value',type);$scope.repeater[box][index].type=type;$scope.showRepeaterTypeRouter(box,type,index)};$scope.repeaterIconTypeChanged=function(box,obj){var icon_type=$(obj).val();var index=Number($(obj).attr('data-index'));$(obj).attr('data-value',icon_type);$timeout(function(){$scope.repeater[box][index].icon_type=icon_type},0)};$scope.repeaterOptionChanged=function(box,obj,key){var val=$(obj).val();var index=Number($(obj).attr('data-index'));$(obj).attr('data-value',val);$timeout(function(){$scope.repeater[box][index][key]=val},0)};$scope.repeaterCustomIconSelected=function(box,icon,obj){var index=$(obj).attr('data-index');$timeout(function(){$scope.repeater[box][index].icon=icon},0)};$scope.repeaterCustomColorSelected=function(box,color,obj,key){var index=Number($(obj).attr('data-index'));$timeout(function(){$scope.repeater[box][index][key]=color},0)};$scope.repeaterSrcManager=function(pathURL,image){var pattern=/^((http|https|ftp):\/\/)/;if(pattern.test(image)){return image}
return pathURL+image};$scope.routerCurrentRepeaterBox="";$scope.routerSettingsType="";$scope.routerActionType="action_sheet";$scope.routerCurrentInputSave="";$scope.routerCurrentSaveInfo=[];$scope.routerExtraInfoDisable=!0;$scope.applyShowRouterSettings=function(id,type,index){$timeout(function(){$scope.showRouterSettings(id,type,index)},0)};$scope.showRouterSettings=function(id,type,index){var settings={};if($("#"+id+"_router_"+index).html()!=""){settings=JSON.parse($("#"+id+"_router_"+index).html())}
$scope.routerCurrentRepeaterBox=id;$scope.routerSettingsType=type;$scope.routerCurrentInputSave="#"+id+"_router_"+index;$scope.routerCurrentSaveInfo=[];var innerActionType="";if(typeof settings.actionType!="undefined"){$scope.routerActionType=settings.actionType}
if(typeof settings.info!="undefined"){if($scope.routerActionType=="confirmed"){$scope.routerCurrentSaveInfo.confirmed=settings.info;innerActionType=settings.info.actionType}else if($scope.routerActionType=="alert"){$scope.routerCurrentSaveInfo.alert=settings.info;innerActionType=settings.info.actionType}else if($scope.routerActionType=="action_sheet"){innerActionType=settings.info.menu_id}else if($scope.routerActionType=='internal_link'){innerActionType=settings.info.page_id;if(typeof $scope.routerCurrentSaveInfo.internal_link=="undefined"){$scope.routerCurrentSaveInfo.internal_link={}}
$scope.routerCurrentSaveInfo.internal_link.pageInfo=settings.info.page_info}else if($scope.routerActionType=='sms'){$scope.routerCurrentSaveInfo.sms=settings.info}else{}}else{if($scope.routerActionType!="back"){$scope.routerActionType="action_sheet"}}
if($scope.routerSettingsType=='internal_link'){$scope.routerActionType="internal_link"}
if($scope.routerSettingsType=='sms'){$scope.routerActionType="sms"}
var pages=$scope.sortable.toArray();$("#routerPageSelector").html('<option value="">'+LANG.menu_pages+'</option>');$("#routerPageLinkSelector").html('<option value="">'+LANG.pages+'</option>');$("#routerPageSelectorConfirmed").html('<option value="">'+LANG.select_action_type+'</option>'+'<optgroup label="'+LANG.actions+'"><option value="link">'+LANG.link+'</option>'+'<option value="email">'+LANG.email+'</option>'+'<option value="tel">'+LANG.tel+'</option>'+'<option value="ussd">'+LANG.ussd+'</option>'+'<option value="sms">'+LANG.sms+'</option>'+'<option value="dismiss">'+LANG.dismiss+'</option>'+'<option value="back">'+LANG.back+'</option></optgroup><optgroup label="'+LANG.pages+'">');$("#routerPageSelectorAlert").html('<option value="">'+LANG.select_action_type+'</option>'+'<optgroup label="'+LANG.actions+'"><option value="link">'+LANG.link+'</option>'+'<option value="email">'+LANG.email+'</option>'+'<option value="tel">'+LANG.tel+'</option>'+'<option value="ussd">'+LANG.ussd+'</option>'+'<option value="sms">'+LANG.sms+'</option>'+'<option value="dismiss">'+LANG.dismiss+'</option>'+'<option value="back">'+LANG.back+'</option></optgroup><optgroup label="'+LANG.pages+'">');$('#routerPageSelectorAlert').on('change',function(){if(typeof $scope.routerCurrentSaveInfo.alert=="undefined"){$scope.routerCurrentSaveInfo.alert={}}
var val=$(this).val();$timeout(function(){$scope.routerCurrentSaveInfo.alert.actionType=val},0)});$('#routerPageSelectorConfirmed').on('change',function(){if(typeof $scope.routerCurrentSaveInfo.confirmed=="undefined"){$scope.routerCurrentSaveInfo.confirmed={}}
var val=$(this).val();$timeout(function(){$scope.routerCurrentSaveInfo.confirmed.actionType=val},0)});$('#routerPageLinkSelector').on('change',function(){if($("#routerPageLinkSelector").find(":selected").attr('data-have-args')==='true'){$timeout(function(){$scope.routerExtraInfoDisable=!1},0)}else{$timeout(function(){$scope.routerExtraInfoDisable=!0},0)}});var sub_pages;for(var i in pages){if($("#page_"+pages[i]).attr('data-none-page')=="1"){continue}
if($("#page_"+pages[i]).attr('data-module')=="Menu"){$("#routerPageSelector").append('<option value="'+$("#page_"+pages[i]).attr('data-id')+'">'+$("#page_"+pages[i]).attr('data-name')+'</option>')}
sub_pages=JSON.parse($("#page_"+pages[i]).attr('data-router'));if(sub_pages.length!==0){var sub_page='<optgroup label="'+$("#page_"+pages[i]).attr('data-name')+'">'+'<option value="/'+$("#page_"+pages[i]).attr('data-slug')+'/">'+LANG.home_page+' '+$("#page_"+pages[i]).attr('data-name')+'</option>';for(var j in sub_pages){if(sub_pages[j].name[LANG.language]==''){continue}
var haveArgs='false';if(typeof sub_pages[j].args!="undefined"&&sub_pages[j].args.length>0){haveArgs='true'}
sub_page+='<option data-have-args="'+haveArgs+'" value="/'+$("#page_"+pages[i]).attr('data-slug')+'/'+sub_pages[j].base_path+'">'+sub_pages[j].name[LANG.language]+' ('+$("#page_"+pages[i]).attr('data-name')+')</option>'}
sub_page+='</optgroup>';$("#routerPageSelectorConfirmed").append(sub_page);$("#routerPageSelectorAlert").append(sub_page);$("#routerPageLinkSelector").append(sub_page)}else{$("#routerPageSelectorConfirmed").append('<option value="/'+$("#page_"+pages[i]).attr('data-slug')+'/">'+$("#page_"+pages[i]).attr('data-name')+'</option>');$("#routerPageSelectorAlert").append('<option value="/'+$("#page_"+pages[i]).attr('data-slug')+'/">'+$("#page_"+pages[i]).attr('data-name')+'</option>');$("#routerPageLinkSelector").append('<option value="/'+$("#page_"+pages[i]).attr('data-slug')+'/">'+$("#page_"+pages[i]).attr('data-name')+'</option>')}}
$("#routerPageSelectorConfirmed").html($("#routerPageSelectorConfirmed").html()+'</optgroup>');$("#routerPageSelectorAlert").html($("#routerPageSelectorAlert").html()+'</optgroup>');$(".select2").select2({dropdownParent:$("#routerExtraSidebar"),language:LANG.lang,dir:LANG.direction});if($scope.routerActionType=="confirmed"){$('#routerPageSelectorConfirmed').val(innerActionType);$('#routerPageSelectorConfirmed').trigger('change')}
if($scope.routerActionType=="alert"){$('#routerPageSelectorAlert').val(innerActionType);$('#routerPageSelectorAlert').trigger('change')}
if($scope.routerActionType=="action_sheet"){$('#routerPageSelector').val(innerActionType);$('#routerPageSelector').trigger('change')}
if($scope.routerActionType=="internal_link"){$("#routerPageLinkSelector").val(innerActionType);$("#routerPageLinkSelector").trigger('change')}
$("#routerExtraSidebar").modal({backdrop:'static',show:!0})};$scope.routerChangeApply=function(type,val){if(type=="confirmed"){if(typeof $scope.routerCurrentSaveInfo.confirmed=="undefined"){$scope.routerCurrentSaveInfo.confirmed={}}
$scope.$apply(function(){$scope.routerCurrentSaveInfo.confirmed.image=val})}};$scope.saveRouterInfo=function(){var save={"actionType":$scope.routerActionType};if($scope.routerActionType=='sms'){if(typeof $scope.routerCurrentSaveInfo.sms=="undefined"){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.sms.mobile==""||$scope.routerCurrentSaveInfo.sms.mobile===undefined){my_alert(LANG.enter_full_info);return!1}
save.info=$scope.routerCurrentSaveInfo.sms}
if($scope.routerActionType=="internal_link"){if($("#routerPageLinkSelector").val()==""){my_alert(LANG.enter_full_info);return!1}
if(typeof $scope.routerCurrentSaveInfo.internal_link=="undefined"){$scope.routerCurrentSaveInfo.internal_link={}}
if(!$scope.routerExtraInfoDisable&&($scope.routerCurrentSaveInfo.internal_link.pageInfo===undefined||$scope.routerCurrentSaveInfo.internal_link.pageInfo=='')){my_alert(LANG.enter_full_info);return!1}
if($scope.routerExtraInfoDisable&&$scope.routerCurrentSaveInfo.internal_link.pageInfo!==undefined&&$scope.routerCurrentSaveInfo.internal_link.pageInfo!=''){$scope.routerCurrentSaveInfo.internal_link.pageInfo=''}
save.info={"page_id":$("#routerPageLinkSelector").val(),"page_info":$scope.routerCurrentSaveInfo.internal_link.pageInfo}}
if($scope.routerActionType=='back'){}
if($scope.routerActionType=='action_sheet'){if($("#routerPageSelector").val()==""){my_alert(LANG.enter_full_info);return!1}
save.info={"menu_id":$("#routerPageSelector").val()}};if($scope.routerActionType=='confirmed'){if(typeof $scope.routerCurrentSaveInfo.confirmed=="undefined"){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.confirmed.title==""||$scope.routerCurrentSaveInfo.confirmed.content===undefined){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.confirmed.content==""||$scope.routerCurrentSaveInfo.confirmed.content===undefined){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.confirmed.ok==""||$scope.routerCurrentSaveInfo.confirmed.ok===undefined){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.confirmed.cancel==""||$scope.routerCurrentSaveInfo.confirmed.cancel===undefined){my_alert(LANG.enter_full_info);return!1}
if($('#routerPageSelectorConfirmed').val()==""){my_alert(LANG.enter_full_info);return!1}
var action=$('#routerPageSelectorConfirmed').val();if(($scope.routerCurrentSaveInfo.confirmed.pageInfo==""||$scope.routerCurrentSaveInfo.confirmed.pageInfo===undefined)&&(action=='link'||action=='email'||action=='tel'||action=='ussd'||action=='sms')){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.confirmed.pageInfoSmsContent===undefined){$scope.routerCurrentSaveInfo.confirmed.pageInfoSmsContent=""}
if($scope.routerCurrentSaveInfo.confirmed.image===undefined){$scope.routerCurrentSaveInfo.confirmed.image=""}
if($("#glob_router_current_confirmed_image").val()==""){$scope.routerCurrentSaveInfo.confirmed.image=""}
save.info=$scope.routerCurrentSaveInfo.confirmed}
if($scope.routerActionType=='alert'){if(typeof $scope.routerCurrentSaveInfo.alert=="undefined"){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.alert.title==""||$scope.routerCurrentSaveInfo.alert.content===undefined){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.alert.content==""||$scope.routerCurrentSaveInfo.alert.content===undefined){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.alert.ok==""||$scope.routerCurrentSaveInfo.alert.ok===undefined){my_alert(LANG.enter_full_info);return!1}
if($('#routerPageSelectorAlert').val()==""){my_alert(LANG.enter_full_info);return!1}
var action=$('#routerPageSelectorAlert').val();if(($scope.routerCurrentSaveInfo.alert.pageInfo==""||$scope.routerCurrentSaveInfo.alert.pageInfo===undefined)&&(action=='link'||action=='email'||action=='tel'||action=='ussd'||action=='sms')){my_alert(LANG.enter_full_info);return!1}
if($scope.routerCurrentSaveInfo.alert.pageInfoSmsContent===undefined){$scope.routerCurrentSaveInfo.alert.pageInfoSmsContent=""}
if($scope.routerCurrentSaveInfo.alert.icon===undefined){$scope.routerCurrentSaveInfo.alert.icon="fa-info"}
if($("#glob_router_current_alert_icon").val()==""){$scope.routerCurrentSaveInfo.alert.icon="fa-info"}else{$scope.routerCurrentSaveInfo.alert.icon=$("#glob_router_current_alert_icon").val()}
save.info=$scope.routerCurrentSaveInfo.alert}
$($scope.routerCurrentInputSave).html(JSON.stringify(save));$("#routerExtraSidebar").modal('hide')}
$scope.sliderInterval=[];$scope.showSliderInterval=function(obj,showSecond){var val=$(obj).val();$timeout(function(){if(val==='manual')
$scope.sliderInterval[showSecond]=!1;else $scope.sliderInterval[showSecond]=!0},0)};$scope.createDesignFromStructure=function(module,structure,pageId,subPage,_themeId){if($scope.tourMode){showMsg(LANG.tour_error,LANG.wrong_title,"info");return!1}
if(_themeId=='default'){var sort=1;var theme_item=$(".theme-item").last().attr("data-id");if(theme_item!="default"){sort=theme_item.split("_");sort=Number(sort[sort.length-1])+1}
var name=LANG.special_design+' '+sort;bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.create_design,message:"<p>"+LANG.create_design_help+"</p><p><input type='text' id='my_theme_design_name' class='form-control' value='"+name+"' placeholder='"+LANG.design_name+"'></p>",buttons:{ok:{label:LANG.choose_and_edit,className:'btn-purple',callback:function(){var designName=$("#my_theme_design_name").val();if(designName!=''){var theme='app-modern-bottom-tab';var theme_id="theme_";theme_id=theme_id+sort;var data=$.param({theme:'app-modern-bottom-tab',theme_id:theme_id,sort:sort,app:$scope.app,createFromTheme:{'name':designName,'module':module,'structure':structure,'pageId':pageId,'subPage':subPage}});blockUi();$http({method:"POST",url:url+"api/panel/addTheme",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){if(response.data.status){showMsg(response.data.msg,"","success");var icon=$("#page_"+pageId).attr('data-icon');var color='color: '+$("#page_"+pageId).attr('data-color');var newTheme=`
                                    <li class="list-group-item theme-item" 
                                    ng-click="openTheme('`+theme_id+`');" 
                                    id="theme_`+theme_id+`" 
                                    data-id="`+theme_id+`"
                                    data-name="`+response.data.themeName+`"
                                    data-type="`+theme+`"
                                    >
                                        <i class="icon fa-paint-brush" style="`+color+`" aria-hidden="true"></i>
                                        <span class="text-wrap theme-name" style="`+color+`">`+response.data.themeName+`</span>
                                        <div class="themes-list-settings">
                                            <i class="icon mo-hide-icon `+icon+` ml-0 mr-0" style="`+color+`" aria-hidden="true"></i>
                                        </div>
                                    </li>
                                    `;var html=$compile(newTheme)($scope);$("#addedThemes").append(html);$scope.openDesignTabs=['#page_designs'];if(subPage!=''){$scope.openDesignTabs.push('#'+subPage)}
$scope.pageType=module;$scope.openModule(module,$scope.pageInfo,$scope.pageId,!1);$scope.openDesignSectionModal(theme_id,subPage,structure)}else{unBlockUi();showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})}else{$scope.pageType=module;$scope.openDesignTabs=['#page_designs'];if(subPage!=''){$scope.openDesignTabs.push('#'+subPage)}
$scope.openDesignSectionModal(_themeId,subPage,structure)}}
$scope.openDesignSectionModal=function(id,sub,structure){$scope.themeId='';var data=$.param({'section_editor':1,'section_editor_sub':sub,'section_structure':structure});blockUi();$http({method:"POST",url:url+"api/panel/theme/"+id+"/editor/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.themeId=id;$("#sectionDesignModalTitle").html($("#theme_"+id).attr('data-name'));$("#sectionDesignModelContent").html('');var html=$compile(response.data)($scope);$("#sectionDesignModelContent").html(html);panelInit(!0);$("#sectionDesignModel").modal('show')},function error(response){$scope.themeId='';showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.aptCopyText=function(id){var element=document.getElementById(id)
var $temp=$("<input>");$("body").append($temp);$temp.val($(element).val()).select();document.execCommand("copy");$temp.remove();showMsg(LANG.copyDone,LANG.success,'success')};$scope.showVideoTutorial=function(url,title){bootbox.dialog({className:"modal-fade-in-scale-up",title:title,message:'<iframe src="'+url+'" style="width: 100%; height: 400px; border: 0;" allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>',buttons:{ok:{label:LANG.cancel,className:'btn-danger',callback:function(){}}}})}
$scope.elementorLoading=!0;$scope.elementor=[];$scope.elementorController=[];$scope.elementorCurrentKey=-1;$scope.elementorCurrentIndex=-1;$scope.elementorCurrentRow=-1;$scope.elementorElements=null;$scope.elementorSetBuilder=function(elementor){$scope.elementorLoading=!0;$timeout(function(){$scope.elementorController=[];$scope.elementor=[];$scope.elementorLoading=!0;$timeout(function(){$scope.elementor=JSON.parse(JSON.stringify(elementor));$scope.elementorLoading=!1},150)},150)};$scope.elementorSetElement=function(key,index){$scope.elementorCurrentKey=key;$scope.elementorCurrentIndex=index}
$scope.elementorSetRow=function(key){$scope.elementorCurrentRow=key;$("#elementorRowTitle").val($scope.elementor[key].title);$("#ElementorRowElevation").val($scope.elementor[key].elevation);$("#elementorRowBgColor").val($scope.elementor[key].background_color);$("#elementorRowTitleColor").val($scope.elementor[key].title_color);$("#elementorRowReadMoreColor").val($scope.elementor[key].read_more_color);$("#elementorRowPaddingRight").val($scope.elementor[key].padding.right);$("#elementorRowPaddingTop").val($scope.elementor[key].padding.top);$("#elementorRowPaddingBottom").val($scope.elementor[key].padding.bottom);$("#elementorRowPaddingLeft").val($scope.elementor[key].padding.left);$("#elementorRowMarginRight").val($scope.elementor[key].margin.right);$("#elementorRowMarginTop").val($scope.elementor[key].margin.top);$("#elementorRowMarginBottom").val($scope.elementor[key].margin.bottom);$("#elementorRowMarginLeft").val($scope.elementor[key].margin.left);$("#ElementorRow_radius_top_right").val($scope.elementor[key].border_radius.top_right);$("#ElementorRow_radius_top_left").val($scope.elementor[key].border_radius.top_left);$("#ElementorRow_radius_bottom_right").val($scope.elementor[key].border_radius.bottom_right);$("#ElementorRow_radius_bottom_left").val($scope.elementor[key].border_radius.bottom_left)}
$scope.elementorAddElement=function(element){$("#elementorElements").modal("hide");$scope.elementor[$scope.elementorCurrentKey].items[$scope.elementorCurrentIndex].element=element;let elementor=JSON.parse(JSON.stringify($scope.elementor));$scope.elementorSetBuilder(elementor);elementor=null}
$scope.elementorRemoveElement=function(key,index){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.remove,message:"<p>"+LANG.removeElementorElement+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){$timeout(function(){$scope.elementor[key].items[index].element="";$scope.elementor[key].items[index].setting={};$scope.elementor[key].items[index].design="";let elementor=JSON.parse(JSON.stringify($scope.elementor));$scope.elementorSetBuilder(elementor);elementor=null},150)}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})}
$scope.elementorCompile=function(key,index,element){if(!$scope.elementorController[key+"_"+index]){$scope.elementorController[key+"_"+index]=!0}else{return}
let title=$scope.elementorElements[element].title;let color=$scope.elementorElements[element].color;let icon=$scope.elementorElements[element].icon;let design=$scope.elementor[key].items[index].design||"";let setting=Base64.encode(JSON.stringify($scope.elementor[key].items[index].setting));let html=`
        <div class="card mb-0 btn-dashed">
            <div class="card-body text-center" style="color: #ffffff; background-color: `+color+`;">
                <div class="elementor-other-settings">
                    <button type="button"
                     data-toggle="modal"
                     data-target="#elementorElements"
                     ng-click="elementorSetElement(`+key+`, `+index+`)"
                    class="btn btn-sm btn-round elementor-other-settings-right"><i class="fa fa-refresh"></i></button>
                    <button type="button"
                     data-toggle="modal"
                     data-backdrop="static"
                     data-keyboard="false"
                     data-target="#elementor_select_design_`+key+`_`+index+`"
                    class="btn btn-sm btn-round elementor-other-settings-left"><i class="fa fa-paint-brush"></i></button>
                </div>
                <i class="fa `+icon+` font-size-30"></i>
                <div><small>`+title+`</small></div>
            </div>`;html+='<elementor-select-design '+'element="'+element+'" '+'title="'+title+'" '+'key="'+key+'" '+'design="'+design+'" '+'index="'+index+'"></elementor-select-design>';switch(element){case "text":html+='<elementor-text '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-text>';break;case "image":html+='<elementor-image '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-image>';break;case "button":html+='<elementor-button '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-button>';break;case "icon":html+='<elementor-icon '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-icon>';break;case "space":html+='<elementor-space '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-space>';break;case "separator":html+='<elementor-separator '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-separator>';break;case "slider":html+='<elementor-slider '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-slider>';break;case "card":html+='<elementor-card '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-card>';break;case "video":html+='<elementor-video '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-video>';break;case "audio":html+='<elementor-audio '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-audio>';break;default:html+='<elementor-module '+'app="'+$scope.app+'" '+'element="'+element+'" '+'title="'+title+'" '+'key="'+key+'" '+'setting="'+setting+'" '+'index="'+index+'"></elementor-module>';element='module'}
html+=`
            <div class="card-footer">
                <button type="button" ng-click="elementorRemoveElement(`+key+`, `+index+`)" class="btn btn-sm btn-danger btn-round"><i class="fa fa-trash"></i></button>
                <button type="button" 
                 data-toggle="modal"
                 data-backdrop="static"
                 data-keyboard="false"
                 data-target="#elementor_`+element+`_`+key+`_`+index+`"
                class="btn btn-sm btn-purple btn-round"><i class="fa fa-edit"></i></button>
            </div>
        </div>`;$("#elementor-section-"+key+'-'+index).html('');html=$compile(html)($scope);$timeout(function(){$("#elementor-section-"+key+'-'+index).html('');$("#elementor-section-"+key+'-'+index).append(html)},150)}
$scope.elementorAddRow=function(){$scope.elementor.push({"column":"1","background_color":"","scrollable":!1,"title":"","title_color":"","read_more_color":"","read_more":{"type":"none","link":"","router":""},"read_more_text":"","elevation":"0","padding":{"top":"4","right":"4","bottom":"4","left":"4"},"margin":{"top":"6","right":"6","bottom":"6","left":"6"},"border_radius":{"top_right":"0","top_left":"0","bottom_right":"0","bottom_left":"0"},"items":[{"element":"","setting":{},"design":""}]})}
$scope.elementorSetRowSetting=function(){$scope.elementor[$scope.elementorCurrentRow].title=$("#elementorRowTitle").val();$scope.elementor[$scope.elementorCurrentRow].elevation=$("#ElementorRowElevation").val();$scope.elementor[$scope.elementorCurrentRow].background_color=$("#elementorRowBgColor").val();$scope.elementor[$scope.elementorCurrentRow].title_color=$("#elementorRowTitleColor").val();$scope.elementor[$scope.elementorCurrentRow].read_more_color=$("#elementorRowReadMoreColor").val();$scope.elementor[$scope.elementorCurrentRow].padding={"top":$("#elementorRowPaddingTop").val(),"right":$("#elementorRowPaddingRight").val(),"bottom":$("#elementorRowPaddingBottom").val(),"left":$("#elementorRowPaddingLeft").val()};$scope.elementor[$scope.elementorCurrentRow].margin={"top":$("#elementorRowMarginTop").val(),"right":$("#elementorRowMarginRight").val(),"bottom":$("#elementorRowMarginBottom").val(),"left":$("#elementorRowMarginLeft").val()};$scope.elementor[$scope.elementorCurrentRow].border_radius={"top_right":$("#ElementorRow_radius_top_right").val(),"top_left":$("#ElementorRow_radius_top_left").val(),"bottom_right":$("#ElementorRow_radius_bottom_right").val(),"bottom_left":$("#ElementorRow_radius_bottom_left").val()}};$scope.elementorSetRowReadMore=function(data,text){if($scope.elementorCurrentRow>-1&&$scope.elementorCurrentRow!=null){$scope.elementor[$scope.elementorCurrentRow].read_more_text=text;$scope.elementor[$scope.elementorCurrentRow].read_more=JSON.parse(data)}};$scope.elementorShowMoreReadSetting=function(){$("#button_router_text").val($scope.elementor[$scope.elementorCurrentRow].read_more_text);let data=$scope.elementor[$scope.elementorCurrentRow].read_more;$("#button_router_type_0").val(data.type);$("#button_router_link_0").val(data.link);$("#button_router_router_0").val(data.router);$("#button_router_router_0").html(data.router);button_router_show_settings();$("#buttonRouter").modal('show')};$scope.elementorRemoveRow=function(index){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.remove,message:"<p>"+LANG.removeElementorRow+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){$scope.$apply(function(){let elementor=JSON.parse(JSON.stringify($scope.elementor));elementor.splice(index,1);$scope.elementorSetBuilder(elementor);elementor=null})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})}
$scope.elementorChangeColumn=function(key,value){$scope.elementor[key].column=value;if(value=='12'||value==12){$scope.elementor[key].scrollable=!0}else{$scope.elementor[key].scrollable=!1}
value=Number(value);let newItems=[];$scope.elementorController=[];for(let i=0;i<value;i++){if($scope.elementor[key].items[i]!==undefined){newItems.push($scope.elementor[key].items[i])}else{newItems.push({"element":"","setting":{},"design":""})}}
$scope.elementor[key].items=newItems}
$scope.elementorSetColumnClass=function(value){value=Number(value);if(!isNaN(value)){if(value==12){return'scrollable-col'}
let col=12/value;return'col-md-'+col}
return'col-md-12'}
$scope.elementorArrowUp=function(key){if(key>0){let elementor=JSON.parse(JSON.stringify($scope.elementor));elementor=$scope.array_move(elementor,key,key-1);$scope.elementorSetBuilder(elementor);elementor=null}}
$scope.elementorArrowDown=function(key){if(key<$scope.elementor.length-1){let elementor=JSON.parse(JSON.stringify($scope.elementor));elementor=$scope.array_move(elementor,key,key+1);$scope.elementorSetBuilder(elementor);elementor=null}}
$scope.elementorCopy=function(key){let elementor=JSON.parse(JSON.stringify($scope.elementor));elementor.push($scope.elementor[key]);$scope.elementorSetBuilder(elementor);elementor=null}
$scope.array_move=function(arr,old_index,new_index){if(new_index>=arr.length){var k=new_index-arr.length+1;while(k--){arr.push(undefined)}}
arr.splice(new_index,0,arr.splice(old_index,1)[0]);return arr}
$scope.elementorSaveElementSetting=function(key,index,element,setting){$scope.elementor[key].items[index].setting=setting;$scope.elementorLoading=!0;$timeout(function(){let elementor=JSON.parse(JSON.stringify($scope.elementor));$scope.elementorSetBuilder(elementor);elementor=null},150)}
$scope.elementorSaveElementDesign=function(key,index,element,design){$scope.elementor[key].items[index].design=design
$scope.elementorLoading=!0;$timeout(function(){let elementor=JSON.parse(JSON.stringify($scope.elementor));$scope.elementorSetBuilder(elementor);elementor=null},150)}
$scope.elementorRepeaterTypeChanged=function(obj){var type=$(obj).val();if(type==''||type===undefined||type=='undefined'||type==null){return}
var index=Number($(obj).attr('data-index'));$(obj).attr('data-value',type);var box=$(obj).attr('data-key');$timeout(function(){if(type=='none'||type=="link"||type=="email"||type=="tel"||type=="ussd"){$("#"+box+"_link_"+index).show();$("#"+box+"_router_settings_"+index).hide()}else{$("#"+box+"_link_"+index).hide();$("#"+box+"_router_settings_"+index).show()}},0)};$scope.aiCommand="";$scope.aiDescribe="";$scope.i=0;$scope.txt="";$scope.speed=50;$scope.aiLoading=!1;$scope.aiReset=function(){$scope.aiCommand="";$scope.aiDescribe="";$scope.i=0;$scope.txt="";$scope.speed=50;$scope.aiLoading=!1;$("#aiTxtCopy").hide();$("#aiIconLink").hide();document.getElementById("aptAi").innerHTML=""}
$scope.doAiCommand=function(command,event){let target=event.target||event.srcElement||event.currentTarget;document.getElementById("aptAi").innerHTML=target.innerHTML;$scope.aiCommand=command;document.getElementById("aptAi").innerHTML+="\n";$scope.i=0;if($scope.aiCommand=='image'){$scope.txt="تصویری که در ذهن داری را برای من شرح بده"}else{$scope.txt="لطفا موضوع را برای من شرح بده"}
$scope.aiResponse();$("#aiDescBox").show()};$scope.aiResponse=function(){if($scope.i<$scope.txt.length){document.getElementById("aptAi").innerHTML+=$scope.txt.charAt($scope.i);$scope.i++;$timeout($scope.aiResponse,$scope.speed)}}
$scope.generateAiCommand=function(){if($scope.aiCommand==""){document.getElementById("aptAi").innerHTML+="\n";$scope.i=0;$scope.txt="یک خطایی رخ داده!";$scope.aiResponse();return!1}
if($scope.aiDescribe==""){document.getElementById("aptAi").innerHTML+="\n";$scope.i=0;$scope.txt="باید موضوع را به من بگی تا بتونم کمکت کنم!";$scope.aiResponse();return!1}
document.getElementById("aptAi").innerHTML+="\n"+$scope.aiDescribe;$scope.aiLoading=!0;$http({method:"POST",url:url+"api/panel/ai-command",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:$.param({"command":$scope.aiCommand,"desc":$scope.aiDescribe,"app":$scope.app})}).then(function success(response){$scope.aiLoading=!1;if(response.data.status&&response.data.msg!=""){document.getElementById("aptAi").innerHTML+="\n";$scope.i=0;$scope.txt="لطفا مواردی که برات تهیه کردم را کپی کن یا دانلود کن و بعد داخل اپلیکیشن استفاده کن.";$scope.aiResponse();$("#aiDescBox").hide();if($scope.aiCommand=='content'){$("#aiTxtCopy").html(response.data.msg);$("#aiTxtCopy").val(response.data.msg);$("#aiTxtCopy").show();let link=document.createElement('a');link.href="data:text/plain;charset=UTF-8,"+response.data.msg;link.target="_blank";link.download='apt_ai_text.txt';document.body.appendChild(link);link.click();document.body.removeChild(link)}else{$("#aiIconLink").val(response.data.msg);$("#aiIconLink").show();download(response.data.base64,"apt_ai_image.png")}}else{showMsg(response.data.msg,LANG.wrong_title,"error");document.getElementById("aptAi").innerHTML+="\n";$scope.i=0;$scope.txt=response.data.msg;$scope.aiResponse()}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");$scope.aiLoading=!1})}});CmsApp.controller('TeamCtrl',function($scope,$http,$timeout,$window){$scope.team={"email":"","password":"","filemanager":"self","hard_path":"","role":6,"host":0,"apps":{},};$scope.lastHost=0;$scope.page=1;$scope.search="";$scope.selected_apps=[];$scope.users=[];$scope.pagination={};$scope.editMode=!1;$scope.teamId='';$scope.init=function(){$(".select2").select2({language:LANG.lang,dir:LANG.direction})};$scope.setEdit=function(){var val=[];for(var id in current_team_permissions){val.push(id)}
$scope.editMode=!0;$timeout(function(){$('#permissionSelector').val(val);$('#permissionSelector').trigger('change');$('.tooltip').remove()},500)};$scope.changeTeamPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getTeam()};$scope.nextPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeTeamPage(page)};$scope.prevPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeTeamPage(page)};$scope.searchTeam=function(){$scope.page=1;$scope.getTeam()};$scope.cancelSearch=function(){$scope.search="";$scope.page=1;$scope.getTeam()};$scope.getTeam=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,"search":$scope.search,});$http({method:"POST",url:url+"api/panel/myTeam",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.users=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.apps_changed=function(){for(var app_id in $scope.team.apps){if(!in_array(app_id,$scope.selected_apps)){delete $scope.team.apps[app_id]}}
for(var i in $scope.selected_apps){var id=$scope.selected_apps[i];if(typeof $scope.team.apps[id]=="undefined"){if($scope.editMode){if(typeof current_team_permissions[id]!="undefined"){$scope.team.apps[id]=current_team_permissions[id];$scope.permissionTypeChange(id);continue}}
var $options=$("#app_"+id);$scope.team.apps[id]={"title":$options.attr("data-name"),"icon":$options.attr("data-icon"),"permission_type":"editor","permission_pages":{},"pages":{},}}}
$scope.editMode=!1};$scope.app_list_init=function(){$('[data-toggle="popoverWebUi"]').webuiPopover()};$scope.app_list_page_init=function(){$(".page_select2").select2({language:LANG.lang,dir:LANG.direction})};$scope.permissionTypeChange=function(app_id){if($scope.team.apps[app_id].permission_type=="operator"){blockUi();var data=$.param({app_id:app_id});$http({method:"POST",url:url+"api/panel/getModulePermissionPages",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.length<=0){$scope.team.apps[app_id].pages={}}else{$scope.team.apps[app_id].pages=response.data}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}else{$scope.team.apps[app_id].pages={}}};$scope.change_is_block=function(is_block,id,index){bootbox.dialog({className:"modal-fade-in-scale-up",title:is_block==0?LANG.change_block:LANG.change_unblock,message:is_block==0?"<p>"+LANG.change_block_txt+"</p>":"<p>"+LANG.change_unblock_txt+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:id,is_block:is_block});$http({method:"POST",url:url+"api/panel/changeBlockTeam",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$timeout(function(){var new_is_block=0;if(is_block==0)new_is_block=1;$scope.users[index].is_block=new_is_block},100)}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.remove_team=function(id){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.remove_user_title,message:LANG.remove_user_txt,buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:id,});$http({method:"POST",url:url+"api/panel/removeTeam",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$scope.page=1;$scope.search="";$scope.getTeam()}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.saveTeam=function(){if($scope.team.email==""||$scope.team.password==""||Object.keys($scope.team.apps).length==0||$scope.team.filemanager==''){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
if($scope.team.password.length<8){showMsg(LANG.password_error_length,LANG.wrong_title,"warning");return!1}
if(!validateEmail($scope.team.email)){showMsg(LANG.email_error,LANG.wrong_title,"warning");return!1}
var apps=$scope.team.apps;for(var app_id in apps){delete apps[app_id].title;delete apps[app_id].icon;delete apps[app_id].pages}
blockUi();var data=$.param({email:$scope.team.email,password:$scope.team.password,filemanager:$scope.team.filemanager,hard_path:$scope.team.hard_path,role:$scope.team.role,host:$scope.team.host,apps:apps});$http({method:"POST",url:url+"api/panel/saveTeam",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$scope.team={"email":"","password":"","role":6,"host":0,"apps":{},};$timeout(function(){$('#permissionSelector').val([]);$('#permissionSelector').trigger('change');$scope.cancelSearch()},1000)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.editTeam=function(){if($scope.teamId=='')return!1;if($scope.team.filemanager==''){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
if(Object.keys($scope.team.apps).length==0){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
if($scope.team.password!=""&&$scope.team.password.length<8){showMsg(LANG.password_error_length,LANG.wrong_title,"warning");return!1}
if($scope.team.host<$scope.lastHost){showMsg(LANG.host_error_txt,LANG.wrong_title,"warning");return!1}
var apps=JSON.parse(JSON.stringify($scope.team.apps));for(var app_id in apps){delete apps[app_id].title;delete apps[app_id].icon;delete apps[app_id].pages;apps[app_id].permission_pages={};for(var i in $scope.team.apps[app_id].permission_pages){apps[app_id].permission_pages[i]=$scope.team.apps[app_id].permission_pages[i]}}
blockUi();var data=$.param({id:$scope.teamId,password:$scope.team.password,filemanager:$scope.team.filemanager,hard_path:$scope.team.hard_path,role:$scope.team.role,host:$scope.team.host,apps:apps});$http({method:"POST",url:url+"api/panel/editTeam",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success")}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}});CmsApp.controller('ProfileCtrl',function($scope,$http,$timeout,$window){$scope.user={"email":"","password":"","mobile":"","profile_image":""};$scope.active_email=0;$scope.is_mobile_active=0;$scope.timer=null;$scope.canClose=!1;$scope.extraModuleType='';$scope.extraModuleDir='';$scope.extraModuleName='';$scope.extraModuleApps=[];$scope.extraModuleAppsEdit=[];$scope.extraModuleEditId='';$scope.extraModuleEditWebhook='';$scope.setExtraModuleAppsEdit=function(apps,id){$scope.extraModuleAppsEdit=JSON.parse(Base64.decode(apps));$scope.extraModuleEditId=id}
$scope.setWebhookData=function(id,webhook){$scope.extraModuleEditId=id;$scope.extraModuleEditWebhook=webhook}
$scope.removeExtraApp=function(index){$scope.extraModuleApps.splice(index,1)}
$scope.removeExtraAppEdit=function(index){$scope.extraModuleAppsEdit.splice(index,1)}
$scope.editExtraModuleApps=function(){blockUi();$http({method:"POST",url:url+"api/panel/developer-edit-module-apps",headers:{'Content-Type':'application/json'},data:{"id":$scope.extraModuleEditId,'apps':$scope.extraModuleAppsEdit}}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");document.location.reload()}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.saveExtraModule=function(){if($scope.extraModuleType==''||$scope.extraModuleDir==''||$scope.extraModuleName==''){showMsg(LANG.global_error,LANG.wrong_title,"error");return!1}
blockUi();$http({method:"POST",url:url+"api/panel/developer-add-module",headers:{'Content-Type':'application/json'},data:{"type":$scope.extraModuleType,"dir":$scope.extraModuleDir,"name":$scope.extraModuleName,'apps':$scope.extraModuleApps}}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");document.location.reload()}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.editExtraModuleWebhook=function(){blockUi();$http({method:"POST",url:url+"api/panel/developer-edit-module-webhook",headers:{'Content-Type':'application/json'},data:{"id":$scope.extraModuleEditId,'webhook':$scope.extraModuleEditWebhook}}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success")}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.media=function(){$(".media-profile-selector").on("show.bs.modal",function(e){var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}});$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover();$('[data-toggle="popoverWebUi"]').webuiPopover()};$scope.saveProfile=function(){if($scope.user.password!=""&&$scope.user.password.length<8){showMsg(LANG.password_error_length,LANG.wrong_title,"warning");return!1}
$scope.user.profile_image=$("#profile_image").val();var media_manager={"profile_image":$scope.user.profile_image};blockUi();var data=$.param({password:$scope.user.password,profile_image:$scope.user.profile_image,media_manager:media_manager,});$http({method:"POST",url:url+"api/panel/editProfile",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");if($scope.user.profile_image==""){$("#sidebar_profile_image").attr('src',$("#sidebar_profile_image").attr('data-default'))}else{$("#sidebar_profile_image").attr('src',url+$scope.user.profile_image)}}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.startTimer=function(duration,display){var timer=duration,minutes,seconds;$scope.timer=setInterval(function(){minutes=parseInt(timer/60,10);seconds=parseInt(timer%60,10);minutes=minutes<10?"0"+minutes:minutes;seconds=seconds<10?"0"+seconds:seconds;display.text(minutes+":"+seconds);if(--timer<0){timer=duration;$(".btn-default.disabled").removeClass('disabled');$scope.canClose=!0;clearInterval($scope.timer)}},1000)};$scope.send_active_code=function(){if($scope.is_mobile_active==1)return!1;if(isNaN($scope.user.mobile)||$scope.user.mobile==""){showMsg(LANG.mobile_wrong,LANG.wrong_title,"warning");return!1}
if(!$scope.user.mobile.startsWith("0")){showMsg(LANG.mobile_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({mobile:$scope.user.mobile});$http({method:"POST",url:url+"api/panel/send-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");var box=bootbox.dialog({closeButton:!1,message:"<p class='text-justify'>"+LANG.active_code_txt+"</p><input type='text' class='form-control form-control-sm' id='verfication_code'><small id='timer'>02:00</small>",size:'small',buttons:{cancel:{label:LANG.cancel,className:'btn-default disabled',callback:function(){if(!$scope.canClose){return!1}}},ok:{label:LANG.send_code,className:'btn-primary',callback:function(){var code=$("#verfication_code").val();if(code==""||isNaN(code)||code.length<6){return!1}
blockUi('.bootbox');var data=$.param({code:code,});$http({method:"POST",url:url+"api/panel/check-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi('.bootbox');if(response.data.status){showMsg(response.data.msg,LANG.success,"success");box.modal('hide');$timeout(function(){$scope.is_mobile_active=1},10)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi('.bootbox')});return!1}}}});var display=$('#timer');var time=2*60;$scope.startTimer(time,display)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.send_active_email_code=function(){if($scope.active_email==1)return!1;if($scope.user.email==""||!validateEmail($scope.user.email)){showMsg(LANG.email_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({email:$scope.user.email});$http({method:"POST",url:url+"api/panel/send-active-email-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");var box=bootbox.dialog({closeButton:!1,message:"<p class='text-justify'>"+LANG.active_code_txt_email+"</p><input type='text' class='form-control form-control-sm' id='verfication_email_code'><small id='timer_email'>02:00</small>",size:'small',buttons:{cancel:{label:LANG.cancel,className:'btn-default disabled',callback:function(){if(!$scope.canClose){return!1}}},ok:{label:LANG.send_code,className:'btn-primary',callback:function(){var code=$("#verfication_email_code").val();if(code==""||isNaN(code)||code.length<6){return!1}
blockUi('.bootbox');var data=$.param({code:code,});$http({method:"POST",url:url+"api/panel/check-active-email-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi('.bootbox');if(response.data.status){showMsg(response.data.msg,LANG.success,"success");box.modal('hide');$timeout(function(){$scope.active_email=1},10)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi('.bootbox')});return!1}}}});var display=$('#timer_email');var time=2*60;$scope.startTimer(time,display)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}});CmsApp.controller('SupportCtrl',function($scope,$http,$timeout,$location){$scope.ticket={"id":"","department":"technical","priority":"normal","subject":"","content":"","ticket_attachment":"",};$scope.sl="";$scope.tickets=[];$scope.referral=[];$scope.reference=[];$scope.selected_common_answers='';$scope.page=1;$scope.pagination={};$scope.filters={"user_id":"","search":"","department":"","priority":"","status":"",};$scope.force_status='';$scope.doFilters=function(){$scope.page=1;$scope.getTickets()};$scope.changeTicketPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getTickets()};$scope.nextPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeTicketPage(page)};$scope.prevPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeTicketPage(page)};$scope.init=function(){$timeout(function(){$('#profiles-thread').select2({language:LANG.lang,dir:LANG.direction,minimumInputLength:5,ajax:{url:url+'admin/get-ticket-users',dataType:'json',},allowClear:!0,placeholder:"Enter mobile or email",});$(".select2-selection__clear").click(function(){$("#profiles-thread").select2().select2("val","");$scope.filters.user_id=""})},1000);$("#profiles-thread").change(function(){$scope.filters.user_id=$(this).val()});$(".media-profile-selector").on("show.bs.modal",function(e){var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}});$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover();$('[data-toggle="popoverWebUi"]').webuiPopover()};$scope.addTicket=function(){if($scope.ticket.subject==""||$scope.ticket.content==""||$scope.ticket.department==""||$scope.ticket.priority==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
$scope.ticket.ticket_attachment=$("#ticket_attachment").val();blockUi();var data=$.param({department:$scope.ticket.department,priority:$scope.ticket.priority,subject:$scope.ticket.subject,content:$scope.ticket.content,ticket_attachment:$scope.ticket.ticket_attachment,});$http({method:"POST",url:url+"api/panel/addTicket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$location.path("/ticket/"+response.data.id)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.replyTicket=function(){if($scope.ticket.id=="")return!1;if($scope.ticket.content==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
$scope.ticket.ticket_attachment=$("#ticket_attachment").val();blockUi();var data=$.param({id:$scope.ticket.id,content:$scope.ticket.content,ticket_attachment:$scope.ticket.ticket_attachment,});$http({method:"POST",url:url+"api/panel/replyTicket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$location.path("/ticket/"+$scope.ticket.id+"/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.closeTicket=function(){if($scope.ticket.id=="")return!1;bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.close_ticket_title,message:LANG.close_ticket_txt,buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:$scope.ticket.id,});$http({method:"POST",url:url+"api/panel/closeTicket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");if(response.data.ask_questions){window.location.href=url+"ticket-survey/"+$scope.sl}else{$location.path("/support")}}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.forceStatus=function(){if($scope.ticket.id==""||$scope.force_status=='')return!1;bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.force_ticket_title,message:LANG.force_ticket_txt,buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:$scope.ticket.id,status:$scope.force_status,});$http({method:"POST",url:url+"api/panel/change-status-ticket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$location.path("/ticket/"+$scope.ticket.id+"/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.getTickets=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,"filters":$scope.filters,});$http({method:"POST",url:url+"api/panel/tickets",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.tickets=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.common_answers=function(){$scope.ticket.content=$scope.selected_common_answers};$scope.referralTicket=function(id,lastDepartment){if(id==0)return!1;if($scope.referral.department==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({"id":id,"department":$scope.referral.department,"lastDepartment":lastDepartment,});$http({method:"POST",url:url+"api/panel/referral-ticket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success")}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}
$scope.referenceTicket=function(ticket){if(ticket._id==0)return!1;if(ticket.change_department==""||ticket.real_department==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({"id":ticket._id,"department":ticket.change_department,"lastDepartment":ticket.real_department,});$http({method:"POST",url:url+"api/panel/referral-ticket",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$scope.getTickets()}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}});CmsApp.controller('PurchaseCtrl',function($scope,$http,$timeout,$location){$scope.is_mobile_active="";$scope.activeMobile='';$scope.timer=null;$scope.canClose=!1;$scope.show_price=0;$scope.coupon="";$scope.coupon_used=!1;$scope.product="";$scope.sl="";$scope.request={"title":"","category":"","short_description":"","full_description":"","icon":"","feature_img":"","website":"","email":"","phone":"","screenshots":[],};$scope.ios_request={"description":""};$scope.google_play_count=0;$scope.ios_request_count=0;$scope.bills=[];$scope.page=1;$scope.pagination={};$scope.filters={"user_id":"","app_id":"","status":"",};$scope.factor={};$scope.billInit=function(){$timeout(function(){$('#profiles-thread').select2({language:LANG.lang,dir:LANG.direction,minimumInputLength:5,ajax:{url:url+'admin/get-ticket-users',dataType:'json',},allowClear:!0,placeholder:"Enter mobile or email",});$(".select2-selection__clear").click(function(){$("#profiles-thread").select2().select2("val","");$scope.filters.user_id=""});$("#bills-product").select2({language:LANG.lang,dir:LANG.direction})},1000);$("#profiles-thread").change(function(){$scope.filters.user_id=$(this).val()});$("#bills-product").change(function(){$scope.filters.app_id=$(this).val()});$scope.getBills()};$scope.doFilters=function(){$scope.page=1;$scope.getBills()};$scope.getBills=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,"filters":$scope.filters,});$http({method:"POST",url:url+"api/panel/get-bills",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.bills=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.changeBillsPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getBills()};$scope.nextPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeBillsPage(page)};$scope.prevPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeBillsPage(page)};$scope.addFactor=function(){for(var i in $scope.factor){if($scope.factor[i]===""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}}
if($scope.filters.user_id==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({user_id:$scope.filters.user_id,factor:$scope.factor});$http({method:"POST",url:url+"admin/add-factor",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$(".select2-selection__clear").click();$scope.page=1;$scope.filters={"user_id":"","app_id":"","status":"",};$scope.getBills()}else{showMsg(LANG.global_error,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.update_ios=function(){if($scope.ios_request_count>0){blockUi();var data=$.param({sl:$scope.sl,type:"update-ios",request_info:$scope.ios_request});$http({method:"POST",url:url+"api/panel/add-appeal",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$location.path("/update-ios/"+$scope.sl+"/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}};$scope.google_play=function(){if($scope.google_play_count>0){$scope.request.icon=$("#icon_img").val();$scope.request.feature_img=$("#feature_img").val();for(var s=0;s<8;s++){if($("#screenshots"+s).val()!=""){$scope.request.screenshots.push($("#screenshots"+s).val())}}
var fields=!1;for(var i in $scope.request){if(i=="phone"||i=="feature_img"){continue}
if(i=="screenshots"&&$scope.request[i].length<2){fields=!0;break}else{if($scope.request[i]==""){fields=!0;break}}}
if(fields){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({sl:$scope.sl,type:"google-play",request_info:$scope.request});$http({method:"POST",url:url+"api/panel/add-appeal",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$location.path("/google-play/"+$scope.sl+"/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}};$scope.media=function(){$(".media-profile-selector").on("show.bs.modal",function(e){var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}});$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover();$('[data-toggle="popoverWebUi"]').webuiPopover()};$scope.payment=function(){if(Number($scope.is_mobile_active)!=1){my_alert(LANG.active_your_mobile);return!1}
var gateway=$('input[name=gateway]:checked').val();blockUi();var data=$.param({"sl":$scope.sl,"coupon":$scope.coupon,"product":$scope.product,"gateway":gateway,});$http({method:"POST",url:url+"api/panel/go-to-bank",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");window.location=response.data.link}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.startTimer=function(duration,display){var timer=duration,minutes,seconds;$scope.timer=setInterval(function(){minutes=parseInt(timer/60,10);seconds=parseInt(timer%60,10);minutes=minutes<10?"0"+minutes:minutes;seconds=seconds<10?"0"+seconds:seconds;display.text(minutes+":"+seconds);if(--timer<0){timer=duration;$(".btn-default.disabled").removeClass('disabled');$scope.canClose=!0;clearInterval($scope.timer)}},1000)};$scope.checkCoupon=function(){if(!$scope.coupon_used){if($scope.coupon==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({coupon:$scope.coupon,product:$scope.product,show_price:$scope.show_price});$http({method:"POST",url:url+"api/panel/check-coupon-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$scope.coupon_used=!0;$timeout(function(){$scope.show_price=response.data.new_price},10)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}};$scope.send_active_code=function(){if($scope.is_mobile_active==1)return!1;if(isNaN($scope.activeMobile)||$scope.activeMobile==""){showMsg(LANG.mobile_wrong,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({mobile:$scope.activeMobile});$http({method:"POST",url:url+"api/panel/send-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");var box=bootbox.dialog({closeButton:!1,message:"<p class='text-justify'>"+LANG.active_code_txt+"</p><input type='text' class='form-control form-control-sm' id='verfication_code'><small id='timer'>02:00</small>",size:'small',buttons:{cancel:{label:LANG.cancel,className:'btn-default disabled',callback:function(){if(!$scope.canClose){return!1}}},ok:{label:LANG.send_code,className:'btn-primary',callback:function(){var code=$("#verfication_code").val();if(code==""||isNaN(code)||code.length<6){return!1}
blockUi('.bootbox');var data=$.param({code:code,});$http({method:"POST",url:url+"api/panel/check-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi('.bootbox');if(response.data.status){showMsg(response.data.msg,LANG.success,"success");box.modal('hide');$timeout(function(){$scope.is_mobile_active=1},10)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi('.bootbox')});return!1}}}});var display=$('#timer');var time=2*60;$scope.startTimer(time,display)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.backup=function(app){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.backup,message:"<p>"+LANG.backupDesc+"</p>",buttons:{ok:{label:LANG.backup,className:'btn-purple',callback:function(){document.location.href=url+"api/panel/app-backup/"+app}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})}});CmsApp.controller('AppealCtrl',function($scope,$http,$location,$timeout){$scope.is_mobile_active=0;$scope.request={"name":"","family":"","meliCode":"","domain":"","cardMeli":"",};$scope.representative={"title":"","site":"","support":"","google":"","image":"",};$scope.media=function(){$(".media-profile-selector").on("show.bs.modal",function(e){var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}});$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip();$('[data-toggle="popover"]').popover();$('[data-toggle="popoverWebUi"]').webuiPopover()};$scope.init=function(){$('.dropify').dropify({messages:{'default':LANG.meli_card,'replace':LANG.meli_card,'remove':LANG.remove,'error':LANG.global_error}});$("#cardMeli").change(function(event){$scope.request.cardMeli=event.target.files[0]})};$scope.send_active_code=function(){if($scope.is_mobile_active==1)return!1;if(isNaN($scope.activeMobile)||$scope.activeMobile==""){showMsg(LANG.mobile_wrong,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({mobile:$scope.activeMobile});$http({method:"POST",url:url+"api/panel/send-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");var box=bootbox.dialog({closeButton:!1,message:"<p class='text-justify'>"+LANG.active_code_txt+"</p><input type='text' class='form-control form-control-sm' id='verfication_code'><small id='timer'>02:00</small>",size:'small',buttons:{cancel:{label:LANG.cancel,className:'btn-default disabled',callback:function(){if(!$scope.canClose){return!1}}},ok:{label:LANG.send_code,className:'btn-primary',callback:function(){var code=$("#verfication_code").val();if(code==""||isNaN(code)||code.length<6){return!1}
blockUi('.bootbox');var data=$.param({code:code,});$http({method:"POST",url:url+"api/panel/check-active-code",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi('.bootbox');if(response.data.status){showMsg(response.data.msg,LANG.success,"success");box.modal('hide');$timeout(function(){$scope.is_mobile_active=1},10)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi('.bootbox')});return!1}}}});var display=$('#timer');var time=2*60;$scope.startTimer(time,display)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.startTimer=function(duration,display){var timer=duration,minutes,seconds;$scope.timer=setInterval(function(){minutes=parseInt(timer/60,10);seconds=parseInt(timer%60,10);minutes=minutes<10?"0"+minutes:minutes;seconds=seconds<10?"0"+seconds:seconds;display.text(minutes+":"+seconds);if(--timer<0){timer=duration;$(".btn-default.disabled").removeClass('disabled');$scope.canClose=!0;clearInterval($scope.timer)}},1000)};$scope.representative=function(){if($scope.is_mobile_active==1){var form_data=new FormData();for(var i in $scope.request){if($scope.request[i]==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
form_data.append(i,$scope.request[i])}
form_data.append("type","representative");blockUi();$http({method:"POST",url:url+"api/panel/add-appeal",headers:{'Content-Type':undefined},data:form_data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success");$location.path("/representative/?r="+Math.random())}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}};$scope.update_representative=function(){$scope.representative.image=$("#representative_image").val();for(var i in $scope.representative){if(i=="google")continue;if($scope.representative[i]==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}}
var media_manager={"representative_image":$scope.representative.image};blockUi();var data=$.param({title:$scope.representative.title,site:$scope.representative.site,support:$scope.representative.support,google:$scope.representative.google,image:$scope.representative.image,media_manager:media_manager,});$http({method:"POST",url:url+"api/panel/edit-representative",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,LANG.success,"success")}else{showMsg(LANG.global_error,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.serviceInit=function(){saveForm("serviceForm","serviceFormSaveBtn","onServiceSaved","serviceBeforeSubmit");$(".media-modal-lg").on("show.bs.modal",function(e){var link=$(e.relatedTarget);if(link.length<=0){link=$(this).attr('data-load-it');if(link!=""){$(this).find(".modal-body").load(link)}}else{$(this).find(".modal-body").load(link.attr("data-media"))}})}});CmsApp.controller('ExportCtrl',function($scope,$http,$location){$scope.package_name='';$scope.version_code='1.0.0';$scope.version_number=1;$scope.last_version_number=1;$scope.android_file_type='apk';$scope.pwa_site_url='';$scope.type='android';$scope.app='';$scope.currentStep=1;$scope.zip_files='waiting';$scope.last_package_name='';$scope.steps={1:{"status":"waiting","title":LANG.resource_ready},2:{"status":"waiting","title":LANG.send_data},3:{"status":"waiting","title":LANG.icon_generate},4:{"status":"waiting","title":LANG.keystore_generate},5:{"status":"waiting","title":LANG.ready_modules},6:{"status":"waiting","title":LANG.generate_file},};$scope.last_files=[];$scope.show_last=!1;$scope.errors=[];$scope.regenerate_steps=null;$scope.setLastFiles=function(last){if(last!=""){if($scope.type=='android'){for(var i in last){if(i.indexOf("android_")>-1){var arr=i.split("_");var val=arr[arr.length-1];if(val=='armeabi'||val=='arm64'||val=='x86'){$scope.last_files.push('armeabi');$scope.last_files.push('arm64');$scope.last_files.push('x86')}else{$scope.last_files.push(arr[arr.length-1])}}}}else{for(var i in last){if(i.indexOf("pwa_")>-1){var arr=i.split("_")
$scope.last_files.push(arr[arr.length-1])}}}}};$scope.generate=function(){if($scope.regenerate_steps==null){$scope.regenerate_steps=JSON.parse(JSON.stringify($scope.steps))}else{$scope.steps=JSON.parse(JSON.stringify($scope.regenerate_steps))}
if($scope.type=='')return!1;if($scope.type=='android'){if($scope.last_package_name!=''&&$scope.last_package_name!=$scope.package_name){my_alert(LANG.package_error);return!1}
var pattern=/^[a-z][a-z0-9_]*(\.[a-z0-9_]+)+[0-9a-z_]$/i;if(!pattern.test($scope.package_name)){my_alert(LANG.package_name_error);return!1}
if($scope.version_number==''||$scope.version_number<=0){my_alert(LANG.version_number_error);return!1}
pattern=/^[0-9_]*(\.[0-9.]+)+[0-9]$/i;if($scope.version_code==''||!$scope.version_code.match(pattern)){my_alert(LANG.version_code_error);return!1}
if($scope.last_version_number==$scope.version_number){$scope.version_number++}}else{$scope.version_number++}
$("#generateFileModal").modal('show');$scope.errors=[];$scope.callSteps()}
$scope.lastFile=function(){if(!in_array($scope.android_file_type,$scope.last_files)){showMsg(LANG.last_dl_error,LANG.wrong_title,"warning");return!1}else{document.location.href=url+"api/panel/download-exported-file/"+$scope.type+"/"+$scope.android_file_type+"/"+$scope.app;return!1}};$scope.downloadKeystore=function(){document.location.href=url+"api/panel/download-keystore-file/"+$scope.app;return!1};$scope.replaceKeystore=function(){var app_keystore=$("#app_keystore").val();var keystore_alias=$("#keystore_alias").val();var keystore_alias_password=$("#keystore_alias_password").val();var keystore_password=$("#keystore_password").val();if(app_keystore==''||keystore_alias==''||keystore_alias_password==''||keystore_password==''){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.keystore_replace,message:"<p>"+LANG.keystore_replace_accept+"</p>",buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){var data=$.param({app_keystore:app_keystore,keystore_alias:keystore_alias,keystore_alias_password:keystore_alias_password,keystore_password:keystore_password,});blockUi();$http({method:"POST",url:url+"api/panel/replace-keystore-file/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(response.data.msg,"","success")}else{showMsg(response.data.msg,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.callSteps=function(){if(typeof $scope.steps[$scope.currentStep]=="undefined"){document.location.href=url+"api/panel/download-exported-file/"+$scope.type+"/"+$scope.android_file_type+"/"+$scope.app;$("#generateFileModal").modal('hide');$scope.currentStep=1;$scope.last_version_number=$scope.version_number;$scope.last_package_name=$scope.package_name;$scope.last_files.push($scope.android_file_type);if($scope.android_file_type=='armeabi'||$scope.android_file_type=='arm64'||$scope.android_file_type=='x86'){$scope.last_files.push('armeabi');$scope.last_files.push('arm64');$scope.last_files.push('x86')}
if($scope.type=='android'){$("#show_app_version").html($scope.version_code)}
showMsg(LANG.success_msg,"","success");return!0}
$scope.steps[$scope.currentStep].status='start';var data=$.param({"package_name":$scope.package_name,"version_code":$scope.version_code,"version_number":$scope.version_number,"android_file_type":$scope.android_file_type,"pwa_site_url":$scope.pwa_site_url});$http({method:"POST",url:url+"api/panel/export-file/"+$scope.currentStep+"/"+$scope.type+"/"+$scope.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){if(response.data.status){$scope.steps[$scope.currentStep].status='done';$scope.currentStep++;$scope.callSteps()}else{$scope.steps[$scope.currentStep].status='error';$scope.currentStep=1;var errors=response.data.errors;for(var i in errors){if(errors[i]==null){$scope.errors.push({"title":LANG.wrong_title,"msg":LANG.unknown_error})}else if(typeof errors[i].code!="undefined"){$scope.errors.push({"title":LANG.wrong_title,"msg":LANG.code_error+" "+errors[i].code})}else if(typeof errors[i].title!="undefined"){$scope.errors.push({"title":errors[i].title,"msg":errors[i].message})}else{$scope.errors.push({"title":LANG.wrong_title,"msg":LANG.unknown_error})}}}},function error(response){$scope.errors.push({"title":LANG.global_error,"msg":LANG.wrong_title});if(typeof $scope.steps[$scope.currentStep]!="undefined"){$scope.steps[$scope.currentStep].status='error';$scope.currentStep=1}
showMsg(LANG.global_error,LANG.wrong_title,"error")})}});CmsApp.controller('MessagesCtrl',function($scope,$http,$timeout,$window){$scope.page=1;$scope.usermessages=[];$scope.getUserMessages=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,});$http({method:"POST",url:url+"api/panel/get-usermessages",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.usermessages=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.changeUserMessagesPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getUserMessages()};$scope.nextUserMessagePage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeUserMessagesPage(page)};$scope.prevUserMessagePage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeUserMessagesPage(page)}});CmsApp.controller('CrmCtrl',function($scope,$http,$timeout,$window){$scope.info=[];$scope.page=1;$scope.pagination=[];$scope.endDate='';$scope.startDate='';$scope.order=[];$scope.filters=[];$('.datepicker').persianDatepicker({observer:!0,format:'YYYY/MM/DD',autoClose:!0});$scope.filtersNps=function(){$scope.endDate=($("#toDateNps").val());$scope.startDate=($("#fromDateNps").val());$scope.getNps()};$scope.getNps=function(){blockUi();var data=$.param({"startDate":$scope.startDate,"endDate":$scope.endDate,});$http({method:"POST",url:url+"admin/get-nps",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(!response.data.status){$("#morrisBarNps").html('');$("#morrisDonutNps").html('');return!1}
$scope.nps=response.data.data;$scope.count=response.data.count;$scope.bad_speakers=$scope.nps["0"]+$scope.nps["1"]+$scope.nps["2"]+$scope.nps["3"]+$scope.nps["4"]+$scope.nps["5"]+$scope.nps["6"];$scope.neutral=$scope.nps["7"]+$scope.nps["8"];$scope.interested=$scope.nps["9"]+$scope.nps["10"];$scope.loyalty=(($scope.interested/$scope.count)*100)-(($scope.bad_speakers/$scope.count)*100);$timeout(function(){$("#morrisBarNps").html('');(function(){Morris.Bar({element:'morrisBarNps',data:[{y:'0',a:$scope.nps["0"],},{y:'1',a:$scope.nps["1"],},{y:'2',a:$scope.nps["2"],},{y:'3',a:$scope.nps["3"],},{y:'4',a:$scope.nps["4"],},{y:'5',a:$scope.nps["5"],},{y:'6',a:$scope.nps["6"],},{y:'7',a:$scope.nps["7"],},{y:'8',a:$scope.nps["8"],},{y:'9',a:$scope.nps["9"]},{y:'10',a:$scope.nps["10"],},],xkey:'y',ykeys:['a'],labels:['Series A','Series B'],barGap:6,barSizeRatio:0.45,smooth:!0,gridTextColor:'#474e54',gridLineColor:'#eef0f2',goalLineColors:'#e3e6ea',gridTextFamily:Config.get('fontFamily'),gridTextWeight:'300',numLines:6,gridtextSize:14,resize:!0,barColors:[Config.colors("grey",400)]})})()},2000);$timeout(function(){$("#morrisDonutNps").html('');Morris.Donut({element:'morrisDonutNps',data:[{label:LANG.bad_speakers,value:$scope.bad_speakers,color:'#f19292'},{label:LANG.interested,value:$scope.interested,color:'#35d0ba'},{label:LANG.neutral,value:$scope.neutral,color:'#9E9E9E'}],resize:!0,})},2000);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.getNpsComment=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,});$http({method:"POST",url:url+"admin/get-nps-comment",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.info=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.pursuit=function(id,type){$(".blocker").fadeIn();var description=$("#description_"+id).val();var reason=$("#reason_"+id).val();var confirm=0;if($("#confirm_"+id).is(':checked')){confirm=1}
if(type=='description'&&description==''){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
var data=$.param({"confirm":confirm,"description":description,"id":id,"type":type,"reason":reason,});console.log($scope.reason);$http({method:"POST",url:url+"admin/pursuit",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success")}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.filtersCes=function(){$scope.endDate=($("#toDateCes").val());$scope.startDate=($("#fromDateCes").val());$scope.getCes()};$scope.getCes=function(){blockUi();var data=$.param({"startDate":$scope.startDate,"endDate":$scope.endDate,});$http({method:"POST",url:url+"admin/get-ces",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(!response.data.status){$("#morrisBarCes").html('');$("#morrisDonutCes").html('');return!1}
$scope.ces=response.data.data;$scope.count=response.data.count;if($scope.count!="0"){$scope.effort=($scope.ces["1"]+$scope.ces["2"]+$scope.ces["3"]+$scope.ces["4"])/$scope.count*100}else{$scope.effort=0}
$timeout(function(){$("#morrisBarCes").html('');(function(){Morris.Bar({element:'morrisBarCes',data:[{y:'1',a:$scope.ces["1"],},{y:'2',a:$scope.ces["2"],},{y:'3',a:$scope.ces["3"],},{y:'4',a:$scope.ces["4"],},{y:'5',a:$scope.ces["5"],},{y:'6',a:$scope.ces["6"],},{y:'7',a:$scope.ces["7"],},],xkey:'y',ykeys:['a'],labels:['Series A','Series B'],barGap:6,barSizeRatio:0.45,smooth:!0,gridTextColor:'#474e54',gridLineColor:'#eef0f2',goalLineColors:'#e3e6ea',gridTextFamily:Config.get('fontFamily'),gridTextWeight:'300',numLines:6,gridtextSize:14,resize:!0,barColors:[Config.colors("grey",400)]})})()},2000);$timeout(function(){$("#morrisDonutCes").html('');$scope.less=$scope.ces["1"]+$scope.ces["2"]+$scope.ces["3"]+$scope.ces["4"];$scope.more=$scope.ces["5"]+$scope.ces["6"]+$scope.ces["7"];Morris.Donut({element:'morrisDonutCes',data:[{label:LANG.less_than_5,value:$scope.less,},{label:LANG.more_than_5,value:$scope.more,}],resize:!0,colors:[Config.colors("grey",500),Config.colors("yellow",400)]})},2000);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.changeNpsPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getNpsComment()};$scope.nextNpsPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeNpsPage(page)};$scope.prevNpsPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeNpsPage(page)}});CmsApp.controller('CommonAnswersCtrl',function($scope,$http,$timeout,$window){$scope.page=1;$scope.pagination={};$scope.answer={};$scope.answers=[];$scope.selected_common_answers=[];$scope.addAnswers=function(){if($scope.answer.context==""||$scope.answer.title==""||$scope.answer.language==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({"context":$scope.answer.context,"language":$scope.answer.language,"title":$scope.answer.title,});$http({method:"POST",url:url+"admin/add-answers",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$timeout(function(){$scope.answer={"context":"","language":"fa-IR","title":"",};$scope.page=1;$scope.getAnswers()},500)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.getAnswers=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,});$http({method:"POST",url:url+"admin/get-answers",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.answers=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.changeAnswersPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getAnswers()};$scope.nextAnswersPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeAnswersPage(page)};$scope.prevAnswersPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeAnswersPage(page)};$scope.removeAnswers=function(id){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.remove_answer_title,message:LANG.remove_answer_txt,buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:id,});$http({method:"POST",url:url+"admin/remove-answers",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$scope.page=1;$scope.getAnswers()}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.editAnswers=function(){if($scope.id=="")return!1;if($scope.answer.context==""||$scope.answer.title==""||$scope.answer.language==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({"id":$scope.id,"context":$scope.answer.context,"language":$scope.answer.language,"title":$scope.answer.title,});$http({method:"POST",url:url+"admin/edit-answers",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success")}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}});CmsApp.controller('CampaignCtrl',function($scope,$http,$timeout,$window){$scope.endDate='';$scope.startDate='';$scope.startDateFilter='';$scope.endDateFilter='';$scope.campaign={};$scope.extendAd={};$scope.campaigns=[];$scope.page=1;$('.datepicker').persianDatepicker({observer:!0,format:'YYYY/MM/DD',autoClose:!0});$(".priceSeprator").keyup(function(){var price=Number($(this).val());$scope.extendAd.price=price.toLocaleString()});$(".priceSeprator").keyup(function(){var price=Number($(this).val());$scope.campaign.price=price.toLocaleString()});$scope.addCampaign=function(){$scope.campaign.endDate=($("#endDate").val());$scope.campaign.startDate=($("#startDate").val());if($scope.campaign.name==""||$scope.campaign.slug==""||$scope.campaign.price==""||$scope.campaign.siteName==""||$scope.campaign.endDate==""||$scope.campaign.startDate==""||$scope.campaign.campaignPlace==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({"name":$scope.campaign.name,"slug":$scope.campaign.slug,"price":$scope.campaign.price,"siteName":$scope.campaign.siteName,"endDate":$scope.campaign.endDate,"startDate":$scope.campaign.startDate,"campaignPlace":$scope.campaign.campaignPlace,});$http({method:"POST",url:url+"admin/add-campaign",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$timeout(function(){$scope.campaign={"siteName":"","name":"","slug":"","price":"","endDate":"","startDate":"","campaignPlace":"",};$scope.page=1;$scope.getCampaign()},500)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.getCampaign=function(){if($scope.page==='...'){return!1}
blockUi();var data=$.param({"page":$scope.page,});$http({method:"POST",url:url+"admin/get-campaign",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();$scope.campaigns=response.data.data;$scope.pagination=createPagination(response.data.total,response.data.limit,$scope.page);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.changeCampaignPage=function(page){if($scope.page==page||$scope.page==='...')return!1;$scope.page=page;$scope.getCampaign()};$scope.nextCampaignPage=function(){var page=$scope.page+1;if($scope.pagination.length<page)return!1;$scope.changeCampaignPage(page)};$scope.prevCampaignPage=function(){var page=$scope.page-1;if(page<1)return!1;$scope.changeCampaignPage(page)};$scope.removeCampaign=function(id){bootbox.dialog({className:"modal-fade-in-scale-up",title:LANG.remove_campaign_title,message:LANG.remove_campaign_txt,buttons:{ok:{label:LANG.ok,className:'btn-danger',callback:function(){blockUi();var data=$.param({id:id,});$http({method:"POST",url:url+"admin/remove-campaign",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$scope.page=1;$scope.getCampaign()}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},cancel:{label:LANG.cancel,className:'btn-default',callback:function(){}}}})};$scope.filtersCampaign=function(){$scope.endDateFilter=($("#endDateFilter").val());$scope.startDateFilter=($("#startDateFilter").val());$scope.campaignStatistic()};$scope.extend_ad=function(){if($scope.extendAd.id=="")return!1;$scope.extendAd.endDate=($("#endDateExtend").val());$scope.extendAd.startDate=($("#startDateExtend").val());if($scope.extendAd.startDate==""||$scope.extendAd.endDate==""||$scope.extendAd.price==""||$scope.extendAd.campaignPlace==""){showMsg(LANG.field_error,LANG.wrong_title,"warning");return!1}
blockUi();var data=$.param({id:$scope.extendAd.id,price:$scope.extendAd.price,startDate:$scope.extendAd.startDate,endDate:$scope.extendAd.endDate,campaignPlace:$scope.extendAd.campaignPlace,});$http({method:"POST",url:url+"admin/extend-ad",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();console.log(response.data);if(response.data.status){showMsg(LANG.success_msg,LANG.success,"success");$timeout(function(){$scope.extendAd={"startDate":"","endDate":"","price":"","campaignPlace":"",};window.location.reload()},500)}else{showMsg(response.data.msg,LANG.wrong_title,"warning")}},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})};$scope.campaignStatistic=function(){blockUi();var data=$.param({"startDate":$scope.startDateFilter,"endDate":$scope.endDateFilter,"slug":$scope.campaign.slug,});$http({method:"POST",url:url+"admin/get-statistic",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){unBlockUi();if(!response.data.status){$("#morrisDonut").html('');return!1}
$scope.data=response.data.data;$scope.count=response.data.count;$timeout(function(){$("#morrisDonut").html('');Morris.Donut({element:'morrisDonut',data:[{label:LANG.person_logIn_campaign,value:$scope.count,color:'#c79414'},{label:LANG.person_buy_campaign,value:$scope.data,color:'rgba(50,101,113,0.27)'}],resize:!0,})},2000);$timeout(function(){$('[data-tooltip=true]').tooltip();$('[data-toggle="tooltip"]').tooltip()},500)},function error(response){showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}});angular.module('cmsApp').component('elementorText',{templateUrl:url+'api/panel/load-elementor/text',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.getDesignFrom=LANG.getDesignFrom;$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));let content=settings.content||"";$timeout(function(){$("#elementor_text_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).on("show.bs.modal",function(e){$("#elementor_ck_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).html(content);$("#elementor-section-"+$scope.$ctrl.key+'-'+$scope.$ctrl.index+' .elementor-content-editor').each(function(){delete window[$(this).attr('id')];window[$(this).attr('id')]=CKEDITOR.replace($(this).attr('id'),ckEditorOptions)})})},150)};$scope.save=function(key,index){var _editor=window['elementor_ck_'+key+'_'+index];_editor.updateElement();EditorCtrl.elementorSaveElementSetting(key,index,'text',{"content":_editor.getData()})}},});angular.module('cmsApp').component('elementorImage',{templateUrl:url+'api/panel/load-elementor/image',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.src='';$scope.width=128;$scope.height=128;$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.src=settings.src||'';$scope.width=settings.width||0;$scope.height=settings.height||0;$timeout(function(){$("#elementor_select_image_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).val($scope.src)},500)};$scope.showElmBtnRouter=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));let text=settings.text||"";let data=settings.data||{"type":"none","link":"","router":""};$("#button_router_text").val(text);$("#button_router_type_0").val(data.type);$("#button_router_link_0").val(data.link);$("#button_router_router_0").val(data.router);$("#button_router_router_0").html(data.router);button_router_show_settings();$("#buttonRouter").modal('show')}
$scope.save=function(key,index){let src=$("#elementor_select_image_"+key+"_"+index).val();$scope.src=src;EditorCtrl.elementorSaveElementSetting(key,index,'image',{"src":src,"width":$scope.width,"height":$scope.height,'text':$("#button_router_text").val(),'data':{'type':$("#button_router_type_0").val(),'link':$("#button_router_link_0").val(),'router':$("#button_router_router_0").html()}})}},});angular.module('cmsApp').component('elementorButton',{templateUrl:url+'api/panel/load-elementor/button',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.save=function(key,index){EditorCtrl.elementorSaveElementSetting(key,index,'button',{'text':$("#button_router_text").val(),'data':{'type':$("#button_router_type_0").val(),'link':$("#button_router_link_0").val(),'router':$("#button_router_router_0").html()}})};$scope.showElmBtnRouter=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));let text=settings.text||"";let data=settings.data||{"type":"none","link":"","router":""};$("#button_router_text").val(text);$("#button_router_type_0").val(data.type);$("#button_router_link_0").val(data.link);$("#button_router_router_0").val(data.router);$("#button_router_router_0").html(data.router);button_router_show_settings();$("#buttonRouter").modal('show')}},});angular.module('cmsApp').component('elementorIcon',{templateUrl:url+'api/panel/load-elementor/icon',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.icon='fa-magic';$scope.icon_type='icon';$scope.title='';$scope.design_type='default';$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.icon_type=settings.icon_type||"icon";$scope.icon=settings.icon||"fa-magic";$scope.cardTitle=settings.title||"";$scope.design_type=settings.design_type||"default";$timeout(function(){$('.icp-dd').iconpicker({icons:ICON_PICKER_ICONS,selectedCustomClass:'bg-purple',hideOnSelect:!0});$('.icp-dd').on('iconpickerSelected',function(event){$scope.$apply(function(){$scope.icon=event.iconpickerValue})})},350);$timeout(function(){if($scope.icon_type=='image'){$("#elementor_select_icon_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).val($scope.icon)}},500)};$scope.showElmBtnRouter=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));let text=settings.text||"";let data=settings.data||{"type":"none","link":"","router":""};$("#button_router_text").val(text);$("#button_router_type_0").val(data.type);$("#button_router_link_0").val(data.link);$("#button_router_router_0").val(data.router);$("#button_router_router_0").html(data.router);button_router_show_settings();$("#buttonRouter").modal('show')}
$scope.save=function(key,index){let src=$("#elementor_select_icon_"+key+"_"+index).val();if($scope.icon_type=='image'){$scope.icon=src}
EditorCtrl.elementorSaveElementSetting(key,index,'icon',{'icon_type':$scope.icon_type,'icon':$scope.icon,'title':$scope.cardTitle,'design_type':$scope.design_type,'text':$("#button_router_text").val(),'data':{'type':$("#button_router_type_0").val(),'link':$("#button_router_link_0").val(),'router':$("#button_router_router_0").html()}})}},});angular.module('cmsApp').component('elementorSpace',{template:`
    <!-- text modal -->
    <div class="modal fade" id="elementor_space_{{$ctrl.key}}_{{$ctrl.index}}" tabindex="-1" role="dialog" aria-labelledby="elementor_space_{{$ctrl.key}}_{{$ctrl.index}}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{$ctrl.title}}</h5>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="label text-right">{{sizeLabel}}</label>
                        <input type="number" class="form-control" ng-model="height">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-round ml-2 mr-2" data-dismiss="modal" aria-label="Close">{{cancel}}</button>
                    <button type="button" ng-click="save($ctrl.key, $ctrl.index)" class="btn btn-purple btn-round" data-dismiss="modal" aria-label="Close">{{closeAndSave}}</button>
                </div>
                <span ng-init="init()"></span>
            </div>
        </div>
    </div>
    <!-- text modal -->
    `,bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.cancel=LANG.cancel;$scope.closeAndSave=LANG.closeAndSave;$scope.sizeLabel=LANG.size;$scope.colorLabel=LANG.color;$scope.height=8;$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.height=Number(settings.height||8)};$scope.save=function(key,index){EditorCtrl.elementorSaveElementSetting(key,index,'space',{"height":$scope.height})}},});angular.module('cmsApp').component('elementorSeparator',{template:`
    <!-- text modal -->
    <div class="modal fade" id="elementor_separator_{{$ctrl.key}}_{{$ctrl.index}}" tabindex="-1" role="dialog" aria-labelledby="elementor_separator_{{$ctrl.key}}_{{$ctrl.index}}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{$ctrl.title}}</h5>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="label text-right">{{sizeLabel}}</label>
                        <input type="number" class="form-control" ng-model="height">
                    </div>
                    <div class="form-group">
                        <label class="label text-right">{{colorLabel}}</label>
                        <input type="text" id="elementor_separator_color_{{$ctrl.key}}_{{$ctrl.index}}" class="asColorpicker form-control" data-plugin="asColorPicker" data-mode="simple" value="" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-round ml-2 mr-2" data-dismiss="modal" aria-label="Close">{{cancel}}</button>
                    <button type="button" ng-click="save($ctrl.key, $ctrl.index)" class="btn btn-purple btn-round" data-dismiss="modal" aria-label="Close">{{closeAndSave}}</button>
                </div>
                <span ng-init="init()"></span>
            </div>
        </div>
    </div>
    <!-- text modal -->
    `,bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.cancel=LANG.cancel;$scope.closeAndSave=LANG.closeAndSave;$scope.sizeLabel=LANG.size;$scope.colorLabel=LANG.color;$scope.height=1;$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.height=Number(settings.height||1);$timeout(function(){$("#elementor_separator_color_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).val(settings.color||"#CCCCCC");$('.asColorpicker').asColorPicker({namespace:'colorInputUi'})},300)};$scope.save=function(key,index){EditorCtrl.elementorSaveElementSetting(key,index,'space',{"height":$scope.height,"color":$("#elementor_separator_color_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).val()})}},});angular.module('cmsApp').component('elementorSlider',{templateUrl:url+'api/panel/load-elementor/slider',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.move='automatic';$scope.interval=4;$scope.indicator="1";$scope.height=260;$scope.slides=[];$scope.list=null;$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.slides=settings.slides||[];$scope.move=settings.move||'automatic';$scope.indicator=settings.indicator||'1';$scope.height=Number(settings.height||260);$scope.interval=Number(settings.interval||4);$timeout(function(){$scope.list=listSortManager('contact_slider_'+$scope.$ctrl.key+'_'+$scope.$ctrl.index+'_sortable',function(){})},300)};$scope.save=function(key,index){$scope.elementorSlideSetImages();$timeout(function(){console.log($scope.move,$scope.interval,$scope.indicator,$scope.height,$scope.slides);EditorCtrl.elementorSaveElementSetting(key,index,'slider',{'move':$scope.move,'interval':$scope.interval,'indicator':$scope.indicator,'height':$scope.height,'slides':$scope.slides,})},300)};$scope.elementorRemoveRepeater=function(box,obj,callback,index){var remove=!0;if(callback!=''&&typeof window[callback]=="function"){remove=window[callback](index,obj)}
if(remove){$scope.elementorSlideSetImages();$timeout(function(){$scope.slides.splice(index,1);var newOrder=EditorCtrl.copyObject($scope.slides);for(var j in newOrder){for(var k in newOrder[j]){if(k=="router"){$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_"+k+"_"+j).html(newOrder[j][k])}else if(k=="image"){$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_"+k+"_"+j).val(newOrder[j][k]);$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_"+k+"_"+j+"_src").attr('src',url+newOrder[j][k])}else if(k=="type"){$scope.elementorShowRepeaterTypeRouter(box,newOrder[j][k],j)}else{$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_"+k+"_"+j).val(newOrder[j][k])}}}},0)}};$scope.elementorAddRepeater=function(box,callback,defaultVal){defaultVal=JSON.parse(Base64.decode(defaultVal));$scope.slides.push(defaultVal);$scope.elementorShowRepeaterTypeRouter(box,'none',$scope.slides.length-1);$scope.elementorSlideSetImages();if(callback!=''&&typeof window[callback]=="function"){window[callback]()}};$scope.elementorSlideSetImages=function(){for(let i in $scope.slides){let image=$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_image_"+i).val();if(image==''||image===undefined||image=='undefined'){image='/uploads/stocks/images/abb.jpg'}
let type=$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_type_"+i).val();let router=$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_router_"+i).html();$scope.slides[i].image=image;$scope.slides[i].type=type;$scope.slides[i].router=router}}
$scope.ElementorApplyShowRouterSettings=function(id,type,index){type=$("#slider_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index+"_type_"+index).val();EditorCtrl.applyShowRouterSettings(id,type,index)};$scope.elementorShowRepeaterTypeRouter=function(box,type,index){if(type==''||type===undefined||type=='undefined'||type==null){type='none'}
$timeout(function(){if(type=='none'||type=="link"||type=="email"||type=="tel"||type=="ussd"){$("#"+box+"_link_"+index).show();$("#"+box+"_router_settings_"+index).hide()}else{$("#"+box+"_link_"+index).hide();$("#"+box+"_router_settings_"+index).show()}},150)}},});angular.module('cmsApp').component('elementorCard',{templateUrl:url+'api/panel/load-elementor/card',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.src='';$scope.title='';$scope.subtitle='';$scope.content='';$scope.design_type='default';$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.src=settings.src||'';$scope.title=settings.title||'';$scope.subtitle=settings.subtitle||'';$scope.content=settings.content||'';$scope.design_type=settings.design_type||'default';$timeout(function(){$("#elementor_select_image_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).val($scope.src)},500)};$scope.showElmCardRouter=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));let text=settings.text||"";let data=settings.data||{"type":"none","link":"","router":""};$("#button_router_text").val(text);$("#button_router_type_0").val(data.type);$("#button_router_link_0").val(data.link);$("#button_router_router_0").val(data.router);$("#button_router_router_0").html(data.router);button_router_show_settings();$("#buttonRouter").modal('show')}
$scope.save=function(key,index){let src=$("#elementor_select_image_"+key+"_"+index).val();$scope.src=src;EditorCtrl.elementorSaveElementSetting(key,index,'text',{'src':$scope.src,'title':$scope.title,'subtitle':$scope.subtitle,'content':$scope.content,'design_type':$scope.design_type,'text':$("#button_router_text").val(),'data':{'type':$("#button_router_type_0").val(),'link':$("#button_router_link_0").val(),'router':$("#button_router_router_0").html()}})}},});angular.module('cmsApp').component('elementorVideo',{templateUrl:url+'api/panel/load-elementor/video',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.src='';$scope.video='';$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.src=settings.src||'';$scope.video=settings.video||''};$scope.save=function(key,index){let src=$("#mp4_image_"+key+"_"+index).val();let video=$("#mp4_link_"+key+"_"+index).val();$scope.src=src;$scope.video=video;if($.trim($scope.video)){if(getExtension($scope.video)!=='mp4'&&getExtension($scope.video)!=='mkv'){my_alert(LANG.extension_mp4);return!1}}
EditorCtrl.elementorSaveElementSetting(key,index,'video',{"src":src,"video":video})}},});angular.module('cmsApp').component('elementorAudio',{templateUrl:url+'api/panel/load-elementor/audio',bindings:{key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.src='';$scope.file='';$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.src=settings.src||'';$scope.file=settings.file||''};$scope.save=function(key,index){let src=$("#mp4_image_"+key+"_"+index).val();let file=$("#mp4_link_"+key+"_"+index).val();$scope.src=src;$scope.file=file;if($.trim($scope.file)){if(getExtension($scope.file)!=='mp3'){my_alert(LANG.extension_mp3);return!1}}
EditorCtrl.elementorSaveElementSetting(key,index,'audio',{"src":src,"file":file})}},});angular.module('cmsApp').component('elementorModule',{templateUrl:url+'api/panel/load-elementor/module',bindings:{app:'@',element:'@',key:'@',index:'@',title:'@',setting:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.loading=!1;$scope.element='';$scope.moduleId='';$scope.enableType=!1;$scope.type='';$scope.info=[];$scope.design_type={};$scope.init=function(){let settings=JSON.parse(Base64.decode($scope.$ctrl.setting));$scope.element=$scope.$ctrl.element;$scope.moduleId=settings.id||'';$scope.type=settings.type||'';$scope.design_type[$scope.element]=settings.design_type||'default';$timeout(function(){$("#elementor_module_"+$scope.$ctrl.key+"_"+$scope.$ctrl.index).on("show.bs.modal",function(e){$scope.getElementData()})},150)};$scope.save=function(key,index){if($scope.element!=''&&$scope.moduleId!=''){console.log($scope.design_type[$scope.element]);EditorCtrl.elementorSaveElementSetting(key,index,$scope.element,{'id':$scope.moduleId,'type':$scope.type,'design_type':$scope.design_type[$scope.element],})}}
$scope.getElementData=function(){var data=$.param({});$scope.loading=!0;blockUi();$http({method:"GET",url:url+'api/panel/load-elementor/loadModuleData?element='+$scope.element+'&sl='+$scope.$ctrl.app,headers:{'Content-Type':'application/x-www-form-urlencoded'},data:data}).then(function success(response){$scope.loading=!1;unBlockUi();if(response.data.status){$scope.info=response.data.data;$scope.enableType=response.data.enableType}else{showMsg(LANG.global_error,LANG.wrong_title,"error")}},function error(response){$scope.loading=!1;showMsg(LANG.global_error,LANG.wrong_title,"error");unBlockUi()})}},});angular.module('cmsApp').component('elementorSelectDesign',{templateUrl:url+'api/panel/load-elementor/design',bindings:{element:'@',key:'@',index:'@',title:'@',design:'@',},controller:function($scope,$http,$location,$timeout){$scope.closeAndSave=LANG.closeAndSave;$scope.getDesignFrom=LANG.getDesignFrom;$scope.elementorDesignSelector=LANG.elementorDesignSelector;$scope.designSection="";$scope.init=function(){$scope.designSection=$scope.$ctrl.design||""};$scope.save=function(key,index){EditorCtrl.elementorSaveElementDesign(key,index,$scope.$ctrl.element,$scope.designSection)}
$scope.checkDisable=function(section){switch($scope.$ctrl.element){case "text":case "image":case "card":case "video":case "audio":case "map":case "blog":case "shop":case "video_shop":case "file_shop":case "divar":case "menu":case "icon":if(section=='panels'||section=='cards'||section=='no_panels'||section=='lists'){return!1}
break;case "button":if(section=='buttons'||section=='fab_buttons'){return!1}
break;case "search":if(section=='inputs'){return!1}
break;case "slider":if(section=='slideshow'){return!1}
break;default:return!0}
return!0}},});